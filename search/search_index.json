{"config":{"lang":["ja"],"separator":"[\\s\\-\uff0c\u3002]+","pipeline":["stemmer"]},"docs":[{"location":"","title":"\u7ad9\u70b9\u7b80\u8ff0(Introduction)","text":"<p>\u76ee\u6807</p> <p>\u5f53\u4f60\u60f3\u5b9e\u73b0\u67d0\u4e2a\u529f\u80fd\u65f6\uff0c\u5148\u5230\u767e\u95ee\u7f51\u7684\u4ee3\u7801\u4e2d\u5fc3\uff0c\u770b\u770b\u6709\u6ca1\u6709\u53c2\u8003\u7684\u4ee3\u7801\u3002\u767e\u95ee\u7f51\u4ee3\u7801\u4e2d\u5fc3\uff0c\u6c47\u96c6\u5404\u7c7b\u4ee3\u7801\uff0c\u52a0\u5feb\u5f00\u53d1\u901f\u5ea6: \u6d89\u53ca\u5355\u7247\u673a\u3001RTOS\u3001Linux \u56ca\u62ec\u4ece\u4e0a\u5230\u4e0b\u5168\u6808\u5f00\u53d1\uff1a\u5e94\u7528\u7ec4\u4ef6\u3001C\u7a0b\u5e8f\u3001\u9a71\u52a8\u7a0b\u5e8f\u3001\u7cfb\u7edf(bootloader\u548c\u5185\u6838\u7b49) \u63d0\u4f9b\u6559\u7a0b\u94fe\u63a5\uff1a\u5982\u679c\u6211\u4eec\u7f16\u5199\u4e86\u67d0\u4e2a\u6a21\u5757\u7684\u6559\u7a0b\uff0c\u4f1a\u63d0\u4f9b\u94fe\u63a5 \u6559\u7a0b\u9002\u7528\u4e8e\u53ea\u60f3\u5feb\u901f\u505a\u51fa\u6210\u679c\u7684\u540c\u5b66\uff0c\u66f4\u9002\u7528\u4e8e\u6bd5\u8bbe\uff0c\u6211\u4eec\u6b63\u5728\u4e0d\u65ad\u4e30\u5bcc\u5b8c\u5584\uff0c\u652f\u6301\u66f4\u591a\u786c\u4ef6\u82af\u7247\u53ca\u6a21\u5757\uff0c\u63d0\u4f9b\u66f4\u4e30\u5bcc\u7684demo.</p>"},{"location":"#_1","title":"\u5982\u4f55\u9605\u8bfb\u6b64\u7ad9\uff1f","text":"<p>\u5efa\u8bae\u4f7f\u7528PC\u7aef\u6d4f\u89c8\u5668\u8bbf\u95ee\uff0c\u5206\u8fa8\u73871080p\u4e3a\u6700\u4f73\u9605\u8bfb\u3002</p>"},{"location":"#_2","title":"\u5d4c\u5165\u5f0f\u5f00\u53d1\u6d41\u7a0b\u7b80\u8ff0","text":"<p>\u5728\u8fdb\u5165\u5d4c\u5165\u5f0fLinux\u5f00\u53d1\u4e4b\u524d\uff0c\u6211\u4eec\u9700\u8981\u5148\u4e86\u89e3\u4e00\u4e0b\u5d4c\u5165\u5f0f\u7cfb\u7edf\u7684\u5f00\u53d1\u6846\u67b6\u4ee5\u53ca\u6d41\u7a0b\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u5de6\u4fa7\u4e3a\u6211\u4eec\u5e38\u7528\u7684PC\u7535\u8111\u4e3b\u673a\uff0c\u53f3\u4fa7\u4e3a\u5d4c\u5165\u5f0f\u7cfb\u7edf\uff0c\u56e0\u4e3a\u5d4c\u5165\u5f0f\u82af\u7247\u7684\u6027\u80fd\u5185\u5b58\u5b58\u50a8\u6761\u4ef6\u7b49\u539f\u56e0 \u65e0\u6cd5\u76f4\u63a5\u5728\u5d4c\u5165\u5f0f\u82af\u7247\u4e0a\u8fdb\u884c\u7a0b\u5e8f\u5f00\u53d1\uff0c\u6b64\u65f6\u6211\u4eec\u5c31\u9700\u8981\u501f\u52a9\u6027\u80fd\u5f3a\u5927\u7684PC\u4e3b\u673a\uff0c\u4e00\u822c\u4e3aX86\u7535\u8111\uff0c\u901a\u8fc7\u4ea4\u53c9\u7f16\u8bd1\u7684\u65b9\u5f0f\u751f\u4ea7 \u5d4c\u5165\u5f0f\u82af\u7247\u53ef\u4ee5\u8fd0\u884c\u7684\u7a0b\u5e8f\uff0c\u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u4e00\u822c\u53ebPC\u4e3b\u673a\u4e3aHost\u7aef\uff0c\u5bf9\u4e8e\u6211\u4eec\u7684\u5d4c\u5165\u5f0f\u5f00\u53d1\u677f\uff0c\u6211\u4eec\u4e00\u822c\u6210\u4e3aTarget\u7aef\u3002\u6211\u4eec\u9700\u8981\u5728Host\u7aef\u4f7f\u7528\u9488\u5bf9\u4e8eTarget\u7aef\u82af\u7247\u67b6\u6784\u751f\u6210\u7684\u5de5\u5177\u94fe\u8fdb\u884c\u4ea4\u53c9\u7f16\u8bd1\uff0c\u6700\u540e\u5c06\u8f93\u51fa\u7684\u53ef\u6267\u884c\u6587\u4ef6\u5b58\u653e\u81f3Target(\u76ee\u6807\u5f00\u53d1\u677f)\u5185\u8fd0\u884c\u3002 </p> <p>\u901a\u8fc7\u4e0a\u56fe\u53ef\u4ee5\u770b\u51fa\uff0c\u5b9e\u9645\u7684\u5d4c\u5165\u5f0f\u5f00\u53d1\u662f\u901a\u8fc7\u4e24\u90e8\u5206\u7ec4\u6210\u7684\uff0c\u90a3\u4e48\u5bf9\u4e8e\u5d4c\u5165\u5f0fLinux\u8bbe\u5907\u5f00\u53d1\u4e5f\u662f\u5982\u6b64\u3002\u901a\u8fc7Host\u7aef\u7684\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u94fe\u7f16\u8bd1 Target(\u76ee\u6807\u5f00\u53d1\u677f)\u7684\u7a0b\u5e8f\uff0c\u7136\u540e\u653e\u5728Target\u5f00\u53d1\u677f\u4e0a\u8fd0\u884c\u3002  </p> <p>\u65e2\u7136Target(\u76ee\u6807\u5f00\u53d1\u677f)\u4e0a\u8fd0\u884c\u7684\u7a0b\u5e8f\u662f\u901a\u8fc7Host(PC\u4e3b\u673a)\u7aef\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u94fe\u751f\u6210\uff0c\u90a3\u4e48\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u94fe\u53c8\u662f\u4ece\u54ea\u91cc\u800c\u6765\uff1f\u8fd9\u91cc\u5c31\u6d89\u53ca\u5230\u4e86\u4e00\u4e2aBuildSystem(\u6784\u5efa\u7cfb\u7edf)\u7684\u6982\u5ff5\uff0c\u6240\u6709\u7684\u7a0b\u5e8f\u90fd\u4e0d\u53ef\u80fd\u662f\u76f4\u63a5\u51ed\u7a7a\u51fa\u73b0\uff0c\u800c\u662f\u901a\u8fc7\u7f16\u7a0b\u5f00\u53d1\uff0c\u6700\u540e\u518d\u7f16\u8bd1\u5f97\u51fa\u3002\u4e0b\u9762\u8fd9\u5f20\u56fe\u6f14\u793a\u4e86\uff0c\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u94fe\u7684\u751f\u6210\u4ee5\u53ca\u5982\u4f55\u4f7f\u7528\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u94fe\u7f16\u8bd1\u751f\u6210\u4e00\u4e2a\u53ef\u4ee5\u5728Target(\u76ee\u6807\u5f00\u53d1\u677f)\u4e0a\u8fd0\u884c\u7684c++\u7a0b\u5e8f\u3002\u8fd9\u91cc\u4e3b\u8981\u544a\u8bc9\u5927\u5bb6\uff0c\u6240\u6709\u7684\u7a0b\u5e8f\u90fd\u662f\u4ece\u6e90\u7801\u7f16\u8bd1\u5f97\u51fa\uff0c\u4e0d\u7ba1\u662f\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u94fe\u8fd8\u662f Target\u4e0a\u8fd0\u884c\u7684\u7a0b\u5e8f\u3002 </p> <ul> <li>\u5982\u679c\u770b\u4e86\u4e0a\u8ff0\u7684\u4ecb\u7ecd\u8fd8\u662f\u4e0d\u592a\u7406\u89e3 \u5d4c\u5165\u5f0f\u7684\u5f00\u53d1\u6d41\u7a0b\u6846\u67b6\u53ef\u4ee5\u770b\u6211\u4eec\u4e4b\u524d\u4e13\u95e8\u5f55\u5236\u7684\u4e00\u5957\u57fa\u4e8ebuildroot\u5f00\u53d1\u7684\u5d4c\u5165\u5f0f\u57fa\u7840\u77e5\u8bc6\u79d1\u666e\u7c7b\u89c6\u9891\u6559\u7a0b\u3002</li> </ul>"},{"location":"#_3","title":"\u4ee3\u7801\u5e93\u4f7f\u7528\u6b65\u9aa4","text":"<p>Note</p> <p>\u8be6\u7ec6\u7684\u5404\u4e2a\u90e8\u5206\u5f00\u53d1\u6b65\u9aa4\u8bf7\u67e5\u770b \u5de6\u4fa7\u5bfc\u822a  LinuxC\u57fa\u7840 Linux\u7ec4\u4ef6\u5f00\u53d1 Linux\u8bbe\u5907\u9a71\u52a8\u5f00\u53d1 Linux\u7cfb\u7edf\u5f00\u53d1 \u9875\u9762\uff0c\u5728\u9875\u9762\u5185\u4f1a\u6709\u8be6\u7ec6\u7684\u5404\u90e8\u5206\u5f00\u53d1\u6d41\u7a0b\u4ecb\u7ecd\u3002</p> <pre><code>graph LR\nA[0.\u51c6\u5907\u786c\u4ef6]--&gt;B[1.\u83b7\u53d6Ubuntu\u865a\u62df\u673a\u7cfb\u7edf]--&gt;2.\u914d\u7f6eHost\u5f00\u53d1\u73af\u5883--&gt;3.\u83b7\u53d6Target\u5de5\u7a0b\u793a\u4f8b--&gt;4.Host\u7aef\u7f16\u8bd1\u5f00\u53d1--&gt;5.\u4e0a\u4f20\u81f3Target\u5f00\u53d1\u677f\u8fd0\u884c</code></pre>"},{"location":"#_4","title":"\u7f51\u7ad9\u8d44\u6e90\u6c47\u603b","text":"<p>\u6211\u4eec\u5c06\u672c\u7ad9\u6240\u6709\u7684\u8d44\u6e90\u901a\u8fc7\u601d\u7ef4\u5bfc\u56fe\u7684\u65b9\u5f0f\u7f57\u5217\u51fa\u6765\uff0c\u5927\u5bb6\u53ef\u4ee5\u6839\u636e\u81ea\u5df1\u7684\u9700\u8981\u76f4\u63a5\u70b9\u51fb\u6700\u53f3\u4fa7\u7684\u94fe\u63a5\uff0c\u5373\u53ef\u8df3\u8f6c\u5230\u4ee3\u7801\u5de5\u7a0b\u533a\u57df\u3002</p>"},{"location":"#_5","title":"\u5982\u4f55\u53c2\u4e0e\u7f16\u8f91\uff1f","text":"<ul> <li>\u6211\u4eec\u6240\u6709\u7684\u6587\u6863\u4f7f\u7528makrdown\u8fdb\u884c\u7f16\u5199\uff0c\u5b58\u653e\u5728github\u4ed3\u5e93https://github.com/100askTeam/LinuxCodeLibrary \u5185\uff0c\u53ef\u4ee5\u76f4\u63a5\u70b9\u51fb\u6bcf\u4e2a\u9875\u9762\u53f3\u4e0a\u89d2\u7684 \ud83d\udd8a \u7bad\u5934\u76f4\u63a5\u7f16\u8f91\u4fee\u6539\u3002</li> <li> <p>\u5bf9\u4e8e\u4ee3\u7801\u793a\u4f8b\u7b49\u5de5\u7a0b\uff0c\u5168\u90e8\u90fd\u6839\u636e\u4e0d\u540c\u7684\u4f7f\u7528\u573a\u666f\u5b58\u653e\u5728\u4e0d\u540c\u7684git\u4ed3\u5e93\u5185\u3002</p> </li> <li> <p>Linux\u57fa\u7840\uff1ahttps://github.com/100askTeam/Stage1-Applications</p> </li> <li>\u7ec4\u4ef6\uff1ahttps://github.com/100askTeam/Stage2-Components</li> <li>\u9a71\u52a8\uff1ahttps://github.com/100askTeam/Stage3-DeviceDriver</li> <li>\u7cfb\u7edf\uff1ahttps://github.com/100askTeam/Stage4-System</li> </ul> <p>\u613f\u666f\uff1a\u6211\u4eec\u6b63\u5728\u4e0d\u65ad\u5730\u652f\u6301\u66f4\u591a\u7684\u786c\u4ef6\u6a21\u5757\uff0c\u4ee3\u7801\u793a\u4f8b\uff0c\u52a0\u5165\u5230\u8fd9\u4e2a\u7ad9\u70b9\u5185\uff0c\u5982\u679c\u60a8\u611f\u5174\u8da3\uff0c\u6b22\u8fce\u52a0\u5165\u3002</p> <ul> <li>\u8ba8\u8bba\u4ea4\u6d41\uff1ahttps://forums.100ask.net/c/elinuxdev/23</li> </ul>"},{"location":"#_6","title":"\u60a8\u5c06\u83b7\u5f97\u4ec0\u4e48\uff1f","text":"<p>\u5feb\u901f\u5b9e\u73b0\u60a8\u9700\u8981\u5b9e\u73b0\u7684\u529f\u80fd\uff0c\u6211\u4eec\u63d0\u4f9b\u4e13\u95e8\u7684\u5f00\u53d1\u677f\u786c\u4ef6\uff0c\u914d\u5957\u7684\u6a21\u5757\u786c\u4ef6\uff0c\u8bbe\u5907\u9a71\u52a8 \u7cfb\u7edf\u6e90\u7801SDK\u5de5\u7a0b\u6e90\u7801\uff0c\u5e38\u7528\u7ec4\u4ef6\u5f00\u53d1\u793a\u4f8b\uff0c\u4ee5\u53caLinuxC\u57fa\u7840\uff0c\u8ba9\u5927\u5bb6\u53ef\u4ee5\u5728\u6700\u77ed\u7684\u65f6\u95f4\u5185\u5b9e\u73b0\u81ea\u5df1\u9700\u8981\u7684\u529f\u80fd\u3002</p>"},{"location":"#_7","title":"\u5173\u4e8e\u5f00\u6e90\u534f\u8bae","text":"<p>\u6b64\u9875\u9762\u4f7f\u7528\u4e86\u5f00\u6e90\u7684Mkdoc\u6587\u6863\u6846\u67b6\uff0c\u6587\u6863\u7ad9\u70b9\u6258\u7ba1\u5728GitHub\u4e0a\uff0c\u6bcf\u4e2a\u9875\u9762\u90fd\u4f1a\u6709\u7f16\u8f91\u6309\u94ae\uff0c\u5927\u5bb6\u53ef\u4ee5\u4e00\u8d77\u53c2\u4e0e\u7f16\u8f91\u6216\u8005\u63d0\u95ee\u6539\u8fdb\u6b64\u6587\u6863\u3002 * \u56fe\u7247\u5f15\u7528: https://preshing.com/20141119/how-to-build-a-gcc-cross-compiler/</p>"},{"location":"01-LinuxCprogrammers/","title":"LinuxC\u7b80\u8ff0(Introduction)","text":""},{"location":"01-LinuxCprogrammers/#_1","title":"\u6587\u6863\u76ee\u5f55\u5b8c\u6210\u5ea6\u5217\u8868","text":"<p>\u7eff\u8272\u221a\u53f7\u8868\u793a\u5df2\u5b8c\u6210\uff0c\u7070\u8272 \u221a \u8868\u793a\u672a\u5b8c\u6210\u3002</p> <ul> <li> Linux\u547d\u4ee4<ul> <li> \u6587\u4ef6\u7ba1\u7406\u7c7b\u547d\u4ee4</li> <li> \u6587\u6863\u7f16\u8f91\u7c7b\u547d\u4ee4</li> <li> \u7cfb\u7edf\u7ba1\u7406</li> <li> \u78c1\u76d8\u64cd\u4f5c</li> <li> \u7f51\u7edc\u7ba1\u7406</li> </ul> </li> <li> C\u57fa\u7840\u77e5\u8bc6<ul> <li> C\u57fa\u7840</li> </ul> </li> <li> MakeFile</li> <li> GNU\u5de5\u5177<ul> <li> GCC</li> <li> G++</li> <li> GDB</li> <li> OBJDUMP</li> </ul> </li> <li> \u6587\u4ef6/IO</li> <li> \u8fdb\u7a0b\u7ebf\u7a0b</li> <li> \u8fdb\u7a0b\u901a\u4fe1</li> <li> \u7f51\u7edc\u7f16\u7a0b</li> <li> \u6b63\u5219\u8868\u8fbe\u5f0f</li> </ul>"},{"location":"01-LinuxCprogrammers/#_2","title":"\u5982\u4f55\u53c2\u4e0e\u5171\u4eab\uff1f","text":"<ul> <li>Linux\u57fa\u7840\uff1ahttps://github.com/100askTeam/Stage1-Applications</li> <li>\u4ea4\u6d41\u793e\u533a\uff1ahttps://forums.100ask.net/c/elinuxdev/23</li> </ul>"},{"location":"02-Components/","title":"Linux\u7ec4\u4ef6\u7b80\u8ff0(Introduction)","text":""},{"location":"02-Components/#_1","title":"\u7ec4\u4ef6\u5f00\u53d1\u6d41\u7a0b\u4ecb\u7ecd","text":"<p>Note</p> <p>\u5bf9\u4e8e\u5d4c\u5165\u5f0fLinux\u7ec4\u4ef6\u5f00\u53d1\uff0c\u4e3b\u8981\u5305\u542b \u793e\u533a\u7ec4\u4ef6 \u5e93 \u7b49\uff0c\u501f\u52a9\u5f3a\u5927\u7684\u793e\u533a\u529b\u91cf\uff0c\u53bb\u5b9e\u73b0\u81ea\u5df1\u7684\u9879\u76ee\uff0c\u56e0\u4e3a\u793e\u533a\u7ec4\u4ef6\u5e93\u7b49\u975e\u5e38\u591a\uff0c\u4e14\u6709\u4e13\u95e8\u7684\u4f7f\u7528\u8bf4\u660e\uff0c\u6240\u4ee5\u6211\u4eec\u4f1a\u627e\u51fa\u4e00\u4e9b\u5e38\u7528\u7684\u7ec4\u4ef6 \u5e93 \u7ed9\u5927\u5bb6\u63d0\u4f9b\u5f00\u53d1\u793a\u4f8b\u8bf4\u660e\u3002</p> <p>\u6574\u4e2a\u5f00\u53d1\u6d41\u7a0b\u4e3b\u8981\u5206\u4e3a\u4e24\u90e8\u5206\uff0c\u6b65\u9aa41\u81f3\u6b65\u9aa43\uff0c\u4e3b\u8981\u914d\u7f6eHost\u7aef\u5f00\u53d1\u73af\u5883\uff0c\u6b65\u9aa44 5 \u4e3a\u5f00\u53d1Target\u5f00\u53d1\u677f\u7a0b\u5e8f\u5e76\u8fd0\u884c\u6d4b\u8bd5\u3002</p>"},{"location":"02-Components/#_2","title":"\u6b65\u9aa4\u4e00","text":"<p>\u83b7\u53d6\u5f00\u53d1\u677f\u914d\u5957\u7684\u5b8c\u6574\u865a\u62df\u673a\uff0c\u6211\u4eec\u7684\u865a\u62df\u673a\u63d0\u524d\u5e2e\u5927\u5bb6\u914d\u7f6e\u597d\u4e86\u5404\u79cd\u73af\u5883 \u5305\u542bvscode \u793a\u4f8b\u5de5\u7a0b\u6e90\u7801 \u5404\u79cd\u4f9d\u8d56\u5de5\u5177\u5305 \u4e2d\u6587\u8f93\u5165\u6cd5\u7b49\uff0c\u5927\u5bb6\u53ef\u4ee5\u76f4\u63a5\u89e3\u538b\u8fd0\u884c\u5c31\u53ef\u4ee5\u5f00\u59cb\u7740\u624b\u5f00\u53d1\u3002 \u4e0d\u540c\u7684\u677f\u5b50\u56e0\u4e3a \u786c\u4ef6\u5dee\u5f02 \u5185\u6838\u7248\u672c\u5dee\u5f02 \u5de5\u5177\u94fe\u7248\u672c\u5dee\u5f02 \u5e93\u7684\u652f\u6301\u4e0d\u540c \u800c\u63d0\u4f9b\u4e13\u95e8\u7684\u865a\u62df\u673a\u7cfb\u7edf\u955c\u50cf\uff0c\u8bf7\u5927\u5bb6\u4e00\u5b9a\u8981\u6839\u636e\u81ea\u5df1\u7684\u677f\u5b50\u578b\u53f7\u53bb\u83b7\u53d6\u5bf9\u5e94\u7684\u865a\u62df\u673a\u3002</p>"},{"location":"02-Components/#imx6ull-pro","title":"IMX6ULL-Pro\u5168\u529f\u80fd\u5f00\u53d1\u677f","text":"<ul> <li>\u767e\u5ea6\u7f51\u76d8\u94fe\u63a5:\u94fe\u63a5\uff1ahttps://pan.baidu.com/s/1cXwhwPMAY1wZ_XGWMtg_vw?pwd=kjnh </li> <li>\u5976\u725b\u5feb\u4f20\u94fe\u63a5:</li> </ul>"},{"location":"02-Components/#stm32mp157-pro","title":"STM32MP157-Pro","text":"<ul> <li>\u767e\u5ea6\u7f51\u76d8\u94fe\u63a5\uff1a </li> <li>\u5976\u725b\u5feb\u4f20\u94fe\u63a5\uff1a</li> </ul>"},{"location":"02-Components/#_3","title":"\u6b65\u9aa4\u4e8c","text":"<p>\u4f7f\u7528VMware\u8fd0\u884c \u6b65\u9aa4\u4e00\u83b7\u53d6\u5230\u7684\u5f00\u53d1\u677f\u914d\u5957\u865a\u62df\u673a\u955c\u50cf\u3002</p> <p>1.\u9996\u5148\u4e0b\u8f7dvmware\u865a\u62df\u673a\u5de5\u5177</p> <p>\u4f7f\u7528\u6d4f\u89c8\u5668\u6253\u5f00\u7f51\u5740 https://www.vmware.com/products/workstation-pro/workstation-pro-evaluation.html \u53c2\u8003\u4e0b\u56fe\u7bad\u5934\u6240\u793a\uff0c\u70b9\u51fb\u4e0b\u8f7d\u5b89\u88c5 Windows\u7248\u672c\u7684VMware Workstation \uff0c\u70b9\u51fb DOWNLOAD NOW \u5373\u53ef\u5f00\u59cb\u4e0b\u8f7d\u3002</p> <p></p> <p>2.\u4e0b\u8f7d\u5b8c\u6210\u540e\uff0c\u53ea\u9700\u8981\u6839\u636e\u8f6f\u4ef6\u63d0\u793a \u4e00\u6b65\u6b65\u9ed8\u8ba4\u5b89\u88c5\u5c31\u53ef\u4ee5\uff0c\u7b49\u5f85\u5b8c\u6210\u3002 </p> <p>\u6ce8\u610f\uff1a\u6700\u540e\u53ef\u80fd\u4f1a\u63d0\u793a\u8f93\u5165\u5bc6\u94a5\uff0c\u81ea\u884c\u6839\u636e\u7248\u672c \u767e\u5ea6\u641c\u7d22\u5373\u53ef\u3002 </p>"},{"location":"02-Components/#_4","title":"\u6b65\u9aa4\u4e09","text":"<p>\u914d\u7f6e\u865a\u62df\u673a\u5f00\u53d1\u73af\u5883\uff0c\u548c\u5f00\u53d1\u677f\u4e92\u76f8\u901a\u4fe1\u3002 \u8fd9\u4e00\u6b65\u51b3\u5b9a\u4e86\u5f00\u53d1\u677f\u662f\u5426\u53ef\u4ee5\u548cubuntu\u901a\u4fe1,\u5c06\u4f60\u7684\u7a0b\u5e8f\u4e0a\u4f20\u81f3\u5f00\u53d1\u677f\u6267\u884c\u3002\u5bf9\u4e8eIMX6ULL\u5f00\u53d1\u677f STM32MP157\u5f00\u53d1\u677f \u76f4\u63a5\u901a\u8fc7USB\u8f6c\u7f51\u5361\u8bbe\u5907\uff0c\u6765\u5b9e\u73b0 ubuntu\u4e0e\u5f00\u53d1\u677f\u4e92\u76f8\u901a\u4fe1\uff0c\u5177\u4f53\u64cd\u4f5c\u6b65\u9aa4\u5982\u4e0b\uff0c\u6ce8\u610f\uff1aUSB\u7f51\u5361\u9700\u8981\u4f7f\u7528\u6211\u4eec\u63d0\u4f9b\u7684\u4e13\u7528\u7f51\u5361\u624d\u53ef\u4ee5\uff0c\u5176\u5b83\u578b\u53f7\u4e0d\u4e00\u5b9a\u652f\u6301\u3002</p> <p>1.ubuntu\u7cfb\u7edf\u542f\u52a8\uff0c\u5c06USB\u7f51\u5361\u8bbe\u5907\u901a\u8fc7Vmware\u6302\u8f7d\u81f3ubuntu\u7cfb\u7edf\u5185\u3002  2.ubuntu\u5185\u8bbe\u7f6eUSB\u7f51\u5361\u9759\u6001IP\u5730\u5740 </p> <p></p> <p></p> <p></p> <p>3.\u5f00\u53d1\u677f\u5185\u8bbe\u7f6e\u7f51\u5361\u9759\u6001IP\u5730\u5740\u5e76\u4e92\u76f8\u901a\u4fe1\u9a8c\u8bc1</p>"},{"location":"02-Components/#imx6ull-pro_1","title":"IMX6ULL-Pro\u5f00\u53d1\u677f","text":"<p>\u5982\u679c\u4f60\u89c9\u5f97\u6bcf\u6b21\u542f\u52a8\u624b\u52a8\u8bbe\u7f6e\u9759\u6001IP\u5f88\u9ebb\u70e6 \u53ef\u4ee5\u624b\u52a8\u7f16\u8f91 <code>/etc/network/interfaces</code>\u6587\u4ef6\u589e\u52a0\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u5728\u5f00\u53d1\u677f\u6267\u884c\u5982\u4e0b\u547d\u4ee4 \u6765\u81ea\u52a8\u8bbe\u7f6e\u7f51\u5361\u4fe1\u606f\u3002</p> <pre><code>mv /etc/network/interfaces ~/\ncat &lt;&lt; EOF &gt; /etc/network/interfaces\nauto lo\niface lo inet loopback\nauto eth0\niface eth0 inet static\n    address 192.168.5.9\n    netmask 255.255.255.0\n    gateway 192.168.5.1\nEOF\n</code></pre>"},{"location":"02-Components/#stm32mp157-pro_1","title":"STM32MP157-Pro\u5f00\u53d1\u677f","text":"<p>\u5f85\u8865\u5145</p>"},{"location":"02-Components/#_5","title":"\u6b65\u9aa4\u56db","text":"<p>\u4e0a\u4f20\u7a0b\u5e8f\u5230\u5f00\u53d1\u677f \u53c2\u8003\u6b65\u9aa4\u4e09\uff0c\u5df2\u7ecf\u53ef\u4ee5\u8ba9ubuntu\u548c\u5f00\u53d1\u677f\u4e92\u76f8\u901a\u4fe1\u4e86\uff0c\u63a5\u4e0b\u6765\u6211\u4eec\u53ef\u4ee5\u7528\u591a\u79cd\u65b9\u5f0f\u4f20\u8f93\u6587\u4ef6\u5230\u6211\u4eec\u7684\u5f00\u53d1\u677f\u5185\uff0c\u53ef\u4ee5\u662f \u5f00\u53d1\u677f\u6302\u8f7dubuntu nfs\u76ee\u5f55\uff0c\u4e5f\u53ef\u4ee5\u662fssh scp\u4f20\u8f93\u7b49\u7b49\u3002</p> <ul> <li>\u4f7f\u7528scp\u65b9\u5f0f\u4f20\u8f93 <p>Linux scp \u547d\u4ee4\u7528\u4e8e Linux \u4e4b\u95f4\u590d\u5236\u6587\u4ef6\u548c\u76ee\u5f55\u3002scp \u662f secure copy \u7684\u7f29\u5199, scp \u662f linux \u7cfb\u7edf\u4e0b\u57fa\u4e8e ssh \u767b\u9646\u8fdb\u884c\u5b89\u5168\u7684\u8fdc\u7a0b\u6587\u4ef6\u62f7\u8d1d\u547d\u4ee4\u3002</p> </li> </ul> <p>\u6211\u4eec\u5df2\u7ecf\u77e5\u9053\u5f00\u53d1\u677f\u7684IP\u5730\u5740\u662f 192.168.5.9 \u63a5\u4e0b\u6765\u6211\u5728ubuntu\u4e0b\u521b\u5efa\u4e00\u4e2a 1.txt \u5e76\u901a\u8fc7 scp\u5728ubuntu\u4e0a \u4e0a\u4f20\u5230\u5f00\u53d1\u677f\u3002  \u5982\u4e0b\u793a\u4f8b\uff0c\u4f7f\u7528echo\u521b\u5efa\u4e00\u4e2a\u5185\u5bb9\u662f4\u4e2a\u6570\u5b571\u76841.txt\u6587\u4ef6\uff0c\u7136\u540e\u901a\u8fc7scp\u4e0a\u4f20\u5230\u5f00\u53d1\u677f\u7684/root\u76ee\u5f55\u4e0b\u3002</p> <pre><code>book@ubuntu1804:~$ echo 11111 &gt; 1.txt\nbook@ubuntu1804:~$ scp 1.txt  root@192.168.5.9:/root\n1.txt                                                100%    6     1.4KB/s   00:00    book@ubuntu1804:~$ </code></pre> <p>\u5f00\u53d1\u677f\u5185\u67e5\u770b\u4e0a\u4f20\u5230/root\u76ee\u5f55\u4e0b\u76841.txt\u6587\u4ef6 <pre><code>[root@100ask:~]# ls /root/1.txt\n/root/1.txt\n[root@100ask:~]# cat /root/1.txt\n11111\n[root@100ask:~]#\n</code></pre></p> <p>\u66f4\u591a\u7528\u6cd5\u53ef\u53c2\u8003\uff1a https://www.runoob.com/linux/linux-comm-scp.html</p> <ul> <li>\u5f00\u53d1\u677f\u4f7f\u7528nfs\u7f51\u7edc\u6587\u4ef6\u7cfb\u7edf\u65b9\u5f0f <p>NFS\u5373\u7f51\u7edc\u6587\u4ef6\u7cfb\u7edf\uff0c\u5141\u8bb8\u5f00\u53d1\u677f\u76f4\u63a5\u901a\u8fc7\u7f51\u7edc\u6302\u8f7dPC\u673a\u4e2d\u7684\u6587\u4ef6\u5939\u3002\u4e0b\u9762\u4ecb\u7ecd\u5728ubuntu\u4e0a\u7684NFS\u670d\u52a1\u5b89\u88c5\u548c\u914d\u7f6e\u3002</p> </li> </ul> <p>\u9996\u5148\uff0c\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u5b89\u88c5NFS\u670d\u52a1\uff1a <pre><code>book@100ask:~$ sudo apt-get install nfs-kernel-server\n</code></pre> \u7136\u540e\u7f16\u8f91/etc/exports\u6587\u4ef6\uff0c\u6dfb\u52a0NFS\u670d\u52a1\u5bfc\u51fa\u7684\u5de5\u4f5c\u76ee\u5f55\uff1a <pre><code>book@100ask:~$ sudo gedit /etc/exports\n</code></pre> \u6dfb\u52a0NFS\u76ee\u5f55\uff1a\u4e0b\u9762\u4ee5/home/book/rootfs\u4e3a\u4f8b\uff0c\u5c06\u5176\u6dfb\u52a0\u5230/etc/exports\u6587\u4ef6\u4e2d, \u5982\u4e0b\uff1a <pre><code>/home/book/nfs_rootfs  *(rw,nohide,insecure,no_subtree_check,async,no_root_squash)\n</code></pre> \u6700\u540e\uff0c\u91cd\u542fNFS\u670d\u52a1: <pre><code>book@100ask:~$ sudo service nfs-kernel-server restart\n</code></pre> \u5982\u679c\u4e00\u5207\u6b63\u5e38\uff0c\u53ef\u4ee5\u5728ubuntu\u4e2d\u6d4b\u8bd5NFS\u670d\u52a1\uff1a <pre><code>book@100ask:~$ sudo  mount  -t  nfs  127.0.0.1:/home/book/nfs_rootfs    /mnt\n</code></pre></p> <p>\u5f00\u53d1\u677f\u7aef\u8fdb\u5165\u7cfb\u7edf\u540e\uff0c\u786e\u4fdd\u53ef\u4ee5\u548cubuntu\u7f51\u7edc\u4e92\u901a\uff0c\u4e4b\u540e\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u8fdb\u884c\u6302\u8f7dubuntu\u7684nfs\u7f51\u7edc\u6587\u4ef6\u7cfb\u7edf\u3002\u5982\u4e0b\u6240\u793a\uff0c\u5c06nfs\u6587\u4ef6\u7cfb\u7edf\u6302\u8f7d\u5230\u5f00\u53d1\u677f\u7684/mnt\u76ee\u5f55\u4e0b\uff0c\u4e4b\u540e\u8fdb\u5165 /mnt\u76ee\u5f55\u4e0b\uff0c\u5c31\u53ef\u4ee5\u770b\u5230ubuntu\u4e0b\u91cc\u9762\u7684\u6587\u4ef6\uff0c\u8fd9\u4e5f\u5c31\u662f\u5b9e\u73b0\u4e86\u6587\u4ef6\u4e92\u4f20\u7684\u6548\u679c\u3002 <pre><code>[root@100ask:~]# mount -t nfs -o nolock 192.168.5.11:/home/book/nfs_rootfs /mnt\n[root@100ask:~]# cd /mnt\n</code></pre></p>"},{"location":"02-Components/#_6","title":"\u6b65\u9aa4\u4e94","text":"<p>\u8fd0\u884c\u5e94\u7528\u7a0b\u5e8f\u5e76\u8c03\u8bd5,\u901a\u8fc7\u524d\u9762\u7684\u6b65\u9aa4 \u5df2\u7ecf\u53ef\u4ee5\u5b9e\u73b0ubuntu\u548c\u5f00\u53d1\u677f\u4e92\u76f8\u901a\u4fe1\u4f20\u8f93\u6587\u4ef6\u4e86\uff0c\u4e0b\u9762\u6f14\u793a\u5728ubuntu\u4e0b\u4f7f\u7528VSCODE\u7f16\u8bd1HelloWrod \u5e76\u5728\u5f00\u53d1\u677f\u4e0a\u8fd0\u884c \u8c03\u8bd5\uff01</p> <p>1.\u83b7\u53d6hello-word\u793a\u4f8b\u6a21\u677f\uff0c\u6a21\u677f\u6587\u4ef6\u5b58\u653e\u5728git\u4ed3\u5e93\u91cc\uff0c\u53ef\u4ee5\u53c2\u8003\u4e0b\u8ff0\u547d\u4ee4\u5728\u7ec8\u7aef\u4e0b\u6267\u884c\u83b7\u53d6\u5de5\u7a0b\uff0c\u83b7\u53d6\u5230\u4ee5\u540e\uff0c\u5728hello-word\u76ee\u5f55\u4e0b\u6267\u884c <code>code .</code>\u547d\u4ee4\u5c31\u53ef\u4ee5\u5524\u9192vscode\u8fdb\u5165\u5f00\u53d1\u754c\u9762\uff0c\u5f53\u7136\u4e5f\u53ef\u4ee5\u70b9\u51fbubuntu\u5de6\u4fa7 vscode\u56fe\u6807 \u627e\u5230 hello-word \u5de5\u7a0b\u6240\u5728\u76ee\u5f55\u6253\u5f00\u3002 </p> <pre><code>book@ubuntu1804:~$ git clone https://github.com/100askTeam/Stage2-Components.git\nCloning into 'Stage2-Components'...\nremote: Enumerating objects: 12, done.\nremote: Counting objects: 100% (12/12), done.\nremote: Compressing objects: 100% (10/10), done.\nremote: Total 12 (delta 0), reused 12 (delta 0), pack-reused 0\nUnpacking objects: 100% (12/12), done.\nbook@ubuntu1804:~$ cd Stage2-Components/\nbook@ubuntu1804:~/Stage2-Components$ cd hello-world/\nbook@ubuntu1804:~/Stage2-Components/hello-world$ code .\n</code></pre> <p>2.\u4f7f\u7528vscode\u6253\u5f00\u5de5\u7a0b\u4ee5\u540e\u53ef\u4ee5\u770b\u5230\u5982\u4e0b\u4e3b\u754c\u9762\uff0c\u5176\u4e2d\u7ea2\u6846\u5904\u662fhellowrd\u7a0b\u5e8f\u6e90\u7801\uff0c\u5de6\u4fa7\u5206\u522b\u662f makefile vscode\u914d\u7f6e\u6587\u4ef6\u7b49\u3002</p> <p></p> <ol> <li>\u5982\u679c\u9700\u8981\u7f16\u8bd1\u6b64\u5de5\u7a0b\u53ef\u4ee5\u53c2\u8003\u4e0b\u56fe \u70b9\u51fbvscode \u5de6\u4e0a\u83dc\u5355\u680f \u627e\u5230  <code>Terminal 1</code>\u7136\u540e\u518d\u5f39\u51fa\u7684\u5b50\u9875\u9762\u83dc\u5355\u9879\u70b9\u51fb <code>Run Build Task 2</code>\u6765\u7f16\u8bd1\u6784\u5efa\u6b64\u5de5\u7a0b\uff0c\u5f53\u7136\u4e5f\u53ef\u4ee5\u4f7f\u7528 \u5feb\u6377\u952e ctrl + shift + b \u3002 </li> </ol> <p>\u6784\u5efa\u65f6\u53ef\u4ee5\u770b\u5230 \u53f3\u4e0b\u7684  \u7ec8\u7aef\u4f1a\u8bdd\u754c\u9762\uff0c\u91cc\u9762\u8be6\u7ec6\u7684\u663e\u793a\u51fa\u6765\u4e86\u7f16\u8bd1\u7684\u6b65\u9aa4\u7b49\u4fe1\u606f\u3002 </p> <p>\u4e5f\u53ef\u4ee5\u70b9\u51fb\u53f3\u4fa7\u7684 \u7ea2\u8272\u68461 <code>bash</code>\u5b57\u7b26\uff0c\u5207\u6362\u5230\u5f53\u524d\u5de5\u7a0b\u7684shell\u7ec8\u7aef\u547d\u4ee4\u754c\u9762\uff0c\u5728\u91cc\u9762\u8fdb\u884c\u5176\u5b83\u64cd\u4f5c\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u7f16\u8bd1\u597d\u7684\u6587\u4ef6 \u76f4\u63a5\u901a\u8fc7 scp nfs\u7b49\u65b9\u5f0f\u4f20\u5230\u5f00\u53d1\u677f\u5185\uff0c\u7136\u540e\u518d\u5f00\u53d1\u677f\u6267\u884c\u3002 </p> <p>4.\u5982\u679c\u4f60\u4e0d\u60f3\u624b\u52a8\u4e0a\u4f20\u7f16\u8bd1\u51fa\u6765\u7684\u76ee\u6807\u7a0b\u5e8f\uff0c\u4e5f\u53ef\u4ee5\u53c2\u8003\u4e0b\u56fe\u6267\u884c \u70b9\u51fb vscode \u5de6\u4e0a\u83dc\u5355\u680f\u754c\u9762\u91cc\uff0c<code>Run 1</code>\u6309\u94ae\uff0c\u518d\u5f39\u51fa\u7684\u5b50\u9875\u9762\u91cc\u9762 \u70b9\u51fb <code>Start Debugging 2</code>\u6765\u81ea\u52a8\u8fdb\u5165\u8c03\u8bd5\u754c\u9762\u3002 </p> <p>\u7efc\u4e0a\uff0c\u5b8c\u6574\u6f14\u793a\u4e86\u5982\u4f55\u4f7f\u7528ubuntu\u7cfb\u7edfvscode\u5f00\u53d1\u4e00\u4e2a\u53ef\u4ee5\u5728\u5f00\u53d1\u677f\u4e0a\u8fd0\u884c\u7684helloword\u7a0b\u5e8f\uff0c\u63a5\u4e0b\u6765\u5c31\u53ef\u4ee5\u8fdb\u5165 Linux\u7ec4\u4ef6\u5f00\u53d1\u9875\u9762\u8fdb\u884c\u5b9e\u9645\u7684\u5de5\u7a0b\u5f00\u53d1\u4e86\uff01</p>"},{"location":"02-Components/#_7","title":"\u6587\u6863\u5b8c\u6210\u5ea6","text":"<ul> <li> \u97f3\u9891\u4e0e\u663e\u793a\u76f8\u5173\u7ec4\u4ef6</li> <li> \u7f51\u7edc\u901a\u4fe1\u76f8\u5173\u7ec4\u4ef6</li> </ul>"},{"location":"02-Components/#_8","title":"\u5982\u4f55\u53c2\u4e0e\u7f16\u8f91\uff1f","text":"<ul> <li>Linux\u7ec4\u4ef6\uff1ahttps://github.com/100askTeam/Stage2-Components</li> <li>\u4ea4\u6d41\u793e\u533a\uff1ahttps://forums.100ask.net/c/elinuxdev/23</li> </ul>"},{"location":"03-DeviceDriver/","title":"Linux\u8bbe\u5907\u9a71\u52a8\u7b80\u8ff0(Introduction)","text":"<p>\u9a71\u52a8\u5f00\u53d1\u8bf4\u660e</p> <p>\u6b64\u90e8\u5206\u4e3b\u8981\u6d89\u53ca\u6a21\u5757\u9a71\u52a8\u5f00\u53d1\uff0c\u9002\u914d\u6211\u4eec\u7684\u6240\u6709\u5f00\u53d1\u677f \u53ca\u76f8\u5e94\u6a21\u5757\uff0c\u6211\u4eec\u4f1a\u63d0\u524d\u5c06</p>"},{"location":"03-DeviceDriver/#imx6ull-pro","title":"IMX6ULL-Pro\u5f00\u53d1\u6b65\u9aa4","text":""},{"location":"03-DeviceDriver/#_1","title":"\u6b65\u9aa4\u4e00","text":"<p>\u83b7\u53d6\u5f00\u53d1\u677f\u914d\u5957\u7684\u5b8c\u6574\u865a\u62df\u673a\uff0c\u6211\u4eec\u7684\u865a\u62df\u673a\u63d0\u524d\u5e2e\u5927\u5bb6\u914d\u7f6e\u597d\u4e86\u5404\u79cd\u73af\u5883 \u5305\u542bvscode \u793a\u4f8b\u5de5\u7a0b\u6e90\u7801 \u5404\u79cd\u4f9d\u8d56\u5de5\u5177\u5305 \u4e2d\u6587\u8f93\u5165\u6cd5\u7b49\uff0c\u5927\u5bb6\u53ef\u4ee5\u76f4\u63a5\u89e3\u538b\u8fd0\u884c\u5c31\u53ef\u4ee5\u5f00\u59cb\u7740\u624b\u5f00\u53d1\u3002 \u4e0d\u540c\u7684\u677f\u5b50\u56e0\u4e3a \u786c\u4ef6\u5dee\u5f02 \u5185\u6838\u7248\u672c\u5dee\u5f02 \u5de5\u5177\u94fe\u7248\u672c\u5dee\u5f02 \u5e93\u7684\u652f\u6301\u4e0d\u540c \u800c\u63d0\u4f9b\u4e13\u95e8\u7684\u865a\u62df\u673a\u7cfb\u7edf\u955c\u50cf\uff0c\u8bf7\u5927\u5bb6\u4e00\u5b9a\u8981\u6839\u636e\u81ea\u5df1\u7684\u677f\u5b50\u578b\u53f7\u53bb\u83b7\u53d6\u5bf9\u5e94\u7684\u865a\u62df\u673a\u3002</p> <ul> <li>\u767e\u5ea6\u7f51\u76d8\u94fe\u63a5:\u94fe\u63a5\uff1ahttps://pan.baidu.com/s/1cXwhwPMAY1wZ_XGWMtg_vw?pwd=kjnh </li> <li>\u5976\u725b\u5feb\u4f20\u94fe\u63a5:</li> </ul>"},{"location":"03-DeviceDriver/#_2","title":"\u6b65\u9aa4\u4e8c","text":"<p>     \u6ce8\u610f\uff1a\u6574\u4e2a\u7f51\u7ad9\u91cc\u9762\u6bcf\u4e2a\u677f\u5b50\u5bf9\u5e94\u7684\u865a\u62df\u673a\u90fd\u662f\u540c\u4e00\u4e2a\uff0c\u53ea\u662f\u5728\u4e0d\u540c\u7684\u9875\u9762\u90fd\u6709\u4ecb\u7ecd\uff0c\u5982\u679c\u60a8\u5728\u5176\u5b83\u90e8\u5206\u9875\u9762\u4e0b\u8f7d\u4e86\u865a\u62df\u673a\u7cfb\u7edf\u955c\u50cf\uff0c\u5219\u65e0\u9700\u518d\u8fd9\u4e2a\u9875\u9762\u83b7\u53d6\uff0c\u76f4\u63a5\u8df3\u8fc7 \u6b64\u6b65\u9aa4\u5373\u53ef\u3002 </p> <p>\u4f7f\u7528VMware\u8fd0\u884c \u6b65\u9aa4\u4e00\u83b7\u53d6\u5230\u7684\u5f00\u53d1\u677f\u914d\u5957\u865a\u62df\u673a\u955c\u50cf\u3002</p> <p>1.\u9996\u5148\u4e0b\u8f7dvmware\u865a\u62df\u673a\u5de5\u5177</p> <p>\u4f7f\u7528\u6d4f\u89c8\u5668\u6253\u5f00\u7f51\u5740 https://www.vmware.com/products/workstation-pro/workstation-pro-evaluation.html \u53c2\u8003\u4e0b\u56fe\u7bad\u5934\u6240\u793a\uff0c\u70b9\u51fb\u4e0b\u8f7d\u5b89\u88c5 Windows\u7248\u672c\u7684VMware Workstation \uff0c\u70b9\u51fb DOWNLOAD NOW \u5373\u53ef\u5f00\u59cb\u4e0b\u8f7d\u3002</p> <p></p> <p>2.\u4e0b\u8f7d\u5b8c\u6210\u540e\uff0c\u53ea\u9700\u8981\u6839\u636e\u8f6f\u4ef6\u63d0\u793a \u4e00\u6b65\u6b65\u9ed8\u8ba4\u5b89\u88c5\u5c31\u53ef\u4ee5\uff0c\u7b49\u5f85\u5b8c\u6210\u3002 </p> <p>\u6ce8\u610f\uff1a\u6700\u540e\u53ef\u80fd\u4f1a\u63d0\u793a\u8f93\u5165\u5bc6\u94a5\uff0c\u81ea\u884c\u6839\u636e\u7248\u672c \u767e\u5ea6\u641c\u7d22\u5373\u53ef\u3002 </p>"},{"location":"03-DeviceDriver/#_3","title":"\u6b65\u9aa4\u4e09","text":"<p>\u914d\u7f6e\u865a\u62df\u673a\u5f00\u53d1\u73af\u5883\uff0c\u548c\u5f00\u53d1\u677f\u4e92\u76f8\u901a\u4fe1\u3002 \u8fd9\u4e00\u6b65\u51b3\u5b9a\u4e86\u5f00\u53d1\u677f\u662f\u5426\u53ef\u4ee5\u548cubuntu\u901a\u4fe1,\u5c06\u4f60\u7684\u7a0b\u5e8f\u4e0a\u4f20\u81f3\u5f00\u53d1\u677f\u6267\u884c\u3002\u5bf9\u4e8eIMX6ULL\u5f00\u53d1\u677f STM32MP157\u5f00\u53d1\u677f \u76f4\u63a5\u901a\u8fc7USB\u8f6c\u7f51\u5361\u8bbe\u5907\uff0c\u6765\u5b9e\u73b0 ubuntu\u4e0e\u5f00\u53d1\u677f\u4e92\u76f8\u901a\u4fe1\uff0c\u5177\u4f53\u64cd\u4f5c\u6b65\u9aa4\u5982\u4e0b\uff0c\u6ce8\u610f\uff1aUSB\u7f51\u5361\u9700\u8981\u4f7f\u7528\u6211\u4eec\u63d0\u4f9b\u7684\u4e13\u7528\u7f51\u5361\u624d\u53ef\u4ee5\uff0c\u5176\u5b83\u578b\u53f7\u4e0d\u4e00\u5b9a\u652f\u6301\u3002</p> <p>1.ubuntu\u7cfb\u7edf\u542f\u52a8\uff0c\u5c06USB\u7f51\u5361\u8bbe\u5907\u901a\u8fc7Vmware\u6302\u8f7d\u81f3ubuntu\u7cfb\u7edf\u5185\u3002  2.ubuntu\u5185\u8bbe\u7f6eUSB\u7f51\u5361\u9759\u6001IP\u5730\u5740 </p> <p></p> <p></p> <p></p> <p>3.\u5f00\u53d1\u677f\u5185\u8bbe\u7f6e\u7f51\u5361\u9759\u6001IP\u5730\u5740\u5e76\u4e92\u76f8\u901a\u4fe1\u9a8c\u8bc1</p> <p></p> <p></p> <p></p> <p>\u5982\u679c\u4f60\u89c9\u5f97\u6bcf\u6b21\u542f\u52a8\u624b\u52a8\u8bbe\u7f6e\u9759\u6001IP\u5f88\u9ebb\u70e6 \u53ef\u4ee5\u624b\u52a8\u7f16\u8f91 <code>/etc/network/interfaces</code>\u6587\u4ef6\u589e\u52a0\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u5728\u5f00\u53d1\u677f\u6267\u884c\u5982\u4e0b\u547d\u4ee4 \u6765\u81ea\u52a8\u8bbe\u7f6e\u7f51\u5361\u4fe1\u606f\u3002</p> <pre><code>mv /etc/network/interfaces ~/\ncat &lt;&lt; EOF &gt; /etc/network/interfaces\nauto lo\niface lo inet loopback\nauto eth0\niface eth0 inet static\n    address 192.168.5.9\n    netmask 255.255.255.0\n    gateway 192.168.5.1\nEOF\n</code></pre>"},{"location":"03-DeviceDriver/#_4","title":"\u6b65\u9aa4\u56db","text":"<p>\u4e0a\u4f20\u7a0b\u5e8f\u5230\u5f00\u53d1\u677f \u53c2\u8003\u6b65\u9aa4\u4e09\uff0c\u5df2\u7ecf\u53ef\u4ee5\u8ba9ubuntu\u548c\u5f00\u53d1\u677f\u4e92\u76f8\u901a\u4fe1\u4e86\uff0c\u63a5\u4e0b\u6765\u6211\u4eec\u53ef\u4ee5\u7528\u591a\u79cd\u65b9\u5f0f\u4f20\u8f93\u6587\u4ef6\u5230\u6211\u4eec\u7684\u5f00\u53d1\u677f\u5185\uff0c\u53ef\u4ee5\u662f \u5f00\u53d1\u677f\u6302\u8f7dubuntu nfs\u76ee\u5f55\uff0c\u4e5f\u53ef\u4ee5\u662fssh scp\u4f20\u8f93\u7b49\u7b49\u3002</p> <ul> <li>\u4f7f\u7528scp\u65b9\u5f0f\u4f20\u8f93 <p>Linux scp \u547d\u4ee4\u7528\u4e8e Linux \u4e4b\u95f4\u590d\u5236\u6587\u4ef6\u548c\u76ee\u5f55\u3002scp \u662f secure copy \u7684\u7f29\u5199, scp \u662f linux \u7cfb\u7edf\u4e0b\u57fa\u4e8e ssh \u767b\u9646\u8fdb\u884c\u5b89\u5168\u7684\u8fdc\u7a0b\u6587\u4ef6\u62f7\u8d1d\u547d\u4ee4\u3002</p> </li> </ul> <p>\u6211\u4eec\u5df2\u7ecf\u77e5\u9053\u5f00\u53d1\u677f\u7684IP\u5730\u5740\u662f 192.168.5.9 \u63a5\u4e0b\u6765\u6211\u5728ubuntu\u4e0b\u521b\u5efa\u4e00\u4e2a 1.txt \u5e76\u901a\u8fc7 scp\u5728ubuntu\u4e0a \u4e0a\u4f20\u5230\u5f00\u53d1\u677f\u3002  \u5982\u4e0b\u793a\u4f8b\uff0c\u4f7f\u7528echo\u521b\u5efa\u4e00\u4e2a\u5185\u5bb9\u662f4\u4e2a\u6570\u5b571\u76841.txt\u6587\u4ef6\uff0c\u7136\u540e\u901a\u8fc7scp\u4e0a\u4f20\u5230\u5f00\u53d1\u677f\u7684/root\u76ee\u5f55\u4e0b\u3002</p> <pre><code>book@ubuntu1804:~$ echo 11111 &gt; 1.txt\nbook@ubuntu1804:~$ scp 1.txt  root@192.168.5.9:/root\n1.txt                                                100%    6     1.4KB/s   00:00    book@ubuntu1804:~$ </code></pre> <p>\u5f00\u53d1\u677f\u5185\u67e5\u770b\u4e0a\u4f20\u5230/root\u76ee\u5f55\u4e0b\u76841.txt\u6587\u4ef6 <pre><code>[root@100ask:~]# ls /root/1.txt\n/root/1.txt\n[root@100ask:~]# cat /root/1.txt\n11111\n[root@100ask:~]#\n</code></pre></p> <p>\u66f4\u591a\u7528\u6cd5\u53ef\u53c2\u8003\uff1a https://www.runoob.com/linux/linux-comm-scp.html</p> <ul> <li>\u5f00\u53d1\u677f\u4f7f\u7528nfs\u7f51\u7edc\u6587\u4ef6\u7cfb\u7edf\u65b9\u5f0f <p>NFS\u5373\u7f51\u7edc\u6587\u4ef6\u7cfb\u7edf\uff0c\u5141\u8bb8\u5f00\u53d1\u677f\u76f4\u63a5\u901a\u8fc7\u7f51\u7edc\u6302\u8f7dPC\u673a\u4e2d\u7684\u6587\u4ef6\u5939\u3002\u4e0b\u9762\u4ecb\u7ecd\u5728ubuntu\u4e0a\u7684NFS\u670d\u52a1\u5b89\u88c5\u548c\u914d\u7f6e\u3002</p> </li> </ul> <p>\u9996\u5148\uff0c\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u5b89\u88c5NFS\u670d\u52a1\uff1a <pre><code>book@100ask:~$ sudo apt-get install nfs-kernel-server\n</code></pre> \u7136\u540e\u7f16\u8f91/etc/exports\u6587\u4ef6\uff0c\u6dfb\u52a0NFS\u670d\u52a1\u5bfc\u51fa\u7684\u5de5\u4f5c\u76ee\u5f55\uff1a <pre><code>book@100ask:~$ sudo gedit /etc/exports\n</code></pre> \u6dfb\u52a0NFS\u76ee\u5f55\uff1a\u4e0b\u9762\u4ee5/home/book/rootfs\u4e3a\u4f8b\uff0c\u5c06\u5176\u6dfb\u52a0\u5230/etc/exports\u6587\u4ef6\u4e2d, \u5982\u4e0b\uff1a <pre><code>/home/book/nfs_rootfs  *(rw,nohide,insecure,no_subtree_check,async,no_root_squash)\n</code></pre> \u6700\u540e\uff0c\u91cd\u542fNFS\u670d\u52a1: <pre><code>book@100ask:~$ sudo service nfs-kernel-server restart\n</code></pre> \u5982\u679c\u4e00\u5207\u6b63\u5e38\uff0c\u53ef\u4ee5\u5728ubuntu\u4e2d\u6d4b\u8bd5NFS\u670d\u52a1\uff1a <pre><code>book@100ask:~$ sudo  mount  -t  nfs  127.0.0.1:/home/book/nfs_rootfs    /mnt\n</code></pre></p> <p>\u5f00\u53d1\u677f\u7aef\u8fdb\u5165\u7cfb\u7edf\u540e\uff0c\u786e\u4fdd\u53ef\u4ee5\u548cubuntu\u7f51\u7edc\u4e92\u901a\uff0c\u4e4b\u540e\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u8fdb\u884c\u6302\u8f7dubuntu\u7684nfs\u7f51\u7edc\u6587\u4ef6\u7cfb\u7edf\u3002\u5982\u4e0b\u6240\u793a\uff0c\u5c06nfs\u6587\u4ef6\u7cfb\u7edf\u6302\u8f7d\u5230\u5f00\u53d1\u677f\u7684/mnt\u76ee\u5f55\u4e0b\uff0c\u4e4b\u540e\u8fdb\u5165 /mnt\u76ee\u5f55\u4e0b\uff0c\u5c31\u53ef\u4ee5\u770b\u5230ubuntu\u4e0b\u91cc\u9762\u7684\u6587\u4ef6\uff0c\u8fd9\u4e5f\u5c31\u662f\u5b9e\u73b0\u4e86\u6587\u4ef6\u4e92\u4f20\u7684\u6548\u679c\u3002 <pre><code>[root@100ask:~]# mount -t nfs -o nolock 192.168.5.11:/home/book/nfs_rootfs /mnt\n[root@100ask:~]# cd /mnt\n</code></pre></p>"},{"location":"03-DeviceDriver/#_5","title":"\u6b65\u9aa4\u4e94","text":"<p>\u7f16\u8bd1\u5185\u6838\u9a71\u52a8\u6a21\u5757 \u5e76\u4e0a\u4f20\u5f00\u53d1\u677f\u6267\u884c\u3002\u60f3\u8981\u5f00\u53d1\u4e00\u4e2a\u786c\u4ef6\u914d\u5957\u7684\u8bbe\u5907\u9a71\u52a8\u53ca\u6d4b\u8bd5\u7a0b\u5e8f\uff0c\u6211\u4eec\u9700\u8981\u5148\u5f97\u5230\u5f00\u53d1\u677f\u914d\u5957\u7684\u5185\u6838\u6e90\u7801\u5e76\u4f7f\u7528\u914d\u5957\u7684\u5de5\u5177\u94fe\u8fdb\u884c\u7f16\u8bd1\uff0c\u7f16\u8bd1\u5b8c\u6210\u540e\uff0c\u624d\u53ef\u4ee5\u5f00\u59cb\u7f16\u8bd1\u5f00\u53d1\u677f\u914d\u5957\u7684\u5185\u6838\u6a21\u5757\uff0c\u6700\u540e\u4e0a\u4f20\u5230\u5f00\u53d1\u677f\u5185\uff0c\u8fd0\u884c\u3002 </p> <p>1.\u7f16\u8bd1\u5185\u6838\u6e90\u7801 \u00a0\u00a0 \u5185\u6838\u6e90\u7801 \u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u94fe \u6211\u4eec\u5df2\u7ecf\u63d0\u524d\u5e2e\u60a8\u5b58\u653e\u5728 \u865a\u62df\u673a\u955c\u50cf\u91cc\uff0c\u60a8\u53ea\u9700\u8981\u5728\u8fd9\u4e00\u6b65 \u8fdb\u5165\u5185\u6838\u6e90\u7801 \u7f16\u8bd1\u4e00\u4e0b\u5185\u6838\u5c31\u53ef\u4ee5\u3002 \u9f20\u6807\u5728\u684c\u9762 \u53f3\u952e \u6253\u5f00\u4e00\u4e2a Terminal \u7ec8\u7aef\uff0ccd \u8fdb\u5165\u5230100ask_imx6ull-sdk/Linux-4.9.88 \u76ee\u5f55\u4e0b \u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff0c\u7b49\u5f85\u5185\u6838\u7f16\u8bd1\u5b8c\u6210\u5373\u53ef\u3002</p> <p></p> <p></p> <p><pre><code>book@ubuntu1804:~$ cd 100ask_imx6ull-sdk/Linux-4.9.88/\nbook@ubuntu1804:~/100ask_imx6ull-sdk/Linux-4.9.88$ make 100ask_imx6ull_defconfig\nbook@ubuntu1804:~/100ask_imx6ull-sdk/Linux-4.9.88$ make zImage -j8\n</code></pre> \u00a0\u00a0 \u7f16\u8bd1\u5b8c\u6210\u540e\uff0c\u5c31\u53ef\u4ee5\u8fdb\u884c\u4e0b\u4e00\u6b65\u5f00\u59cb\u5185\u6838\u9a71\u52a8\u5f00\u53d1\u4e86\u3002</p> <p>2.\u83b7\u53d6\u5185\u6838\u6a21\u5757\u793a\u4f8b \u00a0\u00a0 \u8fd9\u90e8\u5206\u4e3a\u6f14\u793a\u64cd\u4f5c\uff0c\u6211\u4eec\u4f7f\u7528 \u4e00\u4e2a hello word \u9a71\u52a8\u793a\u4f8b\u7a0b\u5e8f\u4f5c\u4e3a\u6f14\u793a\uff0c\u5176\u4e2d\u7a0b\u5e8f\u5b58\u653e\u5728 https://github.com/100askTeam/Stage3-DeviceDriver/tree/master/IMX6ULL/hello_drv \u76ee\u5f55\u5185\uff0c\u6211\u4eec\u9700\u8981\u5728ubuntu\u4e0b\u83b7\u53d6\u6b64\u5de5\u7a0b\uff0c\u7136\u540e\u8fdb\u884c\u7f16\u8bd1\uff0c \u00a0\u00a0\u9996\u5148clone\u6b64\u4ed3\u5e93\uff0cclone\u4e0b\u6765\u540e\uff0c\u8fdb\u5165\u5230Stage3-DeviceDriver/IMX6ULL/hello_drv/ \u76ee\u5f55\u5185\uff0c\u53ef\u4ee5\u770b\u5230\u6211\u4eec\u63d0\u524d\u51c6\u5907\u597d\u7684\u6a21\u5757\u793a\u4f8b\uff0c\u56e0\u4e3a\u5185\u6838\u76ee\u5f55 \u5de5\u5177\u94fe\u90fd\u63d0\u524d\u914d\u597d\u4e86\uff0c\u5e76\u4e14\u662f\u4e00\u81f4\u7684\uff0c\u53ef\u4ee5\u76f4\u63a5\u6267\u884c make\u547d\u4ee4\u8fdb\u884c\u7f16\u8bd1,\u53c2\u8003\u4e0b\u8ff0\u547d\u4ee4\u3002</p> <p><pre><code>book@ubuntu1804:~$ git clone https://github.com/100askTeam/Stage3-DeviceDriver.git\nCloning into 'Stage3-DeviceDriver'...\nremote: Enumerating objects: 417, done.\nremote: Counting objects: 100% (121/121), done.\nremote: Compressing objects: 100% (106/106), done.\nremote: Total 417 (delta 33), reused 93 (delta 15), pack-reused 296\nReceiving objects: 100% (417/417), 58.74 MiB | 2.25 MiB/s, done.\nResolving deltas: 100% (126/126), done.\nbook@ubuntu1804:~$ cd Stage3-DeviceDriver/IMX6ULL/hello_drv/\nbook@ubuntu1804:~/Stage3-DeviceDriver/IMX6ULL/hello_drv$ ls\nhello_drv_0.jpg  hello_drv_1.jpg  hello_drv.c  hello_drv_test.c  Makefile  readme.md\nbook@ubuntu1804:~/Stage3-DeviceDriver/IMX6ULL/hello_drv$\n</code></pre> </p> <p>3.\u7f16\u8bd1\u5185\u6838\u6a21\u5757 \u00a0\u00a0\u4e0a\u4e00\u5c0f\u8282\u6211\u4eec\u5df2\u7ecfclone\u5e76\u8fdb\u5165\u4e86helloword\u9a71\u52a8\u793a\u4f8b\u6e90\u7801\uff0c\u5e76\u4e14\u5df2\u7ecf\u7f16\u8bd1\u8fc7\u5185\u6838\u6e90\u7801\uff0c\u914d\u7f6e\u597dMakefile\u91cc\u9762\u7684kernel\u6240\u5728\u8def\u5f84 \u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u94fe\u7b49\u6240\u6709\u5fc5\u8981\u73af\u5883\uff0c\u63a5\u4e0b\u6765\u53ea\u9700\u8981\u5728\u5185\u6838\u6e90\u7801\u76ee\u5f55\u4e0b\u76f4\u63a5\u6267\u884c <code>make</code>\u547d\u4ee4\u5f00\u59cb\u7f16\u8bd1\u3002  <pre><code>book@ubuntu1804:~/Stage3-DeviceDriver/IMX6ULL/hello_drv$ make make -C /home/book/100ask_imx6ull-sdk/Linux-4.9.88 M=`pwd` modules make[1]: Entering directory '/home/book/100ask_imx6ull-sdk/Linux-4.9.88'\nCC [M]  /home/book/Stage3-DeviceDriver/IMX6ULL/hello_drv/hello_drv.o\n  Building modules, stage 2.\n  MODPOST 1 modules\n  CC      /home/book/Stage3-DeviceDriver/IMX6ULL/hello_drv/hello_drv.mod.o\n  LD [M]  /home/book/Stage3-DeviceDriver/IMX6ULL/hello_drv/hello_drv.ko\nmake[1]: Leaving directory '/home/book/100ask_imx6ull-sdk/Linux-4.9.88'\narm-buildroot-linux-gnueabihf-gcc -o hello_drv_test hello_drv_test.c book@ubuntu1804:~/Stage3-DeviceDriver/IMX6ULL/hello_drv$ ls\nhello_drv_0.jpg  hello_drv.ko     hello_drv.o       Makefile        readme.md\nhello_drv_1.jpg  hello_drv.mod.c  hello_drv_test    modules.order\nhello_drv.c      hello_drv.mod.o  hello_drv_test.c  Module.symvers\nbook@ubuntu1804:~/Stage3-DeviceDriver/IMX6ULL/hello_drv$ </code></pre> \u00a0\u00a0\u7f16\u8bd1\u5b8c\u6210\u540e\uff0c\u8f93\u5165\u4e86\u4e00\u4e2a hello_drv.ko helldrv\u9a71\u52a8\u6a21\u5757\u6587\u4ef6\uff0c\u4ee5\u53ca hello_drv_test \u9a71\u52a8\u6d4b\u8bd5\u793a\u4f8b\uff0c\u63a5\u4e0b\u6765\u9700\u8981\u628a\u8fd9\u4e24\u4e2a\u7a0b\u5e8f\u76f4\u63a5\u4e0a\u4f20\u81f3\u5f00\u53d1\u677f\u5185\uff0c\u7136\u540e\u6267\u884c\u3002</p> <p>4.\u4e0a\u4f20\u81f3\u5f00\u53d1\u677f\u5e76\u6267\u884c \u00a0\u00a0\u4e0a\u9762 \u6b65\u9aa4\u56db \u6211\u4eec\u4ecb\u7ecd\u4e86\u4e24\u79cd\u4f20\u8f93\u6587\u4ef6\u5230\u5f00\u53d1\u677f\u7684\u65b9\u5f0f\uff0c\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528\u5f00\u53d1\u677f\u6302\u8f7d ubuntu nfs\u7f51\u7edc\u6587\u4ef6\u7cfb\u7edf\u65b9\u5f0f\u4f20\u8f93\u6587\u4ef6\u3002 \u00a0\u00a0\u9996\u5148\u786e\u4fdd \u4e0a\u8ff0 \u6b65\u9aa4\u4e09 \u5df2\u7ecf\u6ca1\u6709\u95ee\u9898\uff0c\u63a5\u4e0b\u6765 \u5c06 \u6211\u4eec\u7f16\u8bd1\u751f\u6210\u7684\u9a71\u52a8\u7a0b\u5e8f <code>hello_drv.ko</code> <code>hello_drv_test</code>\u62f7\u8d1d\u5230 \u914d\u7f6e\u597d\u7684nfs\u76ee\u5f55\u4e0b,\u5728 hell_drv\u76ee\u5f55\u4e0b\u6267\u884c cp hello_drv.ko hello_drv_test ~/nfs_rootfs/ \u76ee\u5f55\u5373\u53ef\u3002 <pre><code>book@ubuntu1804:~/Stage3-DeviceDriver/IMX6ULL/hello_drv$ cp hello_drv.ko hello_drv_test ~/nfs_rootfs/\nbook@ubuntu1804:~/Stage3-DeviceDriver/IMX6ULL/hello_drv$ ls ~/nfs_rootfs/\nhello_drv.ko  hello_drv_test\n</code></pre> </p> <p>\u00a0\u00a0\u4e4b\u540e\u5207\u6362\u5230 IMX6ULL-Pro\u5f00\u53d1\u677f\u7ec8\u7aef\u754c\u9762\uff0c\u767b\u9646\u5f00\u53d1\u677f\u7cfb\u7edf\uff0c\u786e\u4fdd\u53ef\u4ee5\u548cubuntu\u7f51\u7edc\u4e92\u901a\uff0c\u7136\u540e\u6267\u884c <code>mount -t nfs -o nolock 192.168.5.11:/home/book/nfs_rootfs /mnt</code> \u547d\u4ee4\uff0c\u5728\u5f00\u53d1\u677f\u4e0a\u6302\u8f7dubuntu nfs\u6587\u4ef6\u7cfb\u7edf\uff0c\u6302\u8f7d\u6210\u529f\u540e\uff0c\u53ef\u4ee5\u76f4\u63a5\u8fdb\u5165\u5230 \u5f00\u53d1\u677f\u7684 /mnt\u76ee\u5f55\u4e0b\uff0c\u6267\u884c\u5b89\u88c5\u9a71\u52a8\u6a21\u5757\u547d\u4ee4 <code>insmod hello_drv.ko</code> \u547d\u4ee4\uff0c\u6700\u540e\u6267\u884c\u6d4b\u8bd5\u7a0b\u5e8f <code>hello_drv_test</code>\u6765\u6d4b\u8bd5\u9a71\u52a8\u3002</p> <pre><code>[root@100ask:~]# ping 192.168.5.11\nPING 192.168.5.11 (192.168.5.11): 56 data bytes\n64 bytes from 192.168.5.11: seq=0 ttl=64 time=4.277 ms\n^C\n--- 192.168.5.11 ping statistics ---\n1 packets transmitted, 1 packets received, 0% packet loss\nround-trip min/avg/max = 4.277/4.277/4.277 ms\n[root@100ask:~]# mount -t nfs -o nolock 192.168.5.11:/home/book/nfs_rootfs /mnt\n[root@100ask:~]# cd /mnt/\n[root@100ask:/mnt]# ls\nhello_drv.ko  hello_drv_test\n[root@100ask:/mnt]# insmod hello_drv.ko\n[10604.815020] hello_drv: loading out-of-tree module taints kernel.\n[root@100ask:/mnt]# ls /dev/hello\n/dev/hello\n[root@100ask:/mnt]# chmod +x hello_drv_test\n[root@100ask:/mnt]# ./hello_drv_test\nUsage: ./hello_drv_test -w &lt;string&gt;\n       ./hello_drv_test -r\n[root@100ask:/mnt]# ./hello_drv_test -w 100ask\n[root@100ask:/mnt]# ./hello_drv_test -r\nAPP read : 100ask\n[root@100ask:/mnt]#\n</code></pre> <p></p> <p>\u81f3\u6b64\uff0c\u6211\u4eec\u5c31\u5b8c\u6574\u7684\u57286ULL\u4e0a\u8fd0\u884c\u4e86\u4e00\u4e2a \u9a71\u52a8\u6a21\u5757 \u4ee5\u53ca\u6d4b\u8bd5\u7a0b\u5e8f\u4e86\uff0c\u66f4\u591a\u8bbe\u5907\u9a71\u52a8\u6a21\u5757\u7684\u5f00\u53d1\u793a\u4f8b \u8bf7\u5927\u5bb6\u8bbf\u95ee \u8bbe\u5907\u9a71\u52a8\u5f00\u53d1\u7ae0\u8282\uff0c6ULLPro \u524d\u7f00\u7684\u6587\u7ae0\uff0c\u91cc\u9762\u6709\u975e\u5e38\u4e30\u5bcc\u7684\u793a\u4f8b \u7ed9\u5230\u5927\u5bb6\u3002</p>"},{"location":"03-DeviceDriver/#stm32mp157-pro","title":"STM32MP157-Pro\u5f00\u53d1\u6b65\u9aa4","text":"<p>\u7f16\u5199\u4e2d........</p>"},{"location":"03-DeviceDriver/#_6","title":"\u652f\u6301\u7684\u8bbe\u5907\u9a71\u52a8\u793a\u4f8b","text":"<p>\u7eff\u8272\u221a\u53f7\u8868\u793a\u5df2\u5b8c\u6210\uff0c\u7070\u8272 \u221a \u8868\u793a\u672a\u5b8c\u6210\u3002</p>"},{"location":"03-DeviceDriver/#nxp","title":"NXP\u5f00\u53d1\u677f","text":"<ul> <li> IMX6ULL-Pro\u5f00\u53d1\u677f<ul> <li> GPIO-LED\u706f\u793a\u4f8b\u9a71\u52a8</li> <li> GPIO-Key\u6309\u952e\u5b9e\u9a8c\u793a\u4f8b</li> <li> GPIO-sr501\u4eba\u4f53\u7ea2\u5916\u4f20\u611f\u5668</li> <li> GPIO-SR04\u8d85\u58f0\u6ce2\u6d4b\u8ddd\u6a21\u5757</li> <li> GPIO-DS18B20\u6e29\u5ea6\u6a21\u5757</li> <li> GPIO-DHT11\u6e29\u6e7f\u5ea6\u6a21\u5757</li> <li> GPIO-IRDA\u7ea2\u5916\u9065\u63a7\u6a21\u5757</li> <li> I2C-AT24C02\u5b58\u50a8\u6a21\u5757</li> <li> SPI-OLED\u5c4f\u6a21\u5757</li> </ul> </li> </ul>"},{"location":"03-DeviceDriver/#st","title":"ST\u5f00\u53d1\u677f","text":"<ul> <li> STM32MP157-Pro\u5f00\u53d1\u677f<ul> <li> GPIO-LED\u706f\u793a\u4f8b\u9a71\u52a8</li> <li> GPIO-Key\u6309\u952e\u5b9e\u9a8c\u793a\u4f8b</li> <li> GPIO-sr501\u4eba\u4f53\u7ea2\u5916\u4f20\u611f\u5668</li> <li> GPIO-SR04\u8d85\u58f0\u6ce2\u6d4b\u8ddd\u6a21\u5757</li> <li> GPIO-DS18B20\u6e29\u5ea6\u6a21\u5757</li> <li> GPIO-DHT11\u6e29\u6e7f\u5ea6\u6a21\u5757</li> <li> GPIO-IRDA\u7ea2\u5916\u9065\u63a7\u6a21\u5757</li> <li> I2C-AT24C02\u5b58\u50a8\u6a21\u5757</li> <li> SPI-OLED\u5c4f\u6a21\u5757</li> </ul> </li> </ul>"},{"location":"03-DeviceDriver/#_7","title":"\u5982\u4f55\u53c2\u4e0e\u5171\u4eab\uff1f","text":"<ul> <li>Linux\u9a71\u52a8\uff1ahttps://github.com/100askTeam/Stage3-DeviceDriver</li> <li>\u4ea4\u6d41\u793e\u533a\uff1ahttps://forums.100ask.net/c/elinuxdev/23</li> </ul>"},{"location":"04-System/","title":"Linux\u7cfb\u7edf\u5f00\u53d1\u7b80\u8ff0(Introduction)","text":""},{"location":"04-System/#_1","title":"\u652f\u6301\u7684\u5f00\u53d1\u677f","text":"<p>     \u6ce8\u610f\uff1a\u6574\u4e2a\u7f51\u7ad9\u91cc\u9762\u6bcf\u4e2a\u677f\u5b50\u5bf9\u5e94\u7684\u865a\u62df\u673a\u90fd\u662f\u540c\u4e00\u4e2a\uff0c\u53ea\u662f\u5728\u4e0d\u540c\u7684\u9875\u9762\u90fd\u6709\u4ecb\u7ecd\uff0c\u5982\u679c\u60a8\u5728\u5176\u5b83\u90e8\u5206\u9875\u9762\u4e0b\u8f7d\u4e86\u865a\u62df\u673a\u7cfb\u7edf\u955c\u50cf\uff0c\u5219\u65e0\u9700\u518d\u8fd9\u4e2a\u9875\u9762\u83b7\u53d6\uff0c\u76f4\u63a5\u8df3\u8fc7 \u6b64\u6b65\u9aa4\u5373\u53ef\u3002 </p>"},{"location":"04-System/#nxp","title":"NXP\u5f00\u53d1\u677f","text":""},{"location":"04-System/#st","title":"ST\u5f00\u53d1\u677f","text":""},{"location":"04-System/#_2","title":"\u5168\u5fd7\u5f00\u53d1\u677f","text":""},{"location":"04-System/#_3","title":"\u5982\u4f55\u53c2\u4e0e\u5171\u4eab\uff1f","text":"<ul> <li>Linux\u7cfb\u7edf\u5f00\u53d1\uff1ahttps://github.com/100askTeam/Stage4-System</li> <li>\u4ea4\u6d41\u793e\u533a\uff1ahttps://forums.100ask.net/c/elinuxdev/23</li> </ul>"},{"location":"About/","title":"\u5173\u4e8e\u6211\u4eec","text":"<p>\u6211\u4eec\u662f\u4e00\u5bb6\u4e13\u6ce8\u4e8e\u5d4c\u5165\u5f0fLinux\u6559\u80b2\u57f9\u8bad\u5341\u4f59\u5e74\u516c\u53f8\uff0c\u4e3b\u8bb2\u5e08\u97e6\u4e1c\u5c71\u8001\u5e08\u64c5\u957fARM\u7cfb\u5217\u65b9\u9762\u7684\u786c\u4ef6\u539f\u7406\u56fe\u8bbe\u8ba1\uff0c\u7cbe\u901aARM MIPS Blackfin\u7b49\u67b6\u6784\u5904\u7406\u5668\u7684Linux\u5e95\u5c42\u7cfb\u7edf\u5f00\u53d1\u3002</p> <ul> <li>\u97e6\u4e1c\u5c71-\u5d4c\u5165\u5f0f\u4e13\u5bb6 | \u534e\u4e3a\u8ba4\u8bc1\u9996\u6279\u9e3f\u8499\u7cfb\u7edf\u8bfe\u7a0b\u5f00\u8005</li> <li>\u5173\u6ce8\u516c\u4f17\u53f7\uff1a\u767e\u95ee\u79d1\u6280\uff08\u6700\u65b0\u8d44\u8baf\uff09</li> <li>\u97e6\u4e1c\u5c71\u5b98\u65b9\u6dd8\u5b9d\u5e97\u94fa\uff1a100ask.taobao.com</li> <li>\u97e6\u4e1c\u5c71\u5b98\u65b9\u5728\u7ebf\u5b66\u4e60\u5e73\u53f0\uff1a100ask.org</li> <li>\u5fae\u4fe1\u6280\u672f\u4ea4\u6d41\u7fa4\uff1abaiwenwang1\uff08\u52a0\u5ba2\u670d\u62c9\u7fa4\uff09</li> <li>QQ\u6280\u672f\u4ea4\u6d41\u7fa4\uff1a2797826447\uff08\u52a0\u5ba2\u670d\u62c9\u7fa4\uff09</li> </ul>"},{"location":"Stage1-LinuxCprogrammers/CFileinputoutput/01-Introduction/","title":"C\u57fa\u7840","text":"<ul> <li>\u95ee\u9898\u53cd\u9988\u4ea4\u6d41\u533a https://github.com/100askTeam/Stage1_D1s-Applications/discussions/</li> </ul>"},{"location":"Stage1-LinuxCprogrammers/CFileinputoutput/01-Introduction/#_1","title":"\u7b80\u8ff0","text":""},{"location":"Stage1-LinuxCprogrammers/CFileinputoutput/01-Introduction/#_2","title":"\u7b80\u8ff0\u7b80\u8ff0","text":""},{"location":"Stage1-LinuxCprogrammers/CFileinputoutput/01-Introduction/#_3","title":"\u7b80\u8ff0\u7b80\u8ff0","text":""},{"location":"Stage1-LinuxCprogrammers/CFileinputoutput/01-Introduction/#_4","title":"\u7b80\u8ff0\u7b80\u8ff0","text":""},{"location":"Stage1-LinuxCprogrammers/CFileinputoutput/01-Introduction/#_5","title":"\u7b80\u8ff0\u7b80\u8ff0","text":""},{"location":"Stage1-LinuxCprogrammers/CFileinputoutput/01-Introduction/#_6","title":"\u7b80\u8ff0\u7b80\u8ff0","text":""},{"location":"Stage1-LinuxCprogrammers/CFileinputoutput/01-Introduction/#_7","title":"\u7b80\u8ff0\u7b80\u8ff0","text":""},{"location":"Stage1-LinuxCprogrammers/CFileinputoutput/01-Introduction/#_8","title":"\u7b80\u8ff0\u7b80\u8ff0","text":""},{"location":"Stage1-LinuxCprogrammers/CFileinputoutput/01-Introduction/#_9","title":"\u7b80\u8ff0\u7b80\u8ff0","text":""},{"location":"Stage1-LinuxCprogrammers/CFileinputoutput/01-Introduction/#_10","title":"\u7b80\u8ff0\u7b80\u8ff0","text":""},{"location":"Stage1-LinuxCprogrammers/CFileinputoutput/01-Introduction/#_11","title":"\u7b80\u8ff0\u7b80\u8ff0","text":""},{"location":"Stage1-LinuxCprogrammers/GCCManual/01-Introduction/","title":"01 Introduction","text":"<ul> <li>\u95ee\u9898\u53cd\u9988\u4ea4\u6d41\u533a https://github.com/100askTeam/Stage1_D1s-Applications/discussions/</li> </ul>"},{"location":"Stage1-LinuxCprogrammers/GCCManual/01-Introduction/#_1","title":"\u7b80\u8ff0","text":""},{"location":"Stage1-LinuxCprogrammers/GCCManual/01-Introduction/#_2","title":"\u7b80\u8ff0\u7b80\u8ff0","text":""},{"location":"Stage1-LinuxCprogrammers/GCCManual/01-Introduction/#_3","title":"\u7b80\u8ff0\u7b80\u8ff0","text":""},{"location":"Stage1-LinuxCprogrammers/GCCManual/01-Introduction/#_4","title":"\u7b80\u8ff0\u7b80\u8ff0","text":""},{"location":"Stage1-LinuxCprogrammers/GCCManual/01-Introduction/#_5","title":"\u7b80\u8ff0\u7b80\u8ff0","text":""},{"location":"Stage1-LinuxCprogrammers/GCCManual/01-Introduction/#_6","title":"\u7b80\u8ff0\u7b80\u8ff0","text":""},{"location":"Stage1-LinuxCprogrammers/GCCManual/01-Introduction/#_7","title":"\u7b80\u8ff0\u7b80\u8ff0","text":""},{"location":"Stage1-LinuxCprogrammers/GCCManual/01-Introduction/#_8","title":"\u7b80\u8ff0\u7b80\u8ff0","text":""},{"location":"Stage1-LinuxCprogrammers/GCCManual/01-Introduction/#_9","title":"\u7b80\u8ff0\u7b80\u8ff0","text":""},{"location":"Stage1-LinuxCprogrammers/GCCManual/01-Introduction/#_10","title":"\u7b80\u8ff0\u7b80\u8ff0","text":""},{"location":"Stage1-LinuxCprogrammers/GCCManual/01-Introduction/#_11","title":"\u7b80\u8ff0\u7b80\u8ff0","text":""},{"location":"Stage1-LinuxCprogrammers/GNU/01-Introduction/","title":"OBJDUMP","text":"<ul> <li>\u95ee\u9898\u53cd\u9988\u4ea4\u6d41\u533a https://github.com/100askTeam/Stage1_D1s-Applications/discussions/</li> </ul>"},{"location":"Stage1-LinuxCprogrammers/GNU/01-Introduction/#_1","title":"\u7b80\u8ff0","text":""},{"location":"Stage1-LinuxCprogrammers/GNU/01-Introduction/#_2","title":"\u7b80\u8ff0\u7b80\u8ff0","text":""},{"location":"Stage1-LinuxCprogrammers/GNU/01-Introduction/#_3","title":"\u7b80\u8ff0\u7b80\u8ff0","text":""},{"location":"Stage1-LinuxCprogrammers/GNU/01-Introduction/#_4","title":"\u7b80\u8ff0\u7b80\u8ff0","text":""},{"location":"Stage1-LinuxCprogrammers/GNU/01-Introduction/#_5","title":"\u7b80\u8ff0\u7b80\u8ff0","text":""},{"location":"Stage1-LinuxCprogrammers/GNU/01-Introduction/#_6","title":"\u7b80\u8ff0\u7b80\u8ff0","text":""},{"location":"Stage1-LinuxCprogrammers/GNU/01-Introduction/#_7","title":"\u7b80\u8ff0\u7b80\u8ff0","text":""},{"location":"Stage1-LinuxCprogrammers/GNU/01-Introduction/#_8","title":"\u7b80\u8ff0\u7b80\u8ff0","text":""},{"location":"Stage1-LinuxCprogrammers/GNU/01-Introduction/#_9","title":"\u7b80\u8ff0\u7b80\u8ff0","text":""},{"location":"Stage1-LinuxCprogrammers/GNU/01-Introduction/#_10","title":"\u7b80\u8ff0\u7b80\u8ff0","text":""},{"location":"Stage1-LinuxCprogrammers/GNU/01-Introduction/#_11","title":"\u7b80\u8ff0\u7b80\u8ff0","text":""},{"location":"Stage1-LinuxCprogrammers/LinuxShell/DiskOperation/","title":"\u78c1\u76d8\u64cd\u4f5c","text":""},{"location":"Stage1-LinuxCprogrammers/LinuxShell/DiskOperation/#fdisk","title":"fdisk\u547d\u4ee4","text":"<p>fidsk\u662f\u4e00\u4e2a\u7528\u6765\u521b\u5efa\u548c\u7ef4\u62a4\u78c1\u76d8\u8bbe\u5907\u5206\u533a\u7684\u4e00\u4e2a\u5b9e\u7528\u5de5\u5177\u3002</p> <pre><code>[ubuntu@book:~]$ fdisk -l   //\u5217\u51fa\u5f53\u524d\u7cfb\u7edf\u6240\u6709\u7684\u78c1\u76d8\u8bbe\u5907\n[ubuntu@book:~]$ fdisk /dev/sdc //\u64cd\u4f5c\u8bbe\u5907\u8282\u70b9\u4e3a /dev/sdc\u7684\u4e00\u4e2a\u8bbe\u5907\u3002\n</code></pre> <ul> <li>p : \u663e\u793a\u6240\u6709\u7684\u5206\u533a\u3002</li> <li>d: \u5220\u9664\u5206\u533a\u3002</li> <li>n: \u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u5206\u533a\u3002</li> <li>t : \u66f4\u6539\u5206\u533a\u7c7b\u578b\u3002</li> <li>w: \u4fdd\u5b58\u4fee\u6539\u5e76\u9000\u51fa\u3002</li> <li>m: \u663e\u793a\u5e2e\u52a9\u4fe1\u606f\u3002</li> </ul>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/DiskOperation/#gparted","title":"gparted","text":"<p>\u56fe\u5f62\u5316\u5206\u533a\u64cd\u4f5c\u5de5\u5177\u3002</p> <pre><code>[ubuntu@book:~]$ sudo apt install gparted\n</code></pre> <p></p>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/DiskOperation/#mkfsfat","title":"mkfs.fat","text":"<p>\u683c\u5f0f\u5316\u5206\u533a\u4e3a fat32\u7c7b\u578b</p> <pre><code>[ubuntu@book:~]$ sudo mkfs.fat /dev/sdc1\n</code></pre>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/DiskOperation/#mkfsext234","title":"mkfs.ext\u2154/4","text":"<p>\u683c\u5f0f\u5316\u6587\u4ef6\u7cfb\u7edf\u7c7b\u578b\u4e3a Linux EXT\u7c7b\u578b\u3002</p> <pre><code>[ubuntu@book:~]$ sudo mkfs.ext4 /dev/sdc2\n</code></pre>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/DiskOperation/#mount","title":"mount\u547d\u4ee4","text":"<p>\u6302\u8f7d\u7cfb\u7edf\u5916\u7684\u78c1\u76d8\u5206\u533a\u6216\u8005\u76ee\u5f55\u7b49\u3002</p> <pre><code>[ubuntu@book:~]$ sudo mount -t vfat /dev/sdc1 /mnt \n[ubuntu@book:~]$ sudo umont /mnt \n[ubuntu@book:~]$ sudo umont /dev/sdc1\n\n[ubuntu@book:~]$ sudo mount -t ext4 /dev/sdc2 /mnt \n[ubuntu@book:~]$ sudo umont /mnt \n[ubuntu@book:~]$ sudo umont /dev/sdc2\n</code></pre>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/DiskOperation/#df","title":"df\u547d\u4ee4","text":"<p>\u663e\u793aLinux\u4e0a\u6587\u4ef6\u7cfb\u7edf\u78c1\u76d8\u4f7f\u7528\u7684\u5360\u7528\u60c5\u51b5\u3002</p> <pre><code>[ubuntu@book:~]$ df  //\u663e\u793a\u6587\u4ef6\u7cfb\u7edf\u7684\u78c1\u76d8\u4f7f\u7528\u60c5\u51b5\u3002\n[ubuntu@book:~]$ df -h  //\u4ee5\u6613\u8bfb\u7684\u5f62\u5f0f\u5c55\u793a\u8f93\u51fa\u78c1\u76d8\u7684\u4f7f\u7528\u60c5\u51b5\n</code></pre> <p></p>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/DiskOperation/#du","title":"du\u547d\u4ee4","text":"<p>\u7528\u4e8e\u663e\u793a\u76ee\u5f55\u6216\u6587\u4ef6\u5927\u5c0f\u3002</p> <pre><code>[ubuntu@book:~]$ du         //\u663e\u793a\u5f53\u524d\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u6587\u4ef6\u53ca\u76ee\u5f55\u5927\u5c0f\u3002\n[ubuntu@book:~]$ du -h   //\u4ee5\u6bd4\u8f83\u76f4\u89c2\u7684\u65b9\u5f0f\u663e\u793a\u6240\u6709\u6587\u4ef6\u53ca\u76ee\u5f55\u5927\u5c0f\u3002\n[ubuntu@book:~]$ du dir -h  //\u4ee5\u6bd4\u8f83\u76f4\u89c2\u65b9\u5f0f\u663e\u793adir\u76ee\u5f55\u5927\u5c0f\u3002\n[ubuntu@book:~]$ du  file1  //\u663e\u793afile\u6587\u4ef6\u5927\u5c0f\u3002\n[ubuntu@book:~]$ du  dir -h --max-depth=1 //\u4ee5\u6bd4\u8f83\u76f4\u89c2\u7684\u65b9\u5f0f\u663e\u793adir\u76ee\u5f55\u5e76\u53ea\u663e\u793a\u76ee\u5f55\u6df1\u5ea6\u4e3a1\u7ea7\u3002\n</code></pre>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/DiskOperation/#dd","title":"dd\u547d\u4ee4","text":"<p>dd\u547d\u4ee4\u7528\u4e8e\u6570\u636e\u7684\u8bfb\u53d6\u8f6c\u6362\u7b49\u64cd\u4f5c\u3002</p> <pre><code>[ubuntu@book:~]$ dd --help   //\u67e5\u770bdd\u5e2e\u52a9\u547d\u4ee4\u3002\n[ubuntu@book:~]$ dd if=/dev/zero of=dd.img count=1024 bs=1M //\u751f\u4ea7\u4e00\u4e2a1G\u5927\u5c0f\u7684dd.img\u955c\u50cf\n[ubuntu@book:~]$ mkfs.ext4 dd.img  //\u683c\u5f0f\u5316\u4e3a ext4\u6587\u4ef6\u7cfb\u7edf\u7c7b\u578b\u3002\n[ubuntu@book:~]$ sudo mount -t ext4 dd.img /mnt  //\u6302\u8f7d\u5230 /mnt\u76ee\u5f55\u4e0b\uff0c\u4e4b\u540e\u8fdb\u884c\u64cd\u4f5c\u3002\n[ubuntu@book:~]$ sudo umount /mnt  //\u64cd\u4f5c\u5b8c\u6210\u540e\u5378\u8f7d\u8be5\u6302\u8f7d\u7684\u955c\u50cf\u3002\n</code></pre>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/DocumentEditing/","title":"\u6587\u6863\u7f16\u8f91\u7c7b\u547d\u4ee4","text":""},{"location":"Stage1-LinuxCprogrammers/LinuxShell/DocumentEditing/#cat","title":"cat \u547d\u4ee4","text":"<p>\u5728\u7ec8\u7aef\u4e0a\u663e\u793a\u6587\u4ef6\u5185\u5bb9</p> <pre><code>[ubuntu@book:~]$ cat file   //\u67e5\u770bfile\u6587\u6863\u5185\u5bb9\n[ubuntu@book:~]$ cat 11111 &gt; file  //\u91cd\u5b9a\u541111111 \u5230file\u6587\u6863\u5185\uff0c\u4e5f\u53ef\u4ee5\u7406\u89e3\u5c06 1111 &gt; \u5199\u5165\u5230 file\u91cc\u9762\u3002\n[ubuntu@book:~]$ cat /proc/cpuinfo &gt; cpuinfo.txt //\u5c06cpuinfo\u4fe1\u606f\u5199\u5165\u5230 cpuinfo.txt\u6587\u6863\u5185\u3002\n[ubuntu@book:~]$ cat -n  file   //\u663e\u793afile\u6587\u672c\u91cc\u9762\u7684\u884c\u53f7\u3002\n[ubuntu@book:~]$ cat &gt; helloword.txt &lt;&lt;EOF\n&gt;Hello\n&gt;word\n&gt;1111\n&gt;EOF\n[ubuntu@book:~]$ cat helloword.txt  //\u5e38\u7528\u4e8e\u811a\u672c\u5904\u7406\u7b49\u3002\nHello\nword\n1111\n</code></pre>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/DocumentEditing/#echo","title":"echo\u547d\u4ee4","text":"<p>\u5728\u7ec8\u7aef\u4e0a\u8f93\u51fa\u5b57\u7b26\u4e32\uff0c\u6216\u8005\u63d0\u793ashell\u7684\u503c</p> <pre><code>[ubuntu@book:~]$ echo \"hello word!\" //\u5728\u7ec8\u7aef\u4e0a\u8f93\u51fa helloword \u5b57\u7b26\u4e32\n[ubuntu@book:~]$ echo `date` //\u6267\u884cdate\u547d\u4ee4\uff0c\u8fdb\u884c\u8f93\u51fa\u663e\u793a\u3002\n[ubuntu@book:~]$ echo -e \"Hello\\n Word!\" //\u8f93\u51fa\u7684\u5b57\u7b26\u4e32 Hell\u6362\u884c\u3002\n[ubuntu@book:~]$ echo -e \"\\033[31m Hello word \\033[0m\" //\u8f93\u51fa\u7ea2\u8272\u5b57\u4f53\u7684Hello word.\n</code></pre>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/DocumentEditing/#gedit","title":"gedit \u547d\u4ee4","text":"<p>\u4e00\u4e2a\u6587\u672c\u7f16\u8f91\u5668\uff0c\u7c7b\u4f3c\u4e8eVIM</p> <pre><code>[ubuntu@book:~]$  gedit file1  //gedit\u547d\u4ee4\u540e\u9762\u52a0 \u6587\u4ef6\u540d\uff0c\u65b0\u6587\u4ef6\u6216\u8005\u5df2\u7ecf\u5b58\u5728\u7684\u90fd\u53ef\u4ee5\u3002\n</code></pre>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/DocumentEditing/#rm","title":"rm\u547d\u4ee4","text":"<p>rm --help\u67e5\u770b\u8be6\u7ec6\u5b98\u65b9\u8bf4\u660e\uff0c\u4e3b\u8981\u7528\u9014\u662f\u5220\u9664\u6307\u5b9a\u7684\u6587\u4ef6\u6216\u8005\u76ee\u5f55\u3002</p> <pre><code>[ubuntu@book:~]$ rm file    //\u5220\u9664\u4e00\u4e2a\u5df2\u7ecf\u5b58\u5728\u7684\u6587\u4ef6\u3002\n[ubuntu@book:~]$ rm -r dir  //\u5220\u9664\u4e00\u4e2a\u76ee\u5f55\u3002\n[ubuntu@book:~]$ rm -v file  //\u663e\u793a\u5220\u9664\u6587\u4ef6\u56fd\u4ea7\u7684\u8be6\u7ec6\u4fe1\u606f\u3002\n[ubuntu@book:~]$ rm -rv dir  //\u663e\u793a\u5220\u9664\u6587\u4ef6\u5939\u7684\u8be6\u7ec6\u8f93\u51fa\u4fe1\u606f\u3002\n[ubuntu@book:~]$ rm -d dir    //\u5220\u9664\u7a7a\u76ee\u5f55\u3002\n[ubuntu@book:~]$ rm -i file  //\u5220\u9664\u524d\u786e\u8ba4\uff0c\u9ed8\u8ba4 y \u8868\u793a\u786e\u8ba4\uff0c\u5176\u5b83\u5b57\u7b26\u8868\u793a\u4e0d\u786e\u8ba4\u3002\n</code></pre>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/DocumentEditing/#grep","title":"grep \u547d\u4ee4","text":"<p>grep --help\u53ef\u4ee5\u67e5\u770b\u5b98\u65b9\u8be6\u7ec6\u8bf4\u660e\u3002\u4e3b\u8981\u7528\u9014\u662f\u6587\u672c\u5b57\u7b26\u4e32\u641c\u7d22\u3002</p> <pre><code>[ubuntu@book:~]$ grep \"fpu\" cpuinfo.txt //\u5728cpuinfo\u6587\u4ef6\u5185\u641c\u7d22 fpu\u5173\u952e\u5b57\u3002\n[ubuntu@book:~]$ grep \"fpu*\" cpuinfo.txt //\u5728cpuinfo\u6587\u4ef6\u5185\u641c\u7d22 fpu*\u901a\u914d\u7b26\u5173\u952e\u5b57\u3002\n[ubuntu@book:~]$ grep -n \"fpu\" cpuinfo.txt //\u5728cpuinfo\u641c\u7d22fpu\u5173\u952e\u5b57\u5e76\u663e\u793a\u5173\u952e\u6240\u5728\u884c\u3002\n[ubuntu@book:~]$ grep -nr \"fpu\" DIR //\u5728dir\u641c\u7d22\u6240\u6709\u6587\u4ef6\u5305\u542bfpu \u5173\u952e\u5b57\u5e76\u663e\u793a\u5173\u952e\u5e76\u6240\u5728\u884c\u4ee5\u53ca\u6587\u4ef6\u540d\u79f0\u3002\n[ubuntu@book:~]$ grep -nwr \"fpu\" DIR //\u5728dir\u641c\u7d22\u6240\u6709\u6587\u4ef6\u5305\u542bfpu\u5173\u952e\u5b57\u4ee5\u6574\u8bcd\u5339\u914d\u65b9\u5f0f\uff0c\u5e76\u663e\u793a\u5e76\u663e\u793a\u6240\u5728\u884c\u4ee5\u53ca\u6587\u4ef6\u540d\u79f0\u3002\n[ubuntu@book:~]$ grep -wrh \"fpu\" DIR //\u5728dir\u641c\u7d22\u6240\u6709\u6587\u4ef6\u5305\u542bfpu\u5173\u952e\u5b57\u4ee5\u6574\u8bcd\u5339\u914d\u65b9\u5f0f\uff0c\u5e76\u663e\u793a\u5e76\u663e\u793a\u6240\u5728\u884c\u4e0d\u663e\u793a\u6587\u4ef6\u540d\u79f0\u3002\n</code></pre> <ul> <li>\u6269\u5c55\uff1a\u4e5f\u53ef\u4ee5\u4f7f\u7528egrep \u547d\u4ee4\u8fdb\u884c\u641c\u7d22\u3002</li> </ul>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/DocumentEditing/#more","title":"more\u547d\u4ee4","text":"<p>\u4ee5\u4e00\u9875\u4e00\u9875\u7684\u5f62\u5f0f\u5728\u7ec8\u7aef\u5185\u663e\u793a\u6587\u6863\u5185\u5bb9\u3002</p> <pre><code>[ubuntu@book:~]$ more file.txt   //\u67e5\u770bfile.txt\u5185\u5bb9\uff0c\u4ee5\u9875\u7684\u65b9\u5f0f\u67e5\u770b\u3002\n</code></pre> <ul> <li> <p>ctrl + F \uff1a\u5411\u4e0b\u6eda\u52a8\u4e00\u5c4f\u3002 </p> </li> <li> <p>\u7a7a\u683c\u952e \uff1a\u5411\u4e0b\u6eda\u52a8\u4e00\u5c4f\u3002 </p> </li> <li> <p>ctrl + B : \u5411\u4e0a\u6eda\u52a8\u4e00\u5c4f\u3002</p> </li> <li> <p>q : \u9000\u51fa\u3002</p> </li> </ul>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/Filemanagement/","title":"\u6587\u4ef6\u7ba1\u7406\u7c7b\u547d\u4ee4","text":""},{"location":"Stage1-LinuxCprogrammers/LinuxShell/Filemanagement/#ls","title":"ls\u547d\u4ee4","text":"<p>\u53ef\u4ee5\u4f7f\u7528ls --help\u53bb\u770b\u5b98\u65b9\u7684\u8bf4\u660e\u3002\u7528\u4e8e\u67e5\u770b\u5f53\u524d\u76ee\u5f55\u4e0b\u7684 \u76ee\u5f55 \u6587\u4ef6\u8be6\u7ec6\u53c2\u6570\u7b49\u4fe1\u606f\u3002</p> <p><pre><code>ls </code></pre> \u67e5\u770b\u5f53\u7136\u76ee\u524d\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u6587\u4ef6\uff0c\u4ee5\u53ca\u6587\u4ef6\u5939\uff0c\uff08\u4e0d\u5305\u542b\u9690\u85cf\u6587\u4ef6\uff09\u3002 <pre><code>ls -l\n</code></pre> \u67e5\u770b\u5f53\u7136\u76ee\u524d\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u6587\u4ef6\uff0c\u4ee5\u53ca\u6587\u4ef6\u5939\uff0c\u7684\u8be6\u7ec6\u5c5e\u6027\u4fe1\u606f\u3002\uff08\u4e0d\u5305\u542b\u9690\u85cf\u6587\u4ef6\uff09\u3002 <pre><code>ls -a\n</code></pre> \u67e5\u770b\u5f53\u7136\u76ee\u524d\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u6587\u4ef6\uff0c\u4ee5\u53ca\u6587\u4ef6\u5939\uff0c\uff08\u5305\u542b\u9690\u85cf\u6587\u4ef6\uff09\u3002 <pre><code>ls DIR\n</code></pre> \u67e5\u770bDIR(\u76ee\u6807\u76ee\u5f55)\u4e0b\u7684\u6240\u6709\u6587\u4ef6\uff0c\uff08\u4e0d\u5305\u542b\u9690\u85cf\u6587\u4ef6\uff09\u3002 \u540e\u9762\u52a0\u540c\u7b49\u7684 ls \u53c2\u6570\uff0c\u6bd4\u5982 <code>ls Desktop -la</code> \u5c31\u662f\u67e5\u770b Desktop\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u6587\u4ef6\u5939 \u6587\u4ef6 \u4ee5\u53ca\u6240\u6709\u7684\u9690\u85cf\u6587\u4ef6\u8fd8\u6709\u8be6\u7ec6\u7684\u5c5e\u6027\u4fe1\u606f\u7b49\u3002</p>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/Filemanagement/#cd","title":"cd \u547d\u4ee4\uff1a","text":"<p>\u53ef\u4ee5\u4f7f\u7528 cd --help\u53bb\u67e5\u770b\u5b98\u65b9\u8bf4\u660e\u3002 \u6539\u53d8shell\u5de5\u4f5c\u76ee\u5f55\u3002</p> <pre><code>cd DIR\n</code></pre> <p>\u8fdb\u5165\uff08\u5207\u6362\uff09\u5230DIR\u76ee\u6807\u76ee\u5f55\u4e0b\u3002\u6bd4\u5982\u4f7f\u7528 <code>cd Desktop</code> \u8fdb\u5165\u5230Desktop\u76ee\u5f55\u4e0b\u3002</p> <pre><code>cd -\n</code></pre> <p>\u5207\u6362\u5230\u4e0a\u6b21\u6267\u884ccd DIR\u76ee\u5f55\u5185\u3002 \u4e3e\u4f8b\uff0c\u9996\u5148\u5728 <code>~</code>  \u76ee\u5f55\uff0c\u4e4b\u540e\u6211\u4eec\u4f7f\u7528<code>cd Desktop</code>\u8fdb\u5165\u5230Desktop\u76ee\u5f55\u4e0b\uff0c\u7136\u540e\u4f7f\u7528<code>cd -</code>\u547d\u4ee4\u76f4\u63a5\u5207\u6362\u56de <code>~</code>\u52a0\u76ee\u5f55\u4e0b\u3002</p> <pre><code>cd .        //\u8868\u793a\u8fdb\u5165\u5230\u5f53\u524d\u76ee\u5f55\ncd ..       //\u8868\u793a\u5207\u6362\u5230\u4e0a\u4e00\u7ea7\u76ee\u5f55\ncd  ../..   //\u8868\u793a\u5207\u6362\u5230 \u4e0a\u4e0a\u7ea7\u76ee\u5f55\u3002\n</code></pre>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/Filemanagement/#cp","title":"cp\u547d\u4ee4\uff1a","text":"<p>\u53ef\u4ee5\u4f7f\u7528 cp --help\u53bb\u67e5\u770b\u5b98\u65b9\u8bf4\u660e\u3002\u5c06\u6307\u5b9a\u7684&lt;\u6e90\u6587\u4ef6&gt;\u590d\u5236\u81f3&lt;\u76ee\u6807\u6587\u4ef6&gt;\uff0c\u6216\u5c06\u591a\u4e2a&lt;\u6e90\u6587\u4ef6&gt;\u590d\u5236\u81f3&lt;\u76ee\u6807\u76ee\u5f55&gt;\u3002</p> <pre><code>cp -r DIR1 DIR1   //\u590d\u5236DIR1\u76ee\u5f55\u5230DIR2\u76ee\u5f55\ncp file1 file2    //\u590d\u5236file1\u6587\u4ef6\u5230file2\ncp -d link DIR    //\u590d\u5236\u4e00\u4e2a\u94fe\u63a5\u6587\u4ef6\u5230DIR\u76ee\u5f55\u5185\ncp -p file1 file3 //\u590d\u5236file1\u6587\u4ef6\u53ca\u6240\u6709\u5c5e\u6027\u5230file3\ncp -f               //\u5f3a\u5236\u590d\u5236 \u67d0\u4e2a\u6587\u4ef6\u6216\u8005\u6587\u4ef6\u5939\ncp -v               //\u663e\u793a\u590d\u5236\u7684\u8be6\u7ec6\u4fe1\u606f\u7b49\u3002\n</code></pre>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/Filemanagement/#mv","title":"mv\u547d\u4ee4","text":"<p>\u53ef\u4ee5\u4f7f\u7528mv --help\u547d\u4ee4\u67e5\u770b\u5b98\u65b9\u8bf4\u660e\uff0c\u5c06&lt;\u6e90\u6587\u4ef6&gt;\u91cd\u547d\u540d\u4e3a&lt;\u76ee\u6807\u6587\u4ef6&gt;\uff0c\u6216\u5c06\u6e90\u6587\u4ef6\u79fb\u52a8\u81f3\u6307\u5b9a&lt;\u76ee\u5f55&gt;\u3002</p> <pre><code>mv file1 file2  //\u5c06file1\u91cd\u547d\u540d\u4e3afile2\nmv dir1 dir2    //\u5c06dir1\u91cd\u547d\u540d\u4e3adir2\nmv file1 dir2   //\u5c06file1\u79fb\u52a8\u81f3dir2\u76ee\u5f55\u5185\u3002\nmv dir2 dir1/   //\u5c06dir2\u76ee\u5f55\u79fb\u52a8\u81f3dir1\u76ee\u5f55\u5185\u3002\nmv -f           //\u5f3a\u884c\u79fb\u52a8\u6216\u91cd\u547d\u540d\u64cd\u4f5c\u3002\nmv -v           //\u663e\u793a\u79fb\u52a8\u6216\u8005\u91cd\u547d\u540d\u7b49\u64cd\u4f5c\u7684\u8be6\u7ec6\u4fe1\u606f\u3002\n</code></pre>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/Filemanagement/#pwd","title":"pwd\u547d\u4ee4","text":"<p>\u6253\u5370\u5f53\u524d\u5de5\u4f5c\u76ee\u5f55\u7684\u5b8c\u6574\u8def\u5f84\u3002</p> <pre><code>pwd             //\u663e\u793a\u5b8c\u6574\u7684\u76ee\u5f55\u8def\u5f84\u3002\n</code></pre>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/Filemanagement/#mkdir","title":"mkdir\u547d\u4ee4","text":"<p>\u521b\u5efa\u4e00\u4e2a\u6216\u591a\u4e2a\u4e0d\u5b58\u5728\u7684 \u76ee\u5f55\uff0c\u6216\u8005\u5728\u67d0\u4e2a\u76ee\u5f55\u4e0b\u521b\u5efa\u76ee\u5f55\u3002</p> <pre><code>mkdir dir1      //\u521b\u5efa\u4e00\u4e2adir1\u76ee\u5f55\nmkdir dir1 dir2 //\u521b\u5efa\u4e00\u4e2adir1 dir2\u76ee\u5f55\nmkdir -p dir1/dir1.1  //\u5728dir1\u76ee\u5f55\u4e0b\u521b\u5efa\u4e00\u4e2a dir1.1\u76ee\u5f55\n</code></pre> <p>rmdir \u5220\u9664\u4e00\u4e2adir\u76ee\u5f55\u6216\u8005\u591a\u4e2adir\u76ee\u5f55\uff0c\u524d\u63d0\u8981\u6c42 dir\u76ee\u5f55\u4e0b\u6ca1\u6709\u6587\u4ef6\u3002</p>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/Filemanagement/#chown","title":"chown","text":"<p>\u7528\u4e8e\u8bbe\u7f6e\u6587\u4ef6\u6240\u6709\u8005\u548c\u6587\u4ef6\u5173\u8054\u7ec4\u7684\u547d\u4ee4\u3002</p> <pre><code>[ubuntu@book:~]$  chown root:root  test.txt  //\u4fee\u6539\u8fd9\u4e2a\u6587\u4ef6\u7684\u7528\u6237\u7ec4\u548c\u7528\u6237ID\u3002\n[ubuntu@book:~]$  chown  -R root:root ./*  //\u4fee\u6539\u8fd9\u4e2a\u76ee\u5f55\u4e0b\u6240\u6709\u6587\u4ef6\u53ca\u6587\u4ef6\u5939\u7684\u7528\u6237\u7ec4\u548c\u7528\u6237ID\u3002\n</code></pre>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/Filemanagement/#touch","title":"touch","text":"<p>\u7528\u4e8e\u4fee\u6539\u6587\u4ef6\u6216\u8005\u76ee\u5f55\u7684\u65f6\u95f4\u5c5e\u6027\uff0c\u6216\u8005\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u6587\u4ef6\u3002</p> <pre><code>[ubuntu@book:~]$ touch file1.txt  //\u4fee\u6539\u8fd9\u4e2a\u6587\u4ef6\u7684\u65f6\u95f4\uff0c\u5982\u679c\u6587\u4ef6\u4e0d\u5b58\u5728\u5219\u521b\u5efa\u4e00\u4e2a\u6587\u4ef6\u3002\n</code></pre>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/Filemanagement/#file","title":"file","text":"<p>\u7528\u4e8e\u663e\u793a\u6587\u4ef6\u7c7b\u578b\u7b49\u8be6\u7ec6\u4fe1\u606f\u3002</p> <pre><code>[ubuntu@book:~]$ file file.txt      //\u7528\u4e8e\u663e\u793a\u8fd9\u4e2a\u6587\u4ef6\u7684\u8be6\u7ec6\u7c7b\u578b\u4fe1\u606f\u3002\n[ubuntu@book:~]$ file -i file.txt   //\u7528\u4e8e\u663e\u793a\u8fd9\u4e2a\u6587\u4ef6\u7684MIME\u7c7b\u522b\u3002\n</code></pre>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/Filemanagement/#chmod","title":"chmod\u547d\u4ee4","text":"<pre><code>[ubuntu@book:~]$  chmod ugo+x test.sh  //\u7ed9\u8fd9\u4e2a\u6587\u4ef6\u589e\u52a0\u6240\u6709\u7528\u6237\u7684\u53ef\u6267\u884c\u6743\u9650\u3002\n[ubuntu@book:~]$  chmod a+x test.sh  //\u7ed9\u8fd9\u4e2a\u6587\u4ef6\u589e\u52a0\u6240\u6709\u7528\u6237\u7684\u53ef\u6267\u884c\u6743\u9650\u3002\n[ubuntu@book:~]$  chmod a-x test.sh  //\u7ed9\u8fd9\u4e2a\u6587\u4ef6\u79fb\u9664\u6240\u6709\u7528\u6237\u7684\u53ef\u6267\u884c\u6743\u9650\u3002\n[ubuntu@book:~]$  chmod 755 test.sh   //\u7ed9\u8fd9\u4e2a\u6587\u4ef6user\u8bbe\u7f6e\u4e3arwx group\u8bbe\u7f6e\u4e3ar x,\u7ed9\u5176\u5b83\u7528\u6237\u4e5f\u662f\u8bbe\u7f6e\u4e3ar x.\n[ubuntu@book:~]$  chmod -R 755 ./*  //\u7ed9\u8fd9\u4e2a\u8def\u5f84\u4e0b\u7684\u6240\u6709\u6587\u4ef6\u673a\u53ca\u76ee\u5f55\u8bbe\u7f6e\u4e3a rwx rx rx\u6743\u9650\u3002\n</code></pre>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/Filemanagement/#ln","title":"ln\u547d\u4ee4","text":"<p>\u521b\u5efa\u94fe\u63a5\u6587\u4ef6\u547d\u4ee4</p> <pre><code>[ubuntu@book:~]$  ln -s file1.txt  doc.txt  //\u7ed9file1.txt\u521b\u5efa\u4e00\u4e2a\u8f6f\u94fe\u63a5\u540d\u4e3adoc.txt\n[ubuntu@book:~]$  ln file1.txt  doc.txt  //\u7ed9file1.txt\u521b\u5efa\u4e00\u4e2a\u786c\u94fe\u63a5\u540d\u4e3adoc.txt\n</code></pre>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/Filemanagement/#tar","title":"tar\u547d\u4ee4","text":"<p>\u5bf9\u6587\u4ef6\u8fdb\u884c\u538b\u7f29\u4e0e\u89e3\u538b\u7f29\u64cd\u4f5c\u3002</p> <pre><code>[ubuntu@book:~]$ tar -czf file.tar.gz file/     //\u538b\u7f29 file/\u6587\u4ef6\u5939\u4e3agz\u683c\u5f0f\uff0c\u538b\u7f29\u5305\u540d\u79f0\u4e3a file.tar.gz\n[ubuntu@book:~]$ tar -xzf file.tar.gz           //\u89e3\u538b\u7f29 file.tar.gz\u538b\u7f29\u5305\n[ubuntu@book:~]$ tar -cjf file.tar.bz  file/    //\u538b\u7f29 file/\u6587\u4ef6\u5939\u4e3abz\u683c\u5f0f\uff0c\u538b\u7f29\u5305\u540d\u79f0\u4e3a file.tar.bz\n[ubuntu@book:~]$ tar -xjf file.tar.gz           //\u89e3\u538b\u7f29file.tar.gz\u538b\u7f29\u5305.\n[ubuntu@book:~]$ tar czf - file/ | split -d -b100m - file.tar.gz //\u5c06file\u6587\u4ef6\u5939\u8fdb\u884c\u5206\u5272\uff0c\u4ee5100M\u5927\u5c0f\u8fdb\u884c\u5206\u5272\u64cd\u4f5c\uff0c\u751f\u4ea7\u7684\u538b\u7f29\u5305\u683c\u5f0f\u4e3a file.tar.gz\n[ubuntu@book:~]$ cat file.tar.gz0* | tar zx   //\u5c06\u5206\u5377\u538b\u7f29\u7684\u538b\u7f29\u5305\u8fdb\u884c\u7edf\u4e00\u89e3\u538b\u7f29\u64cd\u4f5c\u3002\n</code></pre>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/Filemanagement/#7z","title":"7z\u547d\u4ee4","text":"<p>\u4ee5.7z\u7ed3\u5c3e\u7684\u538b\u7f29\u5305\u8fdb\u884c\u89e3\u538b\u7f29\u6216\u8005\u538b\u7f29\u64cd\u4f5c\u3002</p> <pre><code>[ubuntu@book:~]$ sudo apt install p7zip-full  //\u5b89\u88c57z\u538b\u7f29\u89e3\u538b\u7f29\u5de5\u5177\n[ubuntu@book:~]$ 7z a -t7z -r test1.7z  dir1/  //\u538b\u7f29dir1\u76ee\u5f55\u4e3atest1.7z\u538b\u7f29\u5305\u3002\n[ubuntu@book:~]$ 7z x  test1.7z -r -odir2/      //\u89e3\u538b\u7f29\u540d\u4e3a test1.7z\uff0c\u9012\u5f52\u89e3\u538b\u8f93\u51fa\u5230dir2\u76ee\u5f55\u5185\u3002\n</code></pre>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/Filemanagement/#zip","title":"zip\u547d\u4ee4","text":"<p>\u4ee5.zip\u7ed3\u5c3e\u7684\u538b\u7f29\u5305\uff0c\u538b\u7f29\u4e0e\u89e3\u538b\u7f29\u3002</p> <pre><code>[ubuntu@book:~]$ zip -r test1.zip dir1 file1    //\u5c06dir1 file1\u538b\u7f29\u4e3a test1.zip\u538b\u7f29\u5305\u3002\n[ubuntu@book:~]$ unzip -v test1.zip     //\u67e5\u770b\u538b\u7f29\u5305test1.zip\u91cc\u9762\u7684\u5185\u5bb9\n[ubuntu@book:~]$ unzip -t test1.zip     //\u67e5\u770b\u4e00\u4e0btest1.zip\u538b\u7f29\u5305\u5b8c\u6574\u6027\n[ubuntu@book:~]$ unzip -d tmp  test1.zip //\u89e3\u538b\u7f29test1.zip\u5230 tmp\u76ee\u5f55\u4e0b\u3002\n[ubuntu@book:~]$ zip  test1.zip  -d file1   //\u5355\u72ec\u4ecetest1.zip\u538b\u7f29\u5305\u91cc\u5220\u9664 file1\u6587\u4ef6\u3002\n[ubuntu@book:~]$ unzip -v test1.zip //\u67e5\u770b\u538b\u7f29\u5305test1.zip\u91cc\u9762\u7684\u5185\u5bb9\n</code></pre>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/Filemanagement/#gzip","title":"gzip\u547d\u4ee4","text":"<p>\u538b\u7f29.gz\u7ed3\u5c3e\u7684\u538b\u7f29\u5305\u3002\u4ed6\u53ea\u80fd\u538b\u7f29\u5355\u4e2a\u6587\u4ef6\u3002</p> <pre><code>[ubuntu@book:~]$ gzip test1.iso  //\u538b\u7f29\u4e00\u4e2a\u540d\u4e3atest1.iso\u4e3agz\u538b\u7f29\u683c\u5f0f\u3002\n[ubuntu@book:~]$ gunzip test1.iso.gz //\u89e3\u538b\u7f29test1.iso.gz\u538b\u7f29\u5305\u3002\n</code></pre>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/Filemanagement/#bzip2","title":"bzip2\u547d\u4ee4","text":"<p>\u538b\u7f29\u4e3a.bz2\u7684\u538b\u7f29\u5305\u4ee5\u53ca\u89e3\u538b\u7f29\u3002</p> <pre><code>[ubuntu@book:~]$ bzip2 file.txt         //\u538b\u7f29\u4e00\u4e2afile.txt,\u538b\u7f29\u540e\u540d\u79f0\u4e3afile.txt.bz2 [ubuntu@book:~]$ bunzip2 file.txt.bz2   //\u89e3\u538b\u7f29file.txt.bz2 </code></pre>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/NetworkManagement/","title":"\u7f51\u7edc\u7ba1\u7406","text":""},{"location":"Stage1-LinuxCprogrammers/LinuxShell/NetworkManagement/#ifconfig","title":"ifconfig\u547d\u4ee4","text":"<p>ifconfig\u7528\u4e8e\u7ba1\u7406\u7f51\u7edc\u8bbe\u5907\u3002</p> <pre><code>[ubuntu@book:~]$ sudo apt install net-tools\n[ubuntu@book:~]$ ifconfig\n[ubuntu@book:~]$ sudo dhclient          //\u81ea\u52a8\u83b7\u53d6IP\u5730\u5740\n[ubuntu@book:~]$ sudo ifconfig ens33 up  //\u542f\u52a8\u7f51\u5361\u540d\u4e3aens33\u7684\u7f51\u5361\u8bbe\u5907\n[ubuntu@book:~]$ sudo dhclient          //\u81ea\u52a8\u83b7\u53d6IP\u5730\u5740\n[ubuntu@book:~]$ ping qq.com            //\u6d4b\u8bd5\u7f51\u7edc\u8054\u901a\u6027\u3002\n\n[ubuntu@book:~]$ sudo ifconfig ens33 down  //\u5173\u95ed\u7f51\u5361\u540d\u4e3aens33\u7684\u7f51\u5361\u8bbe\u5907\n[ubuntu@book:~]$ sudo ifconfig ens33 hw ether 00:AA:BB:CC:DD:EE  //\u8bbe\u7f6eens33\u7f51\u5361\u8bbe\u5907\u7684MAC\u5730\u5740\u4e3a00:AA:BB:CC:DD:EE\u3002\n[ubuntu@book:~]$ sudo ifconfig ens33 up  //\u542f\u52a8\u7f51\u5361\u540d\u4e3aens33\u7684\u7f51\u5361\u8bbe\u5907\n[ubuntu@book:~]$ sudo dhclient          //\u81ea\u52a8\u83b7\u53d6IP\u5730\u5740\n</code></pre> <ul> <li>\u8bbe\u7f6e\u52a8\u6001IP\u53c2\u8003</li> </ul> <pre><code>book@virtual-machine:~$ cat /etc/netplan/01-netplan.yaml\nnetwork:\n version: 2\nethernets:\n    ens33:\n      dhcp4: true\n</code></pre> <ul> <li>\u8bbe\u7f6e\u9759\u6001IP\u53c2\u8003</li> </ul> <pre><code>book@virtual-machine:~$ cat /etc/netplan/01-netplan.yaml\nnetwork:\n version: 2\nrenderer: networkd\n ethernets:\n    ens192:\n      dhcp4: no\n      addresses: [192.168.1.133/24]\ngateway4: 192.168.1.1\n</code></pre>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/NetworkManagement/#ping","title":"ping\u547d\u4ee4","text":"<p>\u7528\u4e8e\u68c0\u6d4b\u6216\u9a8c\u8bc1\u7f51\u7edc\u8fde\u901a\u6027\u3002</p> <pre><code>[ubuntu@book:~]$ ping qq.com    //\u9a8c\u8bc1\u4e0eqq.com\u7684\u8fde\u901a\u6027\n[ubuntu@book:~]$ ping 192.168.1.1 //\u9a8c\u8bc1\u4e0e192.168.1.1\u7684\u8fde\u901a\u6027\n[ubuntu@book:~]$ ping -I ens36 qq.com //\u6307\u5b9a\u4f7f\u7528ens36\u7f51\u5361\u53bb\u9a8c\u8bc1\u4e0eqq.com\u7f51\u7ad9\u7684\u8fde\u901a\u6027\u3002\n[ubuntu@book:~]$ ping -I ens36 192.168.1.1  //\u6307\u5b9a\u4f7f\u7528ens36\u7f51\u5361\u53bb\u9a8c\u8bc1\u4e0eIP\u5730\u5740192.168.1.1\u7684\u8fde\u901a\u6027\u3002\n[ubuntu@book:~]$ ping  -i 3 -s 1024 qq.com  //\u8bbe\u7f6e3\u79d2 \u6570\u636e\u5305\u5927\u5c0f1024 \u53bb\u9a8c\u8bc1\u548cqq.com\u7684\u8fde\u901a\u6027\u3002\n</code></pre> <ul> <li>\u7f51\u7edc\u8054\u901a\u72b6\u6001\u3002</li> </ul> <p></p> <ul> <li>\u7f51\u7edc\u901a\u4fe1\u5f02\u5e38\u60c5\u51b5\u3002</li> </ul> <p></p>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/NetworkManagement/#samba","title":"samba\u5171\u4eab\u6587\u4ef6","text":"<pre><code>[ubuntu@book:~]$ sudo apt install cifs-utils smaba -y\n[ubuntu@book:~]$ sudo nano /etc/samba/smb.conf\n[share]\ncomment = All Printers\n   available = yes\n   browseable = yes\n   path = /home/ubuntu/Downloads\n   public  = yes\n   writable = yes\n[ubuntu@book:~]$ sudo smbpasswd -a ubuntu\n[ubuntu@book:~]$ sudo /etc/init.d/smbd restart [ubuntu@book:~]$ sudo chmod -R go+rwx  Downloads/\n</code></pre> <ul> <li>Windows\u4e0b\u8f93\u5165<code>\\\\IP\\share</code>\u5728\u5f39\u51fa\u7684\u5bf9\u8bdd\u6846\u5185\u8f93\u5165\u6211\u4eec\u521a\u624d\u8bbe\u7f6e smbpasswd \u7528\u6237\u540d\u548c\u5bc6\u7801\u3002</li> </ul>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/NetworkManagement/#nfs","title":"nfs\u670d\u52a1","text":"<p>NFS\u5373\u7f51\u7edc\u6587\u4ef6\u7cfb\u7edf\uff0c\u5141\u8bb8\u5f00\u53d1\u677f\u76f4\u63a5\u901a\u8fc7\u7f51\u7edc\u6302\u8f7dPC\u673a\u4e2d\u7684\u6587\u4ef6\u5939\u3002</p> <pre><code>[ubuntu@book:~]$ sudo apt install nfs-kernel-server\n[ubuntu@book:~]$ mkdir ~/nfs_rootfs\n[ubuntu@book:~]$ sudo nano /etc/exports\n/home/ubuntu/nfs_rootfs  *(rw,nohide,insecure,no_subtree_check,async,no_root_squash)\n[ubuntu@book:~]$ sudo service nfs-kernel-server restart\n\n[ubuntu@book:~]$ sudo mount -t nfs 127.0.0.1:/home/ubuntu/nfs_rootfs /mnt\n</code></pre>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/NetworkManagement/#tftp","title":"tftp\u670d\u52a1","text":"<pre><code>[ubuntu@book:~]$  sudo apt-get install tftp-hpa tftpd-hpa\n[ubuntu@book:~]$ mkdir ~/tftpboot\n[ubuntu@book:~]$ sudo chmod -R 777 ~/tftpboot\n[ubuntu@book:~/tftpboot]$ sudo nano /etc/default/tftpd-hpa\nTFTP_USERNAME=\"tftp\"\nTFTP_DIRECTORY=\"/home/ubuntu/tftpboot\"\nTFTP_OPTIONS=\"-l -c -s\"\nTFTP_ADDRESS=\":69\"\n[ubuntu@book:~/tftpboot]$ sudo service tftpd-hpa restart\n</code></pre> <p>TFTP_OPTIONS=\"-l -c -s\" -s\u8868\u793a\u5b89\u5168 -c\u8868\u793a\u8fd0\u884c\u4e0a\u4f20</p> <ul> <li>\u5f00\u53d1\u677f\u5185\u4f7f\u7528tftp\u547d\u4ee4\u4e0a\u4f20\u4e0b\u8f7d\u6587\u4ef6</li> </ul> <pre><code># tftp -r test1 -g 192.168.1.20   //\u4ece192.168.1.20\u670d\u52a1\u5668\u83b7\u53d6\u5230 test1\u6587\u4ef6\u3002\n# tftp -l 1.txt   -p 192.168.1.20  //\u5c06\u672c\u5730\u76841.txt\u4e0a\u4f20\u5230 192.168.1.20\u670d\u52a1\u5668\u3002\n</code></pre>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/NetworkManagement/#netstat","title":"netstat\u547d\u4ee4","text":"<p>\u7528\u4e8e\u67e5\u770b\u7cfb\u7edf\u7f51\u7edc\u8be6\u7ec6\u8fde\u63a5\u4fe1\u606f\u3002</p> <pre><code>[ubuntu@book:~]$ netstat -a  //\u663e\u793a\u8be6\u7ec6\u7684\u7f51\u8def\u72b6\u51b5\u3002\n[ubuntu@book:~]$ netstat -apu //\u663e\u793a\u7aef\u53e3\u53f7\u7b49\u4f7f\u7528\u60c5\u51b5\u3002\n</code></pre>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/NetworkManagement/#tcpdump","title":"tcpdump\u547d\u4ee4","text":"<p>\u7528\u4e8e\u4fa6\u542c\u7f51\u7edc\u4f20\u8f93\u7684\u6570\u636e\u3002</p> <pre><code>[ubuntu@book:~]$ tcpdump    //\u663e\u793a\u6240\u6709\u7684\u7f51\u7edc\u5305\u4fe1\u606f\u3002\n[ubuntu@book:~]$ tcpdump -i ens36  //\u6307\u5b9a\u7f51\u5361\u8bbe\u5907\uff0c\u76d1\u542cens36\u7684\u7f51\u7edc\u5305\u4fe1\u606f\n[ubuntu@book:~]$ tcpdump -i ens36 -q //\u4ee5\u7cbe\u7b80\u6a21\u5f0f\u663e\u793a\n[ubuntu@book:~]$ tcpdump -i ens36 -vv //\u663e\u793a\u66f4\u8be6\u7ec6\u7684\u4fe1\u606f\u3002\n[ubuntu@book:~]$ tcpdump -c 10 -i ens36 -vv //\u76d1\u542cens36,\u53ea\u6293\u53d610\u4e2a\u5305\u3002\n[ubuntu@book:~]$ tcpdump -c 10 -i ens36 -vv  &gt; tcpdump.cap //\u76d1\u542cens36,\u53ea\u6293\u53d610\u4e2a\u5305,\u5bfc\u51fa\u5230tcpudump.cap\u6587\u4ef6\u5185\u3002\n</code></pre>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/NetworkManagement/#ip","title":"ip\u547d\u4ee4","text":"<p>\u6bd4ifconfig\u66f4\u5f3a\u5927\u7684\u4e00\u4e2a \u7f51\u7edc\u7ba1\u7406\u547d\u4ee4\u3002</p> <pre><code>[ubuntu@book:~]$ ip link show [ubuntu@book:~]$ ip a [ubuntu@book:~]$ ip addr show\n[ubuntu@book:~]$ ip link set ens36 up\n[ubuntu@book:~]$ ip link set ens36 down\n[ubuntu@book:~]$ ip addr add 192.168.1.20/24 dev ens36 [ubuntu@book:~]$ ip addr del 192.168.1.20/24 dev ens36 [ubuntu@book:~]$ ip -s link list [ubuntu@book:~]$ ip route list\n</code></pre>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/SystemManagement/","title":"\u7cfb\u7edf\u7ba1\u7406","text":""},{"location":"Stage1-LinuxCprogrammers/LinuxShell/SystemManagement/#apt","title":"apt\u547d\u4ee4","text":"<p>\u9644\u52a0\u5de5\u5177 \u4f7f\u7528 aptitude \u56fe\u5f62\u5316\u7684\u8f6f\u4ef6\u5305\u7ba1\u7406\u5668\u3002</p> <pre><code>[ubuntu@book:~]$ sudo apt update    //\u66f4\u65b0\u8f6f\u4ef6\u6e90\u5305\u5217\u8868\u4e3a\u6700\u65b0\u72b6\u6001\n[ubuntu@book:~]$ sudo apt upgrade   //\u66f4\u65b0\u6240\u6709\u7684\u5305\u4e3a\u6700\u65b0\u72b6\u6001\n[ubuntu@book:~]$ sudo apt install &lt;pkg&gt;  //\u5b89\u88c5\u4e00\u4e2a\u8f6f\u4ef6\u5305\uff0c\u4e5f\u53ef\u4ee5\u662f\u591a\u4e2a\u3002\n[ubuntu@book:~]$ sudo apt reinstall &lt;pkg&gt;  //\u91cd\u65b0\u5b89\u88c5\u4e00\u4e2a\u8f6f\u4ef6\u5305\u3002\n[ubuntu@book:~]$ sudo apt remove &lt;pkg&gt;   //\u79fb\u9664\u4e00\u4e2a\u8f6f\u4ef6\u5305\n[ubuntu@book:~]$ sudo apt-cache search &lt;string&gt; //apt\u6e90\u4e2d\u641c\u7d22\u4e00\u4e2a\u8f6f\u4ef6\u5305\n[ubuntu@book:~]$ sudo apt list  //\u5217\u51fa\u6211\u4eec\u5df2\u7ecf\u5b89\u88c5\u7684\u8f6f\u4ef6\u5305\n[ubuntu@book:~]$ sudo apt show &lt;pkg&gt; //\u67e5\u770b\u67d0\u4e2a\u8f6f\u4ef6\u5305\u7684\u8be6\u7ec6\u4fe1\u606f\u3002\n</code></pre> <ul> <li>aptitude \u56fe\u5f62\u5316\u5305\u7ba1\u7406\u754c\u9762\uff0c\u5177\u4f53\u4f7f\u7528\u65b9\u6cd5\u53ef\u4ee5\u4f7f\u7528\u9f20\u6807\u4ee5\u53ca\u9875\u9762\u63d0\u793a\u8fdb\u884c\u64cd\u4f5c\u3002</li> </ul> <p></p>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/SystemManagement/#dpkg","title":"dpkg \u547d\u4ee4","text":"<p>\u79bb\u7ebf\u5b89\u88c5deb\u5305\u7684\u547d\u4ee4\u3002</p> <pre><code>[ubuntu@book:~]$ sudo dpkg -i &lt;pkg.deb&gt;  //\u624b\u52a8\u5b89\u88c5\u5df2\u7ecf\u4e0b\u8f7d\u597d\u7684\u8f6f\u4ef6\u5305\n[ubuntu@book:~]$ sudo dpkg -r &lt;pkg&gt;         //\u624b\u52a8\u79fb\u9664\u5df2\u7ecf\u4e0b\u8f7d\u597d\u7684\u8f6f\u4ef6\u5305\n</code></pre>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/SystemManagement/#snap","title":"snap\u547d\u4ee4","text":"<p>\u5728\u7ebf\u8f6f\u4ef6\u5305\u7ba1\u7406\u547d\u4ee4</p> <pre><code>[ubuntu@book:~]$ sudo snap version //\u67e5\u770bsnap\u7684\u7248\u672c\u72b6\u6001\n[ubuntu@book:~]$ sudo snap find \"media player\"  //\u641c\u7d22\u652f\u6301 media player\u7684\u8f6f\u4ef6\u5305\n[ubuntu@book:~]$ sudo snap install vlc         //\u5b89\u88c5vlc\u8f6f\u4ef6\n[ubuntu@book:~]$ sudo snap info vlc                //\u67e5\u770bvlc\u8f6f\u4ef6\u7684\u8be6\u7ec6\u4fe1\u606f\u3002\n[ubuntu@book:~]$ sudo snap install --channel=edeg vlc  //\u5b89\u88c5\u6d4b\u8bd5\u7248\u7684vlc\n[ubuntu@book:~]$ sudo snap switch  --channel=stable vlc  //\u5207\u6362vlc\u8f6f\u4ef6\u5305\u4e3a\u7a33\u5b9a\u7248\u3002\n[ubuntu@book:~]$ snap list                  //\u67e5\u770b\u5df2\u7ecf\u5b89\u88c5\u8fc7\u7684\u8f6f\u4ef6\u5305\u72b6\u6001\n</code></pre>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/SystemManagement/#top","title":"top\u547d\u4ee4","text":"<p>\u67e5\u770b\u7cfb\u7edf\u8d44\u6e90\u4f7f\u7528\u60c5\u51b5</p> <pre><code>[ubuntu@book:~]$ top\n</code></pre> <p></p>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/SystemManagement/#htop","title":"htop\u547d\u4ee4","text":"<pre><code>[ubuntu@book:~]$ sudo apt install htop\n[ubuntu@book:~]$ htop\n</code></pre>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/SystemManagement/#uname","title":"uname \u547d\u4ee4","text":"<p>\u663e\u793a\u7cfb\u7edf\u4fe1\u606f</p> <p></p>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/SystemManagement/#find","title":"find\u547d\u4ee4","text":"<p>\u7528\u4e8e\u67e5\u627e\u548c\u641c\u7d22\u6587\u4ef6&amp;\u76ee\u5f55\u3002</p> <pre><code>[ubuntu@book:~]$ find  -name &lt;file&gt;              //\u5728\u5f53\u524d\u8def\u5f84\u4e0b\u641c\u7d22\u540d\u4e3a file\u6240\u6709\u6587\u4ef6\u3002\n[ubuntu@book:~]$ find ~/Desktop -name test.txt //\u5728Desktop\u76ee\u5f55\u4e0b\u641c\u7d22 test.txt\u6587\u4ef6\n[ubuntu@book:~]$ find ~/Desktop -name \"*.txt\" //\u5728Desktop\u76ee\u5f55\u4e0b\u641c\u7d22\u6240\u6709\u7684\u540e\u7f00\u662f .txt\u6587\u4ef6.\n[ubuntu@book:~]$ find .                      //\u663e\u793a\u5f53\u524d\u76ee\u5f55\u4e0b\u6240\u6709\u7684\u6587\u4ef6\u53ca\u76ee\u5f55\u3002\n[ubuntu@book:~]$ find  ~ -print &gt; home.txt   //\u5c06~\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u7684\u6587\u4ef6\u6587\u4ef6\u5939\u5217\u8868\u91cd\u5b9a\u5411\u81f3 home.txt\n[ubuntu@book:~]$ find /usr/bin/ -size  +1M   //\u5217\u51fa/usr/bin/\u76ee\u5f55\u4e0b\u6240\u6709\u5927\u4e8e1M\u7684\u6587\u4ef6\u3002\n[ubuntu@book:~]$ find . -type f -atime +3    //\u5217\u51fa\u5f53\u524d\u8def\u5f84\u4e0b3\u5929\u5185\u88ab\u8bbf\u95ee\u8fc7\u7684\u6587\u4ef6\u3002\n[ubuntu@book:~]$ find . -type f -amin +10    //\u5217\u51fa\u5f53\u524d\u8def\u5f84\u4e0b\u8d85\u8fc7\u8bbf\u95ee10\u5206\u949f\u7684\u6587\u4ef6\u3002\n[ubuntu@book:~]$ find ./ ! -name \"*.txt\"     //\u5217\u51fa\u5f53\u524d\u8def\u5f84\u4e0b\u975e\u540e\u7f00\u540d\u4e3a.txt\u7684\u6587\u4ef6\u53ca\u6587\u4ef6\u5939\u3002\n</code></pre>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/SystemManagement/#adduser","title":"adduser\u547d\u4ee4","text":"<p>\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u7528\u6237</p> <pre><code>[ubuntu@book:~]$ sudo adduer book  //\u65b0\u589e\u4e00\u4e2a\u540d\u4e3abook\u7684\u7528\u6237\n[ubuntu@book:~]$ su book            //\u5207\u6362\u5230book\u7528\u6237\uff0c\u6b64\u65f6\u63d0\u793a\u8f93\u5165\u5bc6\u7801\uff0c\u9700\u8981\u8f93\u5165book\u7528\u6237\u7684\u5bc6\u7801\u3002\n[ubuntu@book:~]$ su ubuntu          //\u5207\u6362\u56deubuntu\u7cfb\u7edf\uff0c\u8f93\u5165ubuntu\u7528\u6237\u7684\u5bc6\u7801\u3002\n</code></pre>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/SystemManagement/#userdel","title":"userdel\u547d\u4ee4","text":"<p>\u5220\u9664\u4e00\u4e2a\u7528\u6237</p> <pre><code>[ubuntu@book:~]$ sudo userdel book  //\u5220\u9664\u4e00\u4e2a\u540d\u4e3abook\u7684\u7528\u6237\u3002\n[ubuntu@book:~]$ sudo userdel -rf  book //\u4f7f\u7528-rf\u5220\u9664book\u7528\u7684\u6240\u6709\u8d44\u6e90\u3002\n</code></pre>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/SystemManagement/#passwd","title":"passwd","text":"<p>\u8bbe\u7f6e\u7528\u6237\u5bc6\u7801 <pre><code>[ubuntu@book:~]$ sudo passwd ubuntu   //\u91cd\u65b0\u8bbe\u7f6eUbuntu\u7528\u6237\u5bc6\u7801\u3002\n[ubuntu@book:~]$ sudo passwd           //\u91cd\u65b0\u8bbe\u7f6eroot\u7528\u6237\u5bc6\u7801\u3002\n</code></pre></p>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/SystemManagement/#exit","title":"exit\u547d\u4ee4","text":"<p>\u9000\u51fa\u5f53\u524d\u6253\u5f00\u7684shell</p> <pre><code>[ubuntu@book:~]$ exit </code></pre>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/SystemManagement/#reboot","title":"reboot","text":"<p>\u7528\u4e8e\u91cd\u65b0\u542f\u52a8\u8ba1\u7b97\u673a\u3002</p> <pre><code>[ubuntu@book:~]$ sudo reboot [ubuntu@book:~]$ sudo reboot -n  //\u5728\u91cd\u542f\u4e4b\u524d\u4e0d\u5c06\u6570\u636e\u7f13\u5b58\u5199\u5165\u786c\u76d8\u3002\n[ubuntu@book:~]$ sudo reboot -f   //\u5f3a\u5236\u91cd\u542f\uff0c\u7c7b\u4f3c\u4e8e\u65ad\u7535\u3002\n[ubuntu@book:~]$ sudo reboot -d   //\u867d\u7136\u91cd\u542f\uff0c\u4f46\u662f\u4e0d\u5199\u5165\u7cfb\u7edflog\u65e5\u5fd7\u4e2d\u3002\n[ubuntu@book:~]$ sudo reboot -w   //\u4e0d\u91cd\u542f\uff0c\u4f46\u662f\u5199\u5165\u7cfb\u7edf\u91cd\u542f\u88c5\u64cd\u4f5clog\u65e5\u5fd7\u4e2d\u3002\n</code></pre>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/SystemManagement/#poweroff","title":"poweroff","text":"<p>\u7528\u4e8e\u5173\u95ed\u8ba1\u7b97\u673a\u3002</p> <pre><code>[ubuntu@book:~]$ sudo poweroff [ubuntu@book:~]$ sudo poweroff -n  //\u5728\u5173\u673a\u4e4b\u524d\u4e0d\u5c06\u6570\u636e\u7f13\u5b58\u5199\u5165\u786c\u76d8\u3002\n[ubuntu@book:~]$ sudo poweroff -f     //\u5f3a\u5236\u5173\u673a\uff0c\u7c7b\u4f3c\u4e8e\u65ad\u7535\u3002\n[ubuntu@book:~]$ sudo poweroff -d   //\u867d\u7136\u5173\u673a\uff0c\u4f46\u662f\u4e0d\u5199\u5165\u7cfb\u7edflog\u65e5\u5fd7\u4e2d\u3002\n[ubuntu@book:~]$ sudo poweroff -w   //\u4e0d\u5173\u673a\uff0c\u4f46\u662f\u5199\u5165\u7cfb\u7edf\u5173\u673a\u88c5\u64cd\u4f5clog\u65e5\u5fd7\u4e2d\u3002\n</code></pre>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/SystemManagement/#shutdown","title":"shutdown","text":"<p>\u5173\u673a\u64cd\u4f5c\uff0c\u5728\u5173\u673a\u4e4b\u524d\u4f1a\u5c06\u5173\u673a\u4fe1\u606f\u4f20\u9012\u7ed9\u6240\u6709\u6b63\u5728\u6267\u884c\u7684\u7a0b\u5e8f\u3002</p> <pre><code>[ubuntu@book:~]$ sudo shutdown -h now //\u7acb\u5373\u5173\u673a\n[ubuntu@book:~]$ sudo shutdown -t 10  //10\u79d2\u540e\u5173\u673a\n[ubuntu@book:~]$ sudo shutdown -r now  //\u7acb\u5373\u91cd\u542f\n[ubuntu@book:~]$ sudo shutdown -h 3     //3\u5206\u949f\u540e\u5173\u673a\n[ubuntu@book:~]$ sudo shutdown -c       //\u4e2d\u65ad\u6b63\u5728\u5173\u673a\u7684\u52a8\u4f5c\n</code></pre>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/SystemManagement/#which","title":"which\u547d\u4ee4","text":"<p>\u7528\u4e8e\u67e5\u627e\u7cfb\u7edf\u5185\u6587\u4ef6\u6240\u5728\u4f4d\u7f6e</p> <pre><code>[ubuntu@book:~]$ which gdb  //\u67e5\u627egdb\u547d\u4ee4\u6240\u5728\u4f4d\u7f6e\u5e76\u663e\u793a\u51fa\u6765\u3002\n</code></pre>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/SystemManagement/#ps","title":"ps\u547d\u4ee4","text":"<p>\u663e\u793a\u5f53\u524d\u7cfb\u7edf\u6b63\u5728\u8fd0\u884c\u8fdb\u884c\u7684\u72b6\u6001\u7b49\u4fe1\u606f\u3002</p> <pre><code>[ubuntu@book:~]$ ps -aux  //\u67e5\u770b\u8be6\u7ec6\u7684\u8fdb\u7a0b\u72b6\u6001\u4fe1\u606f\u7b49\u3002\n[ubuntu@book:~]$ ps -ef | grep \"ssh\" //\u67e5\u770b\u5b8c\u6574\u7684\u8fdb\u884c\u8def\u5f84\u53caPID\u7b49\uff0c\u914d\u5408\u7740grep\u67e5\u627e\u6211\u4eec\u9700\u8981\u7684\u8fdb\u7a0b\u4fe1\u606f\u3002\n[ubuntu@book:~]$ ps -u root  //\u67e5\u770broot\u7528\u6237\u7684\u8fdb\u7a0b\u4fe1\u606f\u3002\n</code></pre>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/SystemManagement/#clear","title":"clear\u547d\u4ee4","text":"<p>\u7528\u4e8e\u6e05\u5c4f\u64cd\u4f5c\uff0c\u4e3b\u8981\u6e05\u7406\u7ec8\u7aef\u5b57\u7b26\u4e32\u3002</p> <pre><code>[ubuntu@book:~]$ clear\n</code></pre>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/SystemManagement/#su","title":"su\u547d\u4ee4","text":"<p>\u7528\u4e8e\u5207\u6362\u7528\u6237\u8eab\u4efd\uff0c\u53d8\u66f4\u5f53\u524d\u7ec8\u7aef\u7684\u7528\u6237\u3002</p> <pre><code>[ubuntu@book:~]$ su root //\u5207\u6362\u5230root\u7528\u6237\uff0c\u8f93\u5165\u7684\u662froot\u7528\u6237\u540d\u5bc6\u7801\u3002\n[ubuntu@book:~]$ su ubuntu //\u5207\u6362\u5230ubuntu\u7528\u6237 \u8f93\u5165\u7684\u662fUbuntu\u7528\u6237\u5bc6\u7801\u3002\n</code></pre>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/SystemManagement/#whoami","title":"whoami\u547d\u4ee4","text":"<p>whoami\u547d\u4ee4\u7528\u4e8e\u663e\u793a\u81ea\u8eab\u7528\u6237\u7684\u540d\u79f0</p> <pre><code>[ubuntu@book:~]$ whoami\n</code></pre>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/SystemManagement/#who","title":"who\u547d\u4ee4","text":"<p>\u7528\u4e8e\u663e\u793a\u5f53\u524d\u7cfb\u7edf\u4e2d\u6709\u90a3\u4e9b\u767b\u5f55\u7528\u6237\uff0c\u4ee5\u53ca\u767b\u5f55\u7528\u6237\u7684\u8be6\u7ec6\u4fe1\u606f\u3002</p> <pre><code>[ubuntu@book:~]$ who        //\u663e\u793a\u5f53\u524d\u767b\u5f55\u5230\u8be5\u7cfb\u7edf\u7684\u6240\u6709\u7528\u6237\n[ubuntu@book:~]$ who  -H    //\u663e\u793a\u6807\u9898\u680f\n[ubuntu@book:~]$ who -T  -H     //\u663e\u793a\u767b\u5f55\u7ec8\u7aef\u5c5e\u6027\n[ubuntu@book:~]$ who -q     //\u4ee5\u7cbe\u7b80\u6a21\u5f0f\u663e\u793a\u767b\u5f55\u7684\u7528\u6237\u72b6\u6001\n</code></pre>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/SystemManagement/#date","title":"date \u547d\u4ee4","text":"<p>\u7528\u4e8e\u663e\u793a\u7cfb\u7edf\u5f53\u524d\u65f6\u95f4\u4fe1\u606f\u3002</p> <pre><code>[ubuntu@book:~]$ date\n</code></pre>"},{"location":"Stage1-LinuxCprogrammers/LinuxShell/SystemManagement/#dmesg","title":"dmesg","text":"<p>\u7528\u4e8e\u67e5\u770bkernel\u65e5\u5fd7\u4fe1\u606f\u547d\u4ee4\u3002</p> <pre><code>[ubuntu@book:~]$ dmesg\n</code></pre>"},{"location":"Stage1-LinuxCprogrammers/MakeFile/01-Introduction/","title":"Makefile\u7b80\u8ff0","text":"<ul> <li>\u95ee\u9898\u53cd\u9988\u4ea4\u6d41\u533a https://github.com/100askTeam/Stage1_D1s-Applications/discussions/</li> </ul>"},{"location":"Stage1-LinuxCprogrammers/MakeFile/01-Introduction/#1makefile","title":"1.Makefile\u7b80\u8ff0","text":""},{"location":"Stage1-LinuxCprogrammers/MakeFile/01-Introduction/#11-makefile","title":"1.1 \u4e3a\u4ec0\u4e48\u9700\u8981Makefile","text":"<p>\u73b0\u5728\u4e00\u4e9b\u9879\u76ee\u5de5\u7a0b\u4e2d\u7684\u6e90\u6587\u4ef6\u4e0d\u8ba1\u5176\u6570\uff0c\u5176\u6309\u7c7b\u578b\u3001\u529f\u80fd\u3001\u6a21\u5757\u5206\u522b\u653e\u5728\u82e5\u5e72\u4e2a\u76ee\u5f55\u4e2d\uff0c\u5982\u679c\u4ecd\u7136\u5728\u7ec8\u7aef\u8f93\u5165\u8fd9\u4e9b\u547d\u4ee4\u6765\u7f16\u8bd1\uff0c\u90a3\u663e\u7136\u4e0d\u5207\u5b9e\u9645\uff0c\u5f00\u53d1\u6548\u7387\u6781\u4f4e\u3002 \u6211\u4eec\u9700\u8981\u4e00\u4e2a\u5de5\u5177\u6765\u7ba1\u7406\u8fd9\u4e9b\u7f16\u8bd1\u8fc7\u7a0b\uff0c\u8fd9\u5c31\u662f\u201cmake\u201d\u3002make \u662f\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f\uff0c\u5b83\u6839\u636e Makefile \u6765\u505a\u4e8b\u3002Makefile \u8d1f\u8d23\u7ba1\u7406\u6574\u4e2a\u7f16\u8bd1\u6d41\u7a0b\uff1a\u8981\u7f16\u8bd1\u54ea\u4e9b\u6587\u4ef6\uff1f\u600e\u4e48\u7f16\u8bd1\u8fd9\u4e9b\u6587\u4ef6\uff1f\u600e\u4e48\u628a\u5b83\u4eec\u94fe\u63a5\u6210\u4e00\u4e2a\u53ef\u6267\u884c\u7a0b\u5e8f\u3002Makefile \u5b9a\u4e49\u4e86\u4e00\u7cfb\u5217\u7684\u89c4\u5219\u6765\u5b9e\u73b0\u8fd9\u4e9b\u7ba1\u7406\u3002</p>"},{"location":"Stage1-LinuxCprogrammers/MakeFile/01-Introduction/#12-makefie","title":"1.2 makefie\u7684\u5f15\u5165","text":"<p>Makefile \u7684\u5f15\u5165\u662f\u4e3a\u4e86\u7b80\u5316\u6211\u4eec\u7f16\u8bd1\u6d41\u7a0b\uff0c\u63d0\u9ad8\u6211\u4eec\u7684\u5f00\u53d1\u8fdb\u5ea6\u3002\u4e0b\u9762\u6211\u4eec\u7528\u4e00\u4e2a\u4f8b\u5b50\u6765\u8bf4\u660e Makefile \u5982\u4f55\u7b80\u5316\u6211\u4eec\u7684\u7f16\u8bd1\u6d41\u7a0b\u3002\u6211\u4eec\u521b\u5efa\u4e00\u4e2a\u5de5\u7a0b\u5185\u5bb9\u5206\u522b main.c\uff0csub.c\uff0csub.h\uff0cadd.c\uff0cadd.h \u4e94\u4e2a\u6587\u4ef6\u3002sub.c \u8d1f\u8d23\u8ba1\u7b97\u4e24\u4e2a\u6570\u51cf\u6cd5\u8fd0\u7b97\uff0cadd.c \u8d1f\u8d23\u8ba1\u7b97\u4e24\u4e2a\u6570\u52a0\u6cd5\u8fd0\u7b97\uff0c\u7136\u540e\u7f16\u8bd1\u51fa\u53ef\u6267\u884c\u6587\u4ef6\u3002\u5176\u6e90\u6587\u4ef6\u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code>main.c\uff1a\n#include &lt;stdio.h&gt;\n#include \"add.h\"\n#include \"sub.h\"\nint main()\n{\nprintf(\"100 ask, add:%d\\n\", add(10, 10));\nprintf(\"100 ask, sub:%d\\n\", sub(20, 10));\nreturn 0;\n}\n</code></pre> <pre><code>add.c\uff1a\n#include \"add.h\"\nint add(int a, int b)\n{\nreturn a + b;\n}\n</code></pre> <pre><code>add.h\uff1a\n#ifndef __ADD_H\n#define __ADD_H\nint add(int a, int b);\n#endif\n</code></pre> <pre><code>sub.c\uff1a\n#include \"sub.h\"\nint sub(int a, int b)\n{\nreturn a - b;\n}\n</code></pre> <pre><code>sub.h\uff1a\n#ifndef __SUB_H\n#define __SUB_H\nint sub(int a, int b);\n#endif\n</code></pre> <p>\u6211\u4eec\u4f7f\u7528 gcc \u5bf9\u4e0a\u9762\u5de5\u7a0b\u8fdb\u884c\u7f16\u8bd1\u53ca\u751f\u6210\u53ef\u6267\u884c\u7a0b\u5e8f\uff0c\u5728\u7ec8\u7aef\u8f93\u5165\u5982\u4e0b\u547d\u4ee4\uff0c\u5982\u4e0b\uff1a</p> <pre><code>$ gcc main.c sub.c add.c -o ouput\n$ ls\nadd.c add.h main.c output sub.c sub.h\n$ ./output\n100 ask, add:20\n100 ask, sub:10\n</code></pre> <p>\u4e0a\u9762\u7684\u547d\u4ee4\u662f\u901a\u8fc7 gcc \u7f16\u8bd1\u5668\u5bf9 main.c sub.c add.c \u8fd9\u4e09\u4e2a\u6587\u4ef6\u8fdb\u884c\u7f16\u8bd1\uff0c\u53ca\u751f\u6210\u53ef\u6267\u884c\u7a0b\u5e8f output\uff0c\u5e76\u6267\u884c\u53ef\u6267\u884c\u6587\u4ef6\u4ea7\u751f\u7ed3\u679c\u3002 \u4ece\u4e0a\u9762\u7684\u4f8b\u5b50\u770b\u8d77\u6765\u6bd4\u8f83\u7b80\u5355\uff0c\u4e00\u6761\u547d\u4ee4\u5b8c\u6210\u4e09\u4e2a\u6e90\u7a0b\u5e8f\u7684\u7f16\u8bd1\u5e76\u4ea7\u751f\u7ed3\u679c\uff0c\u8fd9\u662f\u56e0\u4e3a\u76ee\u524d\u53ea\u6709\u4e09\u4e2a\u6e90\u6587\u4ef6\u3002</p> <p>\u5982\u679c\u6709\u4e0a\u5343\u4e2a\u6e90\u6587\u4ef6\uff0c\u5373\u4f7f\u4f60\u53ea\u4fee\u6539\u4e86\u5176\u4e2d\u4e00\u4e2a\u6587\u4ef6\uff0c\u4f60\u6267\u884c\u8fd9\u6837\u7684\u547d\u4ee4\u65f6\uff0c\u5b83\u4f1a\u628a\u6240\u6709\u7684\u6e90\u6587\u4ef6\u90fd\u7f16\u8bd1\u4e00\u6b21\u3002\u8fd9\u6837\u6d88\u8017\u7684\u65f6\u95f4\u662f\u975e\u5e38\u6050\u6016\u7684\u3002 \u6211\u4eec\u60f3\u5b9e\u73b0\uff1a\u54ea\u4e2a\u6587\u4ef6\u88ab\u4fee\u6539\u4e86\uff0c\u53ea\u7f16\u8bd1\u8fd9\u4e2a\u88ab\u4fee\u6539\u7684\u6587\u4ef6\u5373\u53ef\uff0c\u5176\u5b83\u6ca1\u6709\u4fee\u6539\u7684\u6587\u4ef6\u5c31\u4e0d\u9700\u8981\u518d\u6b21\u91cd\u65b0\u7f16\u8bd1\u4e86\u3002\u53ef\u4ee5\u4f7f\u7528\u4e0b\u5217\u547d\u4ee4\uff0c\u5148\u5355\u72ec\u7f16\u8bd1\u6587\u4ef6\uff0c\u518d\u6700\u540e\u94fe\u63a5\uff0c\u5982\u4e0b\uff1a</p> <pre><code>$ gcc -c main.c\n$ gcc -c sub.c\n$ gcc -c add.c\n$ gcc main.o sub.o add.o -o output\n</code></pre> <p>\u6211\u4eec\u5c06\u4e0a\u9762\u4e00\u6761\u547d\u4ee4\u53d8\u6210\u4e86\u56db\u6761\uff0c\u5206\u522b\u7f16\u8bd1\u51fa\u6e90\u6587\u4ef6\u7684\u76ee\u6807\u6587\u4ef6\uff0c\u6700\u540e\u518d\u5c06\u6240\u6709\u7684\u76ee\u6807\u6587\u4ef6\u94fe\u63a5\u6210\u53ef\u6267\u884c\u6587\u4ef6\u3002 \u5f53\u5176\u4e2d\u4e00\u4e2a\u6e90\u6587\u4ef6\u7684\u5185\u5bb9\u53d1\u751f\u4e86\u53d8\u5316\uff0c\u6211\u4eec\u53ea\u9700\u8981\u5355\u72ec\u7f16\u8bd1\u5b83\uff0c\u7136\u540e\u8ddf\u5176\u4ed6\u6587\u4ef6\u91cd\u65b0\u94fe\u63a5\u6210\u53ef\u77e5\u6267\u884c\u6587\u4ef6\uff0c\u4e0d\u518d\u9700\u8981\u91cd\u65b0\u7f16\u8bd1\u5176\u4ed6\u6587\u4ef6\u3002 \u5047\u5982\u6211\u4eec\u4fee\u6539\u4e86 add.c \u6587\u4ef6\uff0c\u53ea\u9700\u8981\u91cd\u65b0\u7f16\u8bd1\u751f\u6210 add.c \u7684\u76ee\u6807\u6587\u4ef6\uff0c\u7136\u540e\u518d\u5c06\u6240\u6709\u7684.o \u6587\u4ef6\u94fe\u63a5\u6210\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u5982\u4e0b\uff1a</p> <pre><code>$ gcc -c add.c\n$ gcc main.o sub.o add.o -o output\n</code></pre> <p>\u8fd9\u6837\u7684\u65b9\u5f0f\u867d\u7136\u53ef\u4ee5\u8282\u7701\u65f6\u95f4\uff0c\u4f46\u662f\u4ecd\u7136\u5b58\u5728\u51e0\u4e2a\u95ee\u9898\uff0c\u5982\u4e0b\uff1a</p> <ul> <li> <ol> <li>\u5982\u679c\u6e90\u6587\u4ef6\u7684\u6570\u76ee\u5f88\u591a\uff0c\u90a3\u4e48\u6211\u4eec\u9700\u8981\u82b1\u8d39\u5927\u91cf\u7684\u65f6\u95f4\uff0c\u6572\u547d\u4ee4\u6267\u884c\u3002</li> </ol> </li> <li> <ol> <li>\u5982\u679c\u6e90\u6587\u4ef6\u7684\u6570\u76ee\u5f88\u591a\uff0c\u7136\u540e\u4fee\u6539\u4e86\u5f88\u591a\u6587\u4ef6\uff0c\u540e\u9762\u53d1\u73b0\u5fd8\u8bb0\u4fee\u6539\u4e86\u4ec0\u4e48\u3002</li> </ol> </li> <li> <ol> <li>\u5982\u679c\u5934\u6587\u4ef6\u7684\u5185\u5bb9\u4fee\u6539\uff0c\u66ff\u6362\uff0c\u66f4\u6362\u76ee\u5f55\uff0c\u6240\u6709\u4f9d\u8d56\u4e8e\u8fd9\u4e2a\u5934\u6587\u4ef6\u7684\u6e90\u6587\u4ef6\u5168\u90e8\u9700\u8981\u91cd\u65b0\u7f16\u8bd1\u3002 \u8fd9\u4e9b\u95ee\u9898\u6211\u4eec\u4e0d\u53ef\u80fd\u4e00\u4e2a\u4e00\u4e2a\u53bb\u627e\u548c\u6392\u67e5\uff0c\u5f15\u5165 Makefile \u53ef\u4ee5\u89e3\u51b3\u4e0a\u8ff0\u95ee\u9898\u3002\u6211\u4eec\u5148\u6254\u51fa\u4e00\u4e2a Makefile\uff0c\u5982\u4e0b\uff1a</li> </ol> </li> </ul> <pre><code>Makefile\uff1a\noutput: main.o add.o sub.o\ngcc -o output main.o add.o sub.o\nmain.o: main.c\ngcc -c main.c\nadd.o: add.c\ngcc -c add.c\nsub.o: sub.c\ngcc -c sub.c\nclean:\nrm *.o output\n</code></pre> <p>Makefile \u7f16\u5199\u597d\u540e\u53ea\u9700\u8981\u6267\u884c make \u547d\u4ee4\uff0c\u5c31\u53ef\u4ee5\u81ea\u52a8\u5e2e\u52a9\u6211\u4eec\u7f16\u8bd1\u5de5\u7a0b\u3002\u6ce8\u610f\uff0cmake \u547d\u4ee4\u5fc5\u987b\u8981\u5728 Makefile \u7684\u5f53\u524d\u76ee\u5f55\u6267\u884c\uff0c\u5982\u4e0b\uff1a</p> <pre><code>$ ls\nadd.c add.h main.c Makefile sub.c sub.h\n$ make\ngcc -c main.c\ngcc -c add.c\ngcc -c sub.c\ngcc -o output main.o add.o sub.o\n$ ls\nadd.c add.h add.o main.c main.o Makefile output sub.c sub.h sub.o\n</code></pre> <p>\u901a\u8fc7 make \u547d\u4ee4\u5c31\u53ef\u4ee5\u751f\u6210\u76f8\u5bf9\u5e94\u7684\u76ee\u6807\u6587\u4ef6.o \u548c\u53ef\u6267\u884c\u6587\u4ef6\u3002 \u5982\u679c\u6211\u4eec\u518d\u6b21\u4f7f\u7528 make \u547d\u4ee4\u7f16\u8bd1\uff0c\u5982\u4e0b\uff0c\u5b83\u8bf4\u4f60\u7684\u7a0b\u5e8f\u5df2\u7ecf\u662f\u6700\u65b0\u7684\u4e86\uff0c\u4e0d\u9700\u8981\u518d\u505a\u4ec0\u4e48\u4e8b\u60c5\uff1a</p> <pre><code>$ make\nmake: 'output' is up to date.\n</code></pre> <p>\u6211\u4eec\u53ef\u4ee5\u4fee\u6539\u4e00\u4e0b add.c\uff0c\u7136\u540e\u518d\u6267\u884c make\uff0c\u5982\u4e0b\uff1a</p> <pre><code>$ make\ngcc -c add.c\ngcc -o output main.o add.o sub.o\n</code></pre> <p>\u4f1a\u53d1\u73b0\uff0c\u5b83\u91cd\u65b0\u7f16\u8bd1\u4e86 add.c\uff0c\u5e76\u4e14\u91cd\u65b0\u751f\u6210\u4e86\u53ef\u6267\u884c\u7a0b\u5e8f\u3002 \u901a\u8fc7\u4e0a\u8ff0\u4f8b\u5b50\uff0cMakefile \u5c06\u6211\u4eec\u4e0a\u9762\u7684\u4e09\u4e2a\u95ee\u9898\u90fd\u89e3\u51b3\u4e86\uff0c\u65e0\u9700\u624b\u5de5\u8f93\u5165\u590d\u6742\u7684\u547d\u4ee4\uff0c\u53ea\u7f16\u8bd1\u4fee\u6539\u8fc7\u7684\u6587\u4ef6\u3002\u5728\u4e00\u4e2a\u5f88\u5e9e\u5927\u7684\u5de5\u7a0b\u4e2d\uff0c\u53ea\u6709\u7b2c\u4e00\u6b21\u7f16\u8bd1\u65f6\u95f4\u6bd4\u8f83\u957f\uff0c\u7b2c\u4e8c\u6b21\u7f16\u8bd1\u65f6\u4f1a\u5927\u5927\u7f29\u77ed\u65f6\u95f4\uff0c\u8282\u7701\u4e86\u6211\u4eec\u7684\u5f00\u53d1\u5468\u671f\u3002 \u4e0b\u9762\u6211\u4eec\u6765\u5b66\u4e60 Makefile \u7684\u77e5\u8bc6\u3002</p>"},{"location":"Stage1-LinuxCprogrammers/MakeFile/02-regulation/","title":"2. makefile\u89c4\u5219","text":""},{"location":"Stage1-LinuxCprogrammers/MakeFile/02-regulation/#21","title":"2.1 \u547d\u540d\u89c4\u5219","text":"<p>\u4e00\u822c\u6765\u8bf4\u5c06 Makefile \u6587\u4ef6\u53d6\u540d\u4e3a\u201cMakefile\u201d\u6216\u201cmakefile\u201d\u90fd\u53ef\u4ee5\uff0c\u60ef\u4f8b\u662f\u4f7f\u7528\u9996\u5b57\u6bcd\u5927\u5199\u7684\u201cMakefile\u201d\u3002\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5176\u4ed6\u540d\u5b57\uff0c\u6bd4\u5982makefile.linux\uff0c\u4f46\u4f60\u9700\u8981\u7528\u201c-f\u201d\u53c2\u6570\u6307\u5b9a\uff0c\u793a\u4f8b\u5982\u4e0b</p> <pre><code>make -f makefile.linux\n</code></pre>"},{"location":"Stage1-LinuxCprogrammers/MakeFile/02-regulation/#22","title":"2.2 \u8bed\u6cd5\u89c4\u5219","text":"<p>\u57fa\u672c\u8bed\u6cd5\u89c4\u5219\uff1a</p> <p></p> <ul> <li>target\uff1a\u9700\u8981\u751f\u6210\u7684\u76ee\u6807\u6587\u4ef6</li> <li>prerequisites\uff1a\u751f\u6210\u8be5 target \u6240\u4f9d\u8d56\u7684\u4e00\u4e9b\u6587\u4ef6</li> <li>command\uff1a\u751f\u6210\u8be5\u76ee\u6807\u9700\u8981\u6267\u884c\u7684\u547d\u4ee4</li> </ul> <p>\u4e09\u8005\u7684\u5173\u7cfb\uff1atarget \u4f9d\u8d56\u4e8e prerequisites \u4e2d\u7684\u6587\u4ef6\uff0c\u5176\u751f\u6210\u89c4\u5219\u5b9a\u4e49\u5728command \u4e2d\u3002\u4e3e\u4f8b\uff0c\u6bd4\u5982\u6211\u4eec\u5e73\u65f6\u8981\u7f16\u8bd1\u4e00\u4e2a\u6587\u4ef6\uff1a</p> <pre><code>$ gcc main.c -o main\n</code></pre> <p>\u6362\u6210 Makefile \u7684\u4e66\u5199\u683c\u5f0f\u5982\u4e0b\uff1a</p> <pre><code>main:main.c\ngcc main.c -o main\n</code></pre> <p>\u7b2c 1 \u884c\u8868\u793a main \u8fd9\u4e2a\u53ef\u6267\u884c\u7a0b\u5e8f\u4f9d\u8d56\u4e8e main.c\uff0c\u7b2c 2 \u884c\u8868\u793a\u9700\u8981\u7528\u201cgcc main.c -o main\u201d\u8fd9\u4e2a\u547d\u4ee4\u6765\u751f\u6210 main\u3002 \u6ce8\u610f\uff1aMakefile \u6587\u4ef6\u91cc\u7684\u547d\u4ee4\u5fc5\u987b\u8981\u4f7f\u7528 Tab\uff0c\u4e0d\u80fd\u4f7f\u7528\u7a7a\u683c\u3002</p>"},{"location":"Stage1-LinuxCprogrammers/MakeFile/02-regulation/#23","title":"2.3 \u76ee\u6807\u751f\u6210\u89c4\u5219","text":"<ul> <li>\u76ee\u6807\u751f\u6210\uff1a</li> </ul> <p>\u68c0\u67e5\u89c4\u5219\u4e2d\u7684\u4f9d\u8d56\u6587\u4ef6\u662f\u5426\u5b58\u5728\u3002</p> <p>\u82e5\u4f9d\u8d56\u6587\u4ef6\u4e0d\u5b58\u5728\uff0c\u5219\u5bfb\u627e\u662f\u5426\u6709\u89c4\u5219\u7528\u6765\u751f\u6210\u8be5\u4f9d\u8d56\u6587\u4ef6\u3002</p> <p>\u76ee\u6807\u751f\u6210\u6d41\u7a0b\uff0c\u5982\u4e0b\uff1a</p> <p></p> <ul> <li>\u76ee\u6807\u66f4\u65b0\uff1a</li> </ul> <p>\u68c0\u67e5\u76ee\u6807\u7684\u6240\u6709\u4f9d\u8d56\uff0c\u4efb\u4f55\u4e00\u4e2a\u4f9d\u8d56\u6709\u66f4\u65b0\u65f6\uff0c\u5c31\u8981\u91cd\u65b0\u751f\u6210\u76ee\u6807\u3002 \u76ee\u6807\u6587\u4ef6\u6bd4\u4f9d\u8d56\u6587\u4ef6\u66f4\u65b0\u65f6\u95f4\u665a\uff0c\u5219\u9700\u8981\u66f4\u65b0\u3002</p> <p>\u76ee\u6807\u66f4\u65b0\u6d41\u7a0b\uff0c\u5982\u4e0b\uff1a</p> <p></p> <p>\u6211\u4eec\u4f7f\u7528\u4e0a\u9762\u7684\u4f8b\u5b50\uff0cMakefile \u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code>output: main.o add.o sub.o\ngcc -o output main.o add.o sub.o\nmain.o: main.c\ngcc -c main.c\nadd.o: add.c\ngcc -c add.c\nsub.o: sub.c\ngcc -c sub.c\nclean:\nrm *.o output\n</code></pre> <p>\u7f16\u8bd1\u6267\u884c\uff1a</p> <pre><code>$ make\ngcc -c main.c\ngcc -c add.c\ngcc -c sub.c\ngcc -o output main.o add.o sub.o\n</code></pre> <p>make \u547d\u4ee4\u4f1a\u68c0\u6d4b\u5bfb\u627e\u76ee\u6807\u7684\u4f9d\u8d56\u662f\u5426\u5b58\u5728\uff0c\u4e0d\u5b58\u5728\uff0c\u5219\u4f1a\u5bfb\u627e\u751f\u6210\u4f9d\u8d56\u7684\u547d\u4ee4\u3002 1.output \u4f9d\u8d56\u4e8e\u201cmain.o add.o sub.o\u201d\uff0c\u8fd9\u4e09\u4e2a\u6587\u4ef6\u90fd\u6ca1\u6709\uff0c\u5206\u522b\u53bb\u751f\u6210\u5b83\u4eec\u3002\u600e\u4e48\u751f\u6210\uff1f\u7ee7\u7eed\u5bfb\u627e\u89c4\u5219\uff0c\u53d1\u73b0 main.o \u4f9d\u8d56\u4e8e main.c\uff0c\u4e8e\u662f\u4f7f\u7528\u201cgcc -c main.c\u201d\u6765\u751f\u6210\uff1b\u5176\u4ed6\u4e24\u4e2a\u6587\u4ef6\u7c7b\u4f3c\u5904\u7406\u3002</p> <p>2.\u73b0\u5728 output \u7684\u4f9d\u8d56\u6587\u4ef6\u90fd\u6709\u4e86\uff0c\u4f46\u662f output \u6587\u4ef6\u8fd8\u6ca1\u6709\uff0c\u6240\u4ee5\u4f7f\u7528\u201cgcc -o output main.o add.o sub.o\u201d\u6765\u751f\u6210 output \u6587\u4ef6\u3002\u5f53\u6211\u4eec\u4fee\u6539\u67d0\u4e00\u4e2a\u6587\u4ef6\u65f6\uff0c\u6bd4\u5982\u4e4b\u4fee\u6539 add.c \u6587\u4ef6\uff0c\u7136\u540e\u91cd\u65b0 make\uff0c\u5982\u4e0b\uff1a</p> <pre><code>$ make\ngcc -c add.c\ngcc -o output main.o add.o sub.o\n</code></pre> <p>make \u547d\u4ee4\u8fd8\u662f\u6839\u636e Makefile \u6765\u68c0\u67e5\u3001\u6267\u884c\uff1a 1.output \u4f9d\u8d56\u4e8e\u201cmain.o add.o sub.o\u201d\uff0c\u8fd9\u4e09\u4e2a\u6587\u4ef6\u90fd\u6709\u4e86\uff0cmain.o \u4f9d\u8d56\u4e8e main.c\uff0cmain.c \u6ca1\u6539\u8fc7\uff0c\u6240\u4ee5\u4e0d\u9700\u8981\u91cd\u65b0\u751f\u6210 main.o\uff1b \u4f46\u662f add.o\u7684\u4f9d\u8d56\u6587\u4ef6 add.c \u88ab\u6539\u8fc7\uff0c\u9700\u8981\u91cd\u65b0\u751f\u6210 add.o\uff0c\u4f7f\u7528\u547d\u4ee4\u201cgcc -c add.c\u201d\uff1bsub.o \u8ddf main.o \u7c7b\u4f3c\uff0c\u4e5f\u4e0d\u9700\u8981\u91cd\u65b0\u751f\u6210\u3002 2.\u73b0\u5728 output\u3001\u5b83\u7684\u4e09\u4e2a\u4f9d\u8d56\u6587\u4ef6\u90fd\u6709\u4e86\uff0c\u4f46\u662f\u5176\u4e2d\u4e00\u4e2a\u4f9d\u8d56\u6587\u4ef6 add.o \u6bd4output \u6587\u4ef6\u65b0\uff0c\u6240\u4ee5\u4f7f\u7528\u201cgcc -o output main.o add.o sub.o\u201d\u6765\u751f\u6210output \u6587\u4ef6\u3002</p>"},{"location":"Stage1-LinuxCprogrammers/MakeFile/03-variable/","title":"3.\u53d8\u91cf","text":""},{"location":"Stage1-LinuxCprogrammers/MakeFile/03-variable/#31","title":"3.1 \u53d8\u91cf\u7684\u5b9a\u4e49\u53ca\u53d6\u503c","text":"<p>Makefile \u4e5f\u652f\u6301\u53d8\u91cf\u5b9a\u4e49\uff0c\u53d8\u91cf\u7684\u5b9a\u4e49\u4e5f\u8ba9\u7684\u6211\u4eec\u7684 Makefile \u66f4\u52a0\u7b80\u5316\uff0c\u53ef\u590d\u7528\u3002 \u53d8\u91cf\u7684\u5b9a\u4e49\uff1a\u4e00\u822c\u91c7\u7528\u5927\u5199\u5b57\u6bcd\uff0c\u8d4b\u503c\u65b9\u5f0f\u50cf C \u8bed\u8a00\u7684\u8d4b\u503c\u65b9\u5f0f\u4e00\u6837\uff0c\u5982\u4e0b\uff1a</p> <pre><code>DIR = ./100ask/\n</code></pre> <p>\u53d8\u91cf\u53d6\u503c\uff1a\u4f7f\u7528\u62ec\u53f7\u5c06\u53d8\u91cf\u62ec\u8d77\u6765\u518d\u52a0\u7f8e\u5143\u7b26\uff0c\u5982\u4e0b\uff1a</p> <pre><code>FOO = $(DIR)\n</code></pre> <p>\u53d8\u91cf\u53ef\u8ba9 Makefile \u7b80\u5316\u53ef\u590d\u7528\uff0c\u4e0a\u9762\u4e2a\u7684 Makefile \u6587\u4ef6\uff0c\u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code>output: main.o add.o sub.o\ngcc -o output main.o add.o sub.o\nmain.o: main.c\ngcc -c main.c\nadd.o: add.c\ngcc -c add.c\nsub.o: sub.c\ngcc -c sub.c\nclean:\nrm *.o output\n</code></pre> <p>\u6211\u4eec\u53ef\u4ee5\u5c06\u5176\u4f18\u5316\uff0c\u5982\u4e0b\uff1a</p> <pre><code>#Makefile \u53d8\u91cf\u5b9a\u4e49\nOBJ = main.o add.o sub.o\noutput: $(OBJ)\ngcc -o output $(OBJ)\nmain.o: main.c\ngcc -c main.c\nadd.o: add.c\ngcc -c add.c\nsub.o: sub.c\ngcc -c sub.c\nclean:\nrm $(OBJ) output\n</code></pre> <p>\u6211\u4eec\u5206\u6790\u4e00\u4e0b\u4e0a\u9762\u7b80\u5316\u8fc7\u7684 Makefile\uff0c\u7b2c\u4e00\u884c\u662f\u6ce8\u91ca\uff0cMakefile \u7684\u6ce8\u91ca\u91c7\u7528\u2018#\u2019\uff0c\u800c\u4e14\u4e0d\u652f\u6301\u50cf C \u8bed\u8a00\u4e2d\u7684\u591a\u884c\u6ce8\u91ca\u3002\u7b2c\u4e8c\u884c\u6211\u4eec\u5b9a\u4e49\u4e86\u53d8\u91cf OBJ\uff0c\u5e76\u8d4b\u503c\u5b57\u7b26\u4e32\u201dmain.o\uff0cadd.o\uff0csub.o\u201c\u3002\u5176\u4e2d\u7b2c\u4e09\uff0c\u56db\uff0c\u5341\u4e09\u884c\uff0c\u4f7f\u7528\u8fd9\u4e2a\u53d8\u91cf\u3002\u8fd9\u6837\u7528\u5230\u7528\u4e00\u4e2a\u5b57\u7b26\u4e32\u7684\u5730\u65b9\u76f4\u63a5\u8c03\u7528\u8fd9\u4e2a\u53d8\u91cf\uff0c\u65e0\u9700\u91cd\u590d\u5199\u4e00\u5927\u6bb5\u5b57\u7b26\u4e32\u3002 Makefile \u9664\u4e86\u4f7f\u7528\u2018=\u2019\u8fdb\u884c\u8d4b\u503c\uff0c\u8fd8\u6709\u5176\u4ed6\u8d4b\u503c\u65b9\u5f0f\uff0c\u6bd4\u5982\u2018:=\u2019\u548c\u2018?=\u2019\uff0c\u63a5\u4e0b\u6765\u6211\u4eec\u6765\u5bf9\u6bd4\u4e00\u4e0b\u8fd9\u51e0\u79cd\u7684\u533a\u522b\uff1a</p> <p>\u8d4b\u503c\u7b26\u2018=\u2019 \u6211\u4eec\u4f7f\u7528\u4e00\u4e2a\u4f8b\u5b50\u6765\u8bf4\u660e\u8d4b\u503c\u7b26\u2018=\u2019\u7684\u7528\u6cd5\u3002Makefile \u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code>PARA = 100\nCURPARA = $(PARA)\nPARA = ask\n\nprint:\n@echo $(CURPARA)\n</code></pre> <p>\u5206\u6790\u4ee3\u7801\uff1a\u7b2c\u4e00\u884c\u5b9a\u4e49\u53d8\u91cf PARA\uff0c\u5e76\u8d4b\u503c\u4e3a\u201c100\u201d\uff0c\u7b2c\u4e8c\u884c\u5b9a\u4e49\u53d8\u91cf CURPARA\uff0c\u5e76\u8d4b\u503c\u5f15\u7528\u53d8\u91cf PARA\uff0c\u6b64\u65f6 CURPARA \u7684\u503c\u548c PARA \u7684\u503c\u662f\u4e00\u6837\u7684\uff0c\u7b2c\u4e09\u884c\uff0c\u5c06\u53d8\u91cf PARA \u7684\u53d8\u91cf\u4fee\u6539\u4e3a\u201cask\u201d\u3002\u7b2c\u516d\u884c\u8f93\u51fa CURPARA \u7684\u503c\uff0cecho \u524d\u9762\u589e\u52a0@\u7b26\u53f7\uff0c\u4ee3\u8868\u53ea\u663e\u793a\u547d\u4ee4\u7684\u7ed3\u679c\uff0c\u4e0d\u663e\u793a\u547d\u4ee4\u672c\u8eab\u3002 \u901a\u8fc7\u547d\u4ee4\u201cmake print\u201d\u6267\u884c Makefile\uff0c\u5982\u4e0b\uff1a</p> <pre><code>$ make print\nask\n</code></pre> <p>\u4ece\u7ed3\u679c\u4e0a\u770b\uff0c\u53d8\u91cf CURPARA \u7684\u503c\u5e76\u4e0d\u662f\u201c100\u201d\uff0c\u800c\u662f PARA \u7684\u6700\u540e\u4e00\u6b21\u8d4b\u503c\u3002\u4f7f\u7528\u8d4b\u503c\u7b26\u201c=\u201d\u8bbe\u7f6e\u7684\u53d8\u91cf\uff0c\u5b83\u7684\u503c\u5728\u8fd0\u884c\u65f6\u624d\u80fd\u786e\u5b9a\uff0c\u8fd9\u79f0\u4e3a\u201c\u5ef6\u65f6\u53d8\u91cf\u201d\u3002 \u5176\u5b9e\u53ef\u4ee5\u7406\u89e3\u4e3a\u5728 C \u8bed\u8a00\u4e2d\uff0c\u5b9a\u4e49\u4e00\u4e2a\u6307\u9488\u53d8\u91cf\u6307\u5411\u4e00\u4e2a\u53d8\u91cf\u7684\u5730\u5740\u3002\u5982\u4e0b\uff1a</p> <pre><code>01 int a = 10;\n02 int *b = &amp;a;\n03 a=20;\n</code></pre> <p>\u4ee3\u7801\u5206\u6790\uff1a\u6211\u4eec\u89c1\u4e0a\u9762\u7684 Makefile \u7684\u7b2c\u4e8c\u884c\u7684\u201c=\u201d\u66ff\u6362\u6210\u201c:=\u201d\uff0c\u91cd\u65b0\u7f16\u8bd1\uff0c\u5982\u4e0b\uff1a</p> <pre><code>$ make print\n100\n</code></pre> <p>\u4ece\u7ed3\u679c\u4e0a\u770b\uff0c\u53d8\u91cf CURPARA \u7684\u503c\u4e3a\u201c100\u201d\u3002\u4f7f\u7528\u201c:=\u201d\u8bbe\u7f6e\u7684\u53d8\u91cf\u88ab\u79f0\u4e3a\u201c\u5373\u65f6\u53d8\u91cf\u201d\uff0c\u5728\u8d4b\u503c\u65f6\u5c31\u786e\u5b9a\u4e86\u5b83\u7684\u503c\u3002</p> <p>\u8d4b\u503c\u7b26\u2018?=\u2019</p> <p>\u6211\u4eec\u7528\u4e24\u4e2a Makefile \u6765\u8bf4\u660e\u8d4b\u503c\u7b26\u201c?=\u201d\u7684\u7528\u6cd5\u3002\u5982\u4e0b\uff1a</p> <pre><code>\u7b2c\u4e00\u4e2a Makefile\uff1a\nPARA = 100\nPARA ?= ask\nprint:\n@echo $(PARA)\n</code></pre> <p>\u7f16\u8bd1\u7ed3\u679c\uff1a</p> <pre><code>$ make print\n100\n</code></pre> <pre><code>\u7b2c\u4e8c\u4e2a Makefile:\nPARA ?= ask\nprint:\n@echo $(PARA)\n</code></pre> <p>\u7f16\u8bd1\u7ed3\u679c\uff1a</p> <pre><code>$ make print\nask\n</code></pre> <p>\u4e0a\u9762\u7684\u4f8b\u5b50\u8bf4\u660e\uff0c\u4f7f\u7528\u201c?=\u201d\u7ed9\u53d8\u91cf\u8bbe\u7f6e\u503c\u65f6\uff0c\u5982\u679c\u8fd9\u4e2a\u53d8\u91cf\u4e4b\u524d\u6ca1\u6709\u88ab\u8bbe\u7f6e\u8fc7\uff0c\u90a3\u4e48\u201c?=\u201d\u624d\u4f1a\u8d77\u6548\u679c\uff1b\u5982\u679c\u66fe\u7ecf\u8bbe\u7f6e\u8fc7\u8fd9\u4e2a\u53d8\u91cf\uff0c\u90a3\u4e48\u201c?=\u201d\u4e0d\u4f1a\u8d77\u6548\u679c\u3002\u8d4b\u503c\u7b26\u2018+=\u2019 Makefile \u4e2d\u7684\u53d8\u91cf\u662f\u5b57\u7b26\u4e32\uff0c\u6709\u65f6\u5019\u6211\u4eec\u9700\u8981\u7ed9\u524d\u9762\u5df2\u7ecf\u5b9a\u4e49\u597d\u7684\u53d8\u91cf\u6dfb\u52a0\u4e00\u4e9b\u5b57\u7b26\u4e32\u8fdb\u53bb,\u6b64\u65f6\u5c31\u8981\u4f7f\u7528\u5230\u7b26\u53f7\u201c+=\u201d\uff0c\u6bd4\u5982\u5982\u4e0b\uff1a</p> <pre><code>OBJ = main.o add.o\nOBJ += sub.o\n</code></pre> <p>\u8fd9\u6837\u7684\u7ed3\u679c\u662f OBJ \u7684\u503c\u4e3a\uff1a\u201dmain.o\uff0cadd.o\uff0csub.o\u201c\u3002\u8bf4\u660e\u201c+=\u201d\u7528\u4f5c\u4e0e\u53d8\u91cf\u7684\u8ffd\u52a0\u3002</p>"},{"location":"Stage1-LinuxCprogrammers/MakeFile/03-variable/#32","title":"3.2 \u7cfb\u7edf\u81ea\u5e26\u53d8\u91cf","text":"<p>\u7cfb\u7edf\u81ea\u5b9a\u4e49\u4e86\u4e00\u4e9b\u53d8\u91cf\uff0c\u901a\u5e38\u90fd\u662f\u5927\u5199\uff0c\u6bd4\u5982 CC\uff0cPWD\uff0cCLFAG \u7b49\u7b49\uff0c\u6709\u4e9b\u6709\u9ed8\u8ba4\u503c\uff0c\u6709\u4e9b\u6ca1\u6709\uff0c\u6bd4\u5982\u4ee5\u4e0b\u51e0\u79cd\uff0c\u5982\u4e0b\uff1a * CPPFLAGS\uff1a\u9884\u5904\u7406\u5668\u9700\u8981\u7684\u9009\u9879\uff0c\u5982\uff1a-l * CFLAGS\uff1a\u7f16\u8bd1\u7684\u65f6\u5019\u4f7f\u7528\u7684\u53c2\u6570\uff0c-Wall -g -c * LDFLAGS\uff1a\u94fe\u63a5\u5e93\u4f7f\u7528\u7684\u9009\u9879\uff0c-L -l \u5176\u4e2d\uff1a\u9ed8\u8ba4\u503c\u53ef\u4ee5\u88ab\u4fee\u6539\uff0c\u6bd4\u5982 CC \u9ed8\u8ba4\u503c\u662f cc\uff0c\u4f46\u53ef\u4ee5\u4fee\u6539\u4e3a gcc\uff1aCC=gcc\u4f7f\u7528\u7684\u4f8b\u5b50\uff0c\u5982\u4e0b\uff1a</p> <pre><code>OBJ = main.o add.o sub.o\noutput: $(OBJ)\n    gcc -o output $(OBJ)\nmain.o: main.c\n    gcc -c main.c\nadd.o: add.c\n    gcc -c add.c\nsub.o: sub.c\n    gcc -c sub.c\n\nclean:\n    rm $(OBJ) output\n</code></pre> <p>\u4f7f\u7528\u7cfb\u7edf\u81ea\u5e26\u53d8\u91cf\uff0c\u5982\u4e0b\uff1a</p> <pre><code>CC = gcc\nOBJ = main.o add.o sub.o\noutput: $(OBJ)\n    $(CC) -o output $(OBJ)\nmain.o: main.c\n    $(CC) -c main.c\nadd.o: add.c\n    $(CC) -c add.c\nsub.o: sub.c\n    $(CC) -c sub.c\n\nclean:\n    rm $(OBJ) output\n</code></pre> <p>\u5728\u4e0a\u9762\u4f8b\u5b50\u4e2d\uff0c\u7cfb\u7edf\u53d8\u91cf CC \u4e0d\u6539\u53d8\u9ed8\u8ba4\u503c\uff0c\u4e5f\u540c\u6837\u53ef\u4ee5\u7f16\u8bd1\uff0c\u4fee\u6539\u7684\u76ee\u7684\u662f\u4e3a\u4e86\u660e\u786e\u4f7f\u7528 gcc \u7f16\u8bd1\u3002</p>"},{"location":"Stage1-LinuxCprogrammers/MakeFile/03-variable/#33","title":"3.3 \u81ea\u52a8\u53d8\u91cf","text":"<p>Makefile \u7684\u8bed\u6cd5\u63d0\u4f9b\u4e00\u4e9b\u81ea\u52a8\u53d8\u91cf\uff0c\u8fd9\u4e9b\u53d8\u91cf\u53ef\u4ee5\u8ba9\u6211\u4eec\u66f4\u52a0\u5feb\u901f\u5730\u5b8c\u6210Makefile \u7684\u7f16\u5199\uff0c\u5176\u4e2d\u81ea\u52a8\u53d8\u91cf\u53ea\u80fd\u5728\u89c4\u5219\u4e2d\u7684\u547d\u4ee4\u4f7f\u7528\uff0c\u5e38\u7528\u7684\u81ea\u52a8\u53d8\u91cf\u5982 \u4e0b\uff1a * $@\uff1a\u89c4\u5219\u4e2d\u7684\u76ee\u6807 * $&lt;\uff1a\u89c4\u5219\u4e2d\u7684\u7b2c\u4e00\u4e2a\u4f9d\u8d56\u6587\u4ef6 * $^\uff1a\u89c4\u5219\u4e2d\u7684\u6240\u6709\u4f9d\u8d56\u6587\u4ef6 \u6211\u4eec\u4e0a\u9762\u7684\u4f8b\u5b50\u7ee7\u7eed\u5b8c\u5584\uff0c\u4fee\u6539\u4e3a\u91c7\u7528\u81ea\u52a8\u53d8\u91cf\u7684\u683c\u5f0f\uff0c\u5982\u4e0b:</p> <pre><code>CC = gcc\nOBJ = main.o add.o sub.o\noutput: $(OBJ)\n$(CC) -o $@ $^\nmain.o: main.c\n$(CC) -c $&lt;\nadd.o: add.c\n$(CC) -c $&lt;\nsub.o: sub.c\n$(CC) -c $&lt;\n\nclean:\nrm $(OBJ) output\n</code></pre> <p>\u5176\u4e2d\uff1a\u7b2c 4 \u884c\\(^\u8868\u793a\u53d8\u91cf OBJ \u7684\u503c\uff0c\u5373 main.o add.o sub.o\uff0c\u7b2c\u56db\uff0c\u7b2c\u516d\uff0c\u7b2c\u516b\u884c\u7684\\)&lt;\u5206\u522b\u8868\u793a main.c add.c sub.c\u3002$@\u8868\u793a output\u3002</p>"},{"location":"Stage1-LinuxCprogrammers/MakeFile/04-Pattern_rules_pseudo-targets/","title":"4.\u6a21\u5f0f\u89c4\u5219\u4e0e\u4f2a\u76ee\u6807","text":""},{"location":"Stage1-LinuxCprogrammers/MakeFile/04-Pattern_rules_pseudo-targets/#41","title":"4.1\u6a21\u5f0f\u89c4\u5219","text":"<p>\u6a21\u5f0f\u89c4\u5219\u5b9e\u5728\u76ee\u6807\u53ca\u4f9d\u8d56\u4e2d\u4f7f\u7528%\u6765\u5339\u914d\u5bf9\u5e94\u7684\u6587\u4ef6\uff0c\u6211\u4eec\u4f9d\u65e7\u4f7f\u7528\u4e0a\u9762\u7684\u4f8b\u5b50\uff0c\u91c7\u7528\u6a21\u5f0f\u89c4\u5219\u683c\u5f0f\uff0c\u5982\u4e0b\uff1a</p> <pre><code>CC = gcc\nOBJ = main.o add.o sub.o\noutput: $(OBJ)\n    $(CC) -o $@ $^\n%.o: %.c\n    $(CC) -c $&lt;\n\nclean:\n    rm $(OBJ) output\n</code></pre> <p>\u5176\u4e2d\uff1a\u7b2c\u4e94\u884c%.o: %.\u8868\u793a\u5982\u4e0b\u3002 1.main.o \u7531 main.c \u751f\u6210 2.add.o \u7531 add.c \u751f\u6210 3.sub.o \u7531 sub.c \u751f\u6210</p>"},{"location":"Stage1-LinuxCprogrammers/MakeFile/04-Pattern_rules_pseudo-targets/#42","title":"4.2\u4f2a\u76ee\u6807","text":"<p>\u5728\u524d\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u76f4\u63a5\u6267\u884c\u201cmake\u201d\u547d\u4ee4\uff0c\u5b83\u7684\u76ee\u7684\u662f\u53bb\u6267\u884c\u7b2c 1 \u4e2a\u89c4\u5219\uff0c\u8fd9\u8ddf\u6267\u884c\u201cmake output\u201d\u7684\u6548\u679c\u662f\u4e00\u6837\u7684\u3002\u5728\u8fd9\u91cc\uff0c\u201coutput\u201d\u65e2\u662f\u89c4\u5219\u7684\u76ee\u6807\uff0c\u4e5f\u662f\u4e00\u4e2a\u5b9e\u9645\u7684\u6587\u4ef6\u3002 \u800c\u4f2a\u76ee\u6807\u662f\u4ec0\u4e48\u5462\uff1f\u5bf9\u4e8e\u4ee5\u524d\u7684\u4f8b\u5b50\uff0c\u5148\u6267\u884c make \u547d\u4ee4\uff0c\u7136\u540e\u518d\u6267\u884c\u201cmake clean\u201d\u547d\u4ee4\uff0c\u5982\u4e0b</p> <pre><code>$make\ngcc -c main.c\ngcc -c add.c\ngcc -c sub.c\ngcc -o output main.o add.o sub.o\n$make clean\nrm *.o output\n</code></pre> <p>\u4e00\u5207\u6b63\u5e38\uff01\u63a5\u7740\u6211\u4eec\u505a\u4e2a\u624b\u811a\uff0c\u5728 Makefile \u76ee\u5f55\u4e0b\u521b\u5efa\u4e00\u4e2a clean \u7684\u6587\u4ef6\uff0c\u7136\u540e\u4f9d\u65e7\u6267\u884c make \u548c make clean\uff0c\u5982\u4e0b\uff1a</p> <pre><code>$touch clean\n$make\ngcc -c main.c\ngcc -c add.c\ngcc -c sub.c\ngcc -o output main.o add.o sub.o\n$make clean\nmake: 'clean' is up to date.\n</code></pre> <p>\u4e3a\u4ec0\u4e48\u201cmake clean\u201d\u65f6\u547d\u4ee4\u6ca1\u6709\u88ab\u6267\u884c\uff1f\u56e0\u4e3a\u5df2\u7ecf\u6709\u540d\u4e3a clean \u7684\u6587\u4ef6\u4e86\uff0c\u5e76\u4e14\u5b83\u7684\u4f9d\u8d56\u662f\u7a7a\u7684\uff0c\u6267\u884c\u89c4\u5219\u7684\u6761\u4ef6\u6ca1\u6ee1\u8db3\u3002 \u4f2a\u76ee\u6807\u5c31\u662f\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u5728 clean \u524d\u9762\u589e\u52a0\u201c.PHONY:clean\u201d\uff0c\u5982\u4e0b\uff1a</p> <pre><code>CC = gcc\nOBJ = main.o add.o sub.o\noutput: $(OBJ)\n$(CC) -o $@ $^\n%.o: %.c\n$(CC) -c $&lt;\n\n.PHONY:clean\nclean:\nrm $(OBJ) output\n</code></pre> <p>\u8fd0\u884c\u7ed3\u679c\uff1a</p> <pre><code>$make\ngcc -c main.c\ngcc -c add.c\ngcc -c sub.c\ngcc -o output main.o add.o sub.o\n$make clean\nrm *.o output\n</code></pre> <p>\u5f53\u4e00\u4e2a\u76ee\u6807\u88ab\u58f0\u660e\u4e3a\u4f2a\u76ee\u6807\u540e\uff0cmake \u5728\u6267\u884c\u89c4\u5219\u65f6\u5c31\u4f1a\u9ed8\u8ba4\u5b83\u6ee1\u8db3\u6267\u884c\u6761\u4ef6\u3002 \u8fd9\u6837\u5c31\u63d0\u9ad8\u4e86 make \u7684\u6267\u884c\u6548\u7387\uff0c\u4e5f\u4e0d\u7528\u62c5\u5fc3\u7531\u4e8e\u76ee\u6807\u548c\u6587\u4ef6\u540d\u91cd\u540d\u4e86\u3002 \u4f2a\u76ee\u6807\u7684\u4e24\u5927\u597d\u5904\uff1a 1.\u907f\u514d\u53ea\u6267\u884c\u547d\u4ee4\u7684\u76ee\u6807\u548c\u5de5\u4f5c\u76ee\u5f55\u4e0b\u7684\u5b9e\u9645\u6587\u4ef6\u51fa\u73b0\u540d\u5b57\u51b2\u7a81\u3002 2.\u63d0\u9ad8\u6267\u884c Makefile \u65f6\u7684\u6548\u7387</p>"},{"location":"Stage1-LinuxCprogrammers/MakeFile/05-function/","title":"5.Makefile\u51fd\u6570","text":"<p>Makefile \u63d0\u4f9b\u4e86\u5927\u91cf\u7684\u51fd\u6570\uff0c\u51fd\u6570\u8c03\u7528\u7684\u683c\u5f0f\u5982\u4e0b\uff1a</p> <pre><code>$(function arguments)\n</code></pre> <p>\u8fd9\u91cc<code>function\u2019\u662f\u51fd\u6570\u540d\uff0c</code>arguments\u2019\u662f\u8be5\u51fd\u6570\u7684\u53c2\u6570\u3002\u53c2\u6570\u548c\u51fd\u6570\u540d\u4e4b\u95f4\u662f\u7528\u7a7a\u683c\u6216 Tab \u9694\u5f00\uff0c\u5982\u679c\u6709\u591a\u4e2a\u53c2\u6570\uff0c\u5b83\u4eec\u4e4b\u95f4\u7528\u9017\u53f7\u9694\u5f00\u3002\u8fd9\u4e9b\u7a7a\u683c\u548c\u9017\u53f7\u4e0d\u662f\u53c2\u6570\u503c\u7684\u4e00\u90e8\u5206\u3002 \u6211\u4eec\u7ecf\u5e38\u4f7f\u7528\u7684\u51fd\u6570\u4e3b\u8981\u6709\u4e24\u4e2a(wildcard\uff0cpatsubst)\uff0c\u5148\u628a\u5b83\u4eec\u5355\u72ec\u62ce\u51fa\u6765\u8bb2\u8bb2\u3002\u521b\u5efa\u4e00\u4e2a\u6587\u4ef6\u5939 src\uff0c\u5728\u91cc\u4e0b\u9762\u521b\u5efa\u4e24\u4e2a\u6587\u4ef6\uff0c100.c\uff0cask.c\u3002\u5982\u4e0b\uff1a</p> <pre><code>.\n\u251c\u2500\u2500 Makefile\n\u2514\u2500\u2500 src\n    \u251c\u2500\u2500 100.c\n    \u2514\u2500\u2500 ask.c\n</code></pre>"},{"location":"Stage1-LinuxCprogrammers/MakeFile/05-function/#51","title":"5.1\u5e38\u7528\u51fd\u6570","text":"<p>wildcard \u51fd\u6570</p> <p>\u7528\u4e8e\u67e5\u627e\u6307\u5b9a\u76ee\u5f55\u4e0b\u6307\u5b9a\u7c7b\u578b\u7684\u6587\u4ef6\uff0c\u51fd\u6570\u53c2\u6570\uff1a\u76ee\u5f55+\u6587\u4ef6\u7c7b\u578b\uff0c\u5982\u4e0b\uff1a</p> <pre><code>$(wildcard \u6307\u5b9a\u6587\u4ef6\u7c7b\u578b)\n</code></pre> <p>\u5176\u4e2d\uff0c\u6307\u5b9a\u6587\u4ef6\u7c7b\u578b\uff0c\u5982\u679c\u4e0d\u5199\u8def\u5f84\uff0c\u5219\u9ed8\u8ba4\u4e3a\u5f53\u524d\u76ee\u5f55\u67e5\u627e\uff0c\u4f8b\u5b50\u5982\u4e0b\uff1a</p> <pre><code>01 SRC = $(wildcard ./src/*.c)\n02\n03 print:\n04  @echo $(SRC)\n</code></pre> <p>\u6267\u884c\u547d\u4ee4 make\uff0c\u7ed3\u679c\u5982\u4e0b\uff1a</p> <pre><code>$ make\n./src/ask.c ./src/100.c\n</code></pre> <p>\u5176\u4e2d\uff0c\u8fd9\u6761\u89c4\u5219\u8868\u793a\uff1a\u627e\u5230\u76ee\u5f55./src \u4e0b\u6240\u6709\u540e\u7f00\u4e3a.c \u7684\u6587\u4ef6\uff0c\u5e76\u8d4b\u503c\u7ed9\u53d8\u91cfSRC\u3002\u547d\u4ee4\u6267\u884c\u5b8c\uff0cSRC \u53d8\u91cf\u7684\u503c\uff1a./src/ask.c ./src/100.c</p> <p>patsubst \u51fd\u6570</p> <p>\u7528\u4e8e\u5339\u914d\u66ff\u6362\u3002\u51fd\u6570\u53c2\u6570\uff1a\u539f\u6a21\u5f0f+\u76ee\u6807\u6a21\u5f0f+\u6587\u4ef6\u5217\u8868\uff0c\u5982\u4e0b:</p> <pre><code>$( patsubst \u539f\u6a21\u5f0f, \u76ee\u6807\u6a21\u5f0f, \u6587\u4ef6\u5217\u8868)\n</code></pre> <p>\u5176\u4e2d\uff0c\u4ece\u6587\u4ef6\u5217\u8868\u4e2d\u67e5\u627e\u51fa\u7b26\u5408\u539f\u6a21\u5f0f\u6587\u4ef6\u7c7b\u578b\u7684\u6587\u4ef6\uff0c\u7136\u540e\u4e00\u4e00\u66ff\u6362\u6210\u76ee\u6807\u6a21\u5f0f\u3002\u4e3e\u4f8b\uff1a\u5c06./src \u76ee\u5f55\u4e0b\u7684.c \u7ed3\u5c3e\u7684\u6587\u4ef6\uff0c\u66ff\u6362\u6210.o \u6587\u4ef6\uff0c\u5e76\u8d4b\u503c\u7ed9 obj\u3002 \u5982\u4e0b\uff1a</p> <pre><code>SRC = $(wildcard ./src/*.c)\nOBJ = $(patsubst %.c, %.o, $(SRC))\nprint:\n@echo $(OBJ)\n</code></pre> <p>\u6267\u884c\u547d\u4ee4 make\uff0c\u7ed3\u679c\u5982\u4e0b\uff1a</p> <pre><code>$ make\n./src/ask.o ./src/100.o\n</code></pre> <p>\u5176\u4e2d\uff0c\u8fd9\u6761\u89c4\u5219\u8868\u793a\uff1a\u628a\u53d8\u91cf\u4e2d\u6240\u6709\u540e\u7f00\u4e3a.c \u7684\u6587\u4ef6\u66ff\u6362\u4e3a.o\u3002 \u547d\u4ee4\u6267\u884c\u5b8c\uff0cOBJ \u53d8\u91cf\u7684\u503c\uff1a./src/ask.o ./src/100.o</p>"},{"location":"Stage1-LinuxCprogrammers/MakeFile/05-function/#52","title":"5.2 \u5b57\u7b26\u4e32\u66ff\u6362\u548c\u5206\u6790\u51fd\u6570","text":"<p>$(subst from,to,text)</p> <p>\u5728\u6587\u672c<code>text\u2019\u4e2d\u4f7f\u7528</code>to\u2019\u66ff\u6362\u6bcf\u4e00\u5904`from\u2019\u3002\u6bd4\u5982\uff1a</p> <pre><code>$(subst ee,EE,feet on the street)\n</code></pre> <p>\u7ed3\u679c\u4e3a\u2018fEEt on the strEEt\u2019\u3002</p> <p>$(patsubst pattern,replacement,text)</p> <p>\u5bfb\u627e<code>text\u2019\u4e2d\u7b26\u5408\u683c\u5f0f</code>pattern\u2019\u7684\u5b57\uff0c\u7528<code>replacement\u2019\u66ff\u6362\u5b83\u4eec\u3002</code>pattern\u2019\u548c`replacement\u2019\u4e2d\u53ef\u4ee5\u4f7f\u7528\u901a\u914d\u7b26\u3002\u6bd4\u5982\uff1a</p> <pre><code>$(patsubst %.c,%.o,x.c.c bar.c\uff09\n</code></pre> <p>\u7ed3\u679c\u4e3a\uff1a`x.c.o bar.o\u2019\u3002</p> <p>$(strip string) \u53bb\u6389\u524d\u5bfc\u548c\u7ed3\u5c3e\u7a7a\u683c\uff0c\u5e76\u5c06\u4e2d\u95f4\u7684\u591a\u4e2a\u7a7a\u683c\u538b\u7f29\u4e3a\u5355\u4e2a\u7a7a\u683c\u3002\u6bd4\u5982\uff1a</p> <pre><code>$(strip a b c )\n</code></pre> <p>\u7ed3\u679c\u4e3a`a b c\u2019\u3002</p> <p>$(findstring find,in)</p> <p>\u5728\u5b57\u7b26\u4e32<code>in\u2019\u4e2d\u641c\u5bfb</code>find\u2019\uff0c\u5982\u679c\u627e\u5230\uff0c\u5219\u8fd4\u56de\u503c\u662f`find\u2019\uff0c\u5426\u5219\u8fd4\u56de\u503c\u4e3a\u7a7a\u3002\u6bd4\u5982\uff1a</p> <pre><code>$(findstring a,a b c)\n$(findstring a,b c)\n</code></pre> <p>\u5c06\u5206\u522b\u4ea7\u751f\u503c<code>a\u2019\u548c</code>\u2019(\u7a7a\u5b57\u7b26\u4e32)\u3002</p> <p>$(filter pattern...,text)</p> <p>\u8fd4\u56de\u5728<code>text\u2019\u4e2d\u7531\u7a7a\u683c\u9694\u5f00\u4e14\u5339\u914d\u683c\u5f0f</code>pattern...\u2019\u7684\u5b57\uff0c\u53bb\u9664\u4e0d\u7b26\u5408\u683c\u5f0f`pattern...\u2019\u7684\u5b57\u3002\u6bd4\u5982</p> <pre><code>$(filter %.c %.s,foo.c bar.c baz.s ugh.h)\n</code></pre> <p>\u7ed3\u679c\u4e3a`foo.c bar.c baz.s\u2019\u3002</p> <p>$(filter-out pattern...,text)</p> <p>\u8fd4\u56de\u5728<code>text\u2019\u4e2d\u7531\u7a7a\u683c\u9694\u5f00\u4e14\u4e0d\u5339\u914d\u683c\u5f0f</code>pattern...\u2019\u7684\u5b57\uff0c\u53bb\u9664\u7b26\u5408\u683c\u5f0f`pattern...\u2019\u7684\u5b57\u3002\u5b83\u662f\u51fd\u6570 filter \u7684\u53cd\u51fd\u6570\u3002\u6bd4\u5982\uff1a</p> <pre><code>$(filter %.c %.s,foo.c bar.c baz.s ugh.h)\n</code></pre> <p>\u7ed3\u679c\u4e3a`ugh.h\u2019\u3002</p> <p>$(sort list)</p> <p>\u5c06\u2018list\u2019\u4e2d\u7684\u5b57\u6309\u5b57\u6bcd\u987a\u5e8f\u6392\u5e8f\uff0c\u5e76\u53bb\u6389\u91cd\u590d\u7684\u5b57\u3002\u8f93\u51fa\u7531\u5355\u4e2a\u7a7a\u683c\u9694\u5f00\u7684\u5b57\u7684\u5217\u8868\u3002\u6bd4\u5982\uff1a</p> <pre><code>$(sort foo bar lose)\n</code></pre> <p>\u8fd4\u56de\u503c\u662f\u2018bar foo lose\u2019\u3002</p>"},{"location":"Stage1-LinuxCprogrammers/MakeFile/05-function/#53","title":"5.3 \u6587\u4ef6\u540d\u51fd\u6570","text":"<p>$(dir names...)</p> <p>\u62bd\u53d6\u2018names...\u2019\u4e2d\u6bcf\u4e00\u4e2a\u6587\u4ef6\u540d\u7684\u8def\u5f84\u90e8\u5206\uff0c\u6587\u4ef6\u540d\u7684\u8def\u5f84\u90e8\u5206\u5305\u62ec\u4ece\u6587\u4ef6\u540d\u7684\u9996\u5b57\u7b26\u5230\u6700\u540e\u4e00\u4e2a\u659c\u6760(\u542b\u659c\u6760)\u4e4b\u524d\u7684\u4e00\u5207\u5b57\u7b26\u3002\u6bd4\u5982\uff1a</p> <pre><code>$(dir src/foo.c hacks)\n</code></pre> <p>\u7ed3\u679c\u4e3a\u2018src/ ./\u2019\u3002</p> <p>$(notdir names...)</p> <p>\u62bd\u53d6\u2018names...\u2019\u4e2d\u6bcf\u4e00\u4e2a\u6587\u4ef6\u540d\u4e2d\u9664\u8def\u5f84\u90e8\u5206\u5916\u4e00\u5207\u5b57\u7b26\uff08\u771f\u6b63\u7684\u6587\u4ef6\u540d\uff09\u3002\u6bd4\u5982\uff1a</p> <pre><code>$(notdir src/foo.c hacks)\n</code></pre> <p>\u7ed3\u679c\u4e3a\u2018foo.c hacks\u2019\u3002</p> <p>$(suffix names...)</p> <p>\u62bd\u53d6\u2018names...\u2019\u4e2d\u6bcf\u4e00\u4e2a\u6587\u4ef6\u540d\u7684\u540e\u7f00\u3002\u6bd4\u5982\uff1a</p> <pre><code>$(suffix src/foo.c src-1.0/bar.c hacks)\n</code></pre> <p>\u7ed3\u679c\u4e3a\u2018.c .c\u2019\u3002</p> <p>$(basename names...)</p> <p>\u62bd\u53d6\u2018names...\u2019\u4e2d\u6bcf\u4e00\u4e2a\u6587\u4ef6\u540d\u4e2d\u9664\u540e\u7f00\u5916\u4e00\u5207\u5b57\u7b26\u3002\u6bd4\u5982\uff1a</p> <pre><code>$(basename src/foo.c src-1.0/bar hacks)\n</code></pre> <p>\u7ed3\u679c\u4e3a\u2018src/foo src-1.0/bar hacks\u2019\u3002</p> <p>$(addsuffix suffix,names...)</p> <p>\u53c2\u6570\u2018names...\u2019\u662f\u4e00\u7cfb\u5217\u7684\u6587\u4ef6\u540d\uff0c\u6587\u4ef6\u540d\u4e4b\u95f4\u7528\u7a7a\u683c\u9694\u5f00\uff1bsuffix \u662f\u4e00\u4e2a\u540e\u7f00\u540d\u3002\u5c06 suffix(\u540e\u7f00)\u7684\u503c\u9644\u52a0\u5728\u6bcf\u4e00\u4e2a\u72ec\u7acb\u6587\u4ef6\u540d\u7684\u540e\u9762\uff0c\u5b8c\u6210\u540e\u5c06\u6587\u4ef6\u540d\u4e32\u8054\u8d77\u6765\uff0c\u5b83\u4eec\u4e4b\u95f4\u7528\u5355\u4e2a\u7a7a\u683c\u9694\u5f00\u3002\u6bd4\u5982\uff1a</p> <pre><code>$(addsuffix .c,foo bar)\n</code></pre> <p>\u7ed3\u679c\u4e3a\u2018foo.c bar.c\u2019\u3002</p> <p>$(addprefix prefix,names...)</p> <p>\u53c2\u6570\u2018names\u2019\u662f\u4e00\u7cfb\u5217\u7684\u6587\u4ef6\u540d\uff0c\u6587\u4ef6\u540d\u4e4b\u95f4\u7528\u7a7a\u683c\u9694\u5f00\uff1bprefix \u662f\u4e00\u4e2a\u524d\u7f00\u540d\u3002\u5c06 preffix(\u524d\u7f00)\u7684\u503c\u9644\u52a0\u5728\u6bcf\u4e00\u4e2a\u72ec\u7acb\u6587\u4ef6\u540d\u7684\u524d\u9762\uff0c\u5b8c\u6210\u540e\u5c06\u6587\u4ef6\u540d\u4e32\u8054\u8d77\u6765\uff0c\u5b83\u4eec\u4e4b\u95f4\u7528\u5355\u4e2a\u7a7a\u683c\u9694\u5f00\u3002\u6bd4\u5982\uff1a</p> <pre><code>$(addprefix src/,foo bar)\n</code></pre> <p>\u7ed3\u679c\u4e3a\u2018src/foo src/bar\u2019\u3002</p> <p>$(wildcard pattern) </p> <p>\u53c2\u6570\u2018pattern\u2019\u662f\u4e00\u4e2a\u6587\u4ef6\u540d\u683c\u5f0f\uff0c\u5305\u542b\u6709\u901a\u914d\u7b26(\u901a\u914d\u7b26\u548c shell \u4e2d\u7684\u7528\u6cd5\u4e00\u6837)\u3002\u51fd\u6570 wildcard \u7684\u7ed3\u679c\u662f\u4e00\u5217\u548c\u683c\u5f0f\u5339\u914d\u7684\u4e14\u771f\u5b9e\u5b58\u5728\u7684\u6587\u4ef6\u7684\u540d\u79f0\uff0c\u6587\u4ef6\u540d\u4e4b\u95f4\u7528\u4e00\u4e2a\u7a7a\u683c\u9694\u5f00\u3002 \u6bd4\u5982\u82e5\u5f53\u524d\u76ee\u5f55\u4e0b\u6709\u6587\u4ef6 1.c\u30012.c\u30011.h\u30012.h\uff0c\u5219:</p> <pre><code>c_src := $(wildcard *.c)\n</code></pre> <p>\u7ed3\u679c\u4e3a\u20181.c 2.c\u2019\u3002</p>"},{"location":"Stage1-LinuxCprogrammers/MakeFile/05-function/#54","title":"5.4 \u5176\u4ed6\u51fd\u6570","text":"<p>$(foreach var,list,text)</p> <p>\u524d\u4e24\u4e2a\u53c2\u6570\uff0c\u2018var\u2019\u548c\u2018list\u2019\u5c06\u9996\u5148\u6269\u5c55\uff0c\u6ce8\u610f\u6700\u540e\u4e00\u4e2a\u53c2\u6570\u2018text\u2019\uff0c\u6b64\u65f6\u4e0d\u6269\u5c55\uff1b\u63a5\u7740\uff0c\u2018list\u2019\u6269\u5c55\u6240\u5f97\u7684\u6bcf\u4e2a\u5b57\uff0c\u90fd\u8d4b\u7ed9\u2018var\u2019\u53d8\u91cf\uff1b\u7136\u540e\u2018text\u2019\u5f15\u7528\u8be5\u53d8\u91cf\u8fdb\u884c\u6269\u5c55\uff0c\u56e0\u6b64\u2018text\u2019\u6bcf\u6b21\u6269\u5c55\u90fd\u4e0d\u76f8\u540c\u3002 \u51fd\u6570\u7684\u7ed3\u679c\u662f\u7531\u7a7a\u683c\u9694\u5f00\u7684\u2018text\u2019 \u5728\u2018list\u2019\u4e2d\u591a\u6b21\u6269\u5c55\u540e\uff0c\u5f97\u5230\u7684\u65b0\u2018list\u2019\uff0c\u5c31\u662f\u8bf4\uff1a\u2018text\u2019\u591a\u6b21\u6269\u5c55\u7684\u5b57\u4e32\u8054\u8d77\u6765\uff0c\u5b57\u4e0e\u5b57\u4e4b\u95f4\u7531\u7a7a\u683c\u9694\u5f00\uff0c\u5982\u6b64\u5c31\u4ea7\u751f\u4e86\u51fd\u6570 foreach \u7684\u8fd4\u56de\u503c\u3002 \u4e0b\u9762\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\uff0c\u5c06\u53d8\u91cf\u2018files\u2019\u7684\u503c\u8bbe\u7f6e\u4e3a \u2018dirs\u2019\u4e2d\u7684\u6240\u6709\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u6587\u4ef6\u7684\u5217\u8868\uff1a</p> <pre><code>dirs := a b c d\nfiles := $(foreach dir,$(dirs),$(wildcard $(dir)/*))\n</code></pre> <p>\u8fd9\u91cc\u2018text\u2019\u662f\u2018$(wildcard $(dir)/*)\u2019\uff0c\u5b83\u7684\u6269\u5c55\u8fc7\u7a0b\u5982\u4e0b\uff1a</p> <p>a) \u7b2c\u4e00\u4e2a\u8d4b\u7ed9\u53d8\u91cf dir \u7684\u503c\u662f<code>a\u2019\uff0c\u6269\u5c55\u7ed3\u679c\u4e3a\u2018$(wildcard a/*)\u2019\uff1b b) \u7b2c\u4e8c\u4e2a\u8d4b\u7ed9\u53d8\u91cf dir \u7684\u503c\u662f</code>b\u2019\uff0c\u6269\u5c55\u7ed3\u679c\u4e3a\u2018\\((wildcard b/*)\u2019\uff1b c) \u7b2c\u4e09\u4e2a\u8d4b\u7ed9\u53d8\u91cf dir \u7684\u503c\u662f`c\u2019\uff0c\u6269\u5c55\u7ed3\u679c\u4e3a\u2018\\)(wildcard c/*)\u2019\uff1b d) \u5982\u6b64\u7ee7\u7eed\u6269\u5c55\u3002</p> <p>\u8fd9\u4e2a\u4f8b\u5b50\u548c\u4e0b\u9762\u7684\u4f8b\u6709\u5171\u540c\u7684\u7ed3\u679c\uff1a</p> <pre><code>files := $(wildcard a/* b/* c/* d/*)\n</code></pre> <p>$(if condition,then-part[,else-part])</p> <p>\u9996\u5148\u628a\u7b2c\u4e00\u4e2a\u53c2\u6570\u2018condition\u2019\u7684\u524d\u5bfc\u7a7a\u683c\u3001\u7ed3\u5c3e\u7a7a\u683c\u53bb\u6389\uff0c\u7136\u540e\u6269\u5c55\u3002\u5982\u679c\u6269\u5c55\u4e3a\u975e\u7a7a\u5b57\u7b26\u4e32\uff0c\u5219\u6761\u4ef6\u2018condition\u2019\u4e3a\u2018\u771f\u2019\uff1b\u5982\u679c\u6269\u5c55\u4e3a\u7a7a\u5b57\u7b26\u4e32\uff0c\u5219\u6761\u4ef6\u2018condition\u2019\u4e3a\u2018\u5047\u2019\u3002 \u5982\u679c\u6761\u4ef6\u2018condition\u2019\u4e3a\u2018\u771f\u2019,\u90a3\u4e48\u8ba1\u7b97\u7b2c\u4e8c\u4e2a\u53c2\u6570\u2018then-part\u2019\u7684\u503c\uff0c\u5e76\u5c06\u8be5\u503c\u4f5c\u4e3a\u6574\u4e2a\u51fd\u6570 if \u7684\u503c\u3002 \u5982\u679c\u6761\u4ef6\u2018condition\u2019\u4e3a\u2018\u5047\u2019,\u5e76\u4e14\u7b2c\u4e09\u4e2a\u53c2\u6570\u5b58\u5728\uff0c\u5219\u8ba1\u7b97\u7b2c\u4e09\u4e2a\u53c2\u6570\u2018else-part\u2019\u7684\u503c\uff0c\u5e76\u5c06\u8be5\u503c\u4f5c\u4e3a\u6574\u4e2a\u51fd\u6570 if \u7684\u503c\uff1b\u5982\u679c\u7b2c\u4e09\u4e2a\u53c2\u6570\u4e0d\u5b58\u5728\uff0c\u51fd\u6570 if \u5c06\u4ec0\u4e48\u4e5f\u4e0d\u8ba1\u7b97\uff0c\u8fd4\u56de\u7a7a\u503c\u3002 \u6ce8\u610f\uff1a\u4ec5\u80fd\u8ba1\u7b97\u2018then-part\u2019\u548c\u2018else-part\u2019\u4e8c\u8005\u4e4b\u4e00\uff0c\u4e0d\u80fd\u540c\u65f6\u8ba1\u7b97\u3002\u8fd9\u6837\u6709\u53ef\u80fd\u4ea7\u751f\u526f\u4f5c\u7528\uff08\u4f8b\u5982\u51fd\u6570 shell \u7684\u8c03\u7528\uff09\u3002</p> <p>$(origin variable)</p> <p>\u53d8\u91cf\u2018variable\u2019\u662f\u4e00\u4e2a\u67e5\u8be2\u53d8\u91cf\u7684\u540d\u79f0\uff0c\u4e0d\u662f\u5bf9\u8be5\u53d8\u91cf\u7684\u5f15\u7528\u3002\u6240\u4ee5\uff0c\u4e0d\u80fd\u91c7\u7528\u2018$\u2019\u548c\u5706\u62ec\u53f7\u7684\u683c\u5f0f\u4e66\u5199\u8be5\u53d8\u91cf\uff0c\u5f53\u7136\uff0c\u5982\u679c\u9700\u8981\u4f7f\u7528\u975e\u5e38\u91cf\u7684\u6587\u4ef6\u540d\uff0c\u53ef\u4ee5\u5728\u6587\u4ef6\u540d\u4e2d\u4f7f\u7528\u53d8\u91cf\u5f15\u7528\u3002</p> <p>\u51fd\u6570 origin \u7684\u7ed3\u679c\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u8be5\u5b57\u7b26\u4e32\u53d8\u91cf\u662f\u8fd9\u6837\u5b9a\u4e49\u7684\uff1a</p> <ul> <li>\u2018undefined'\uff1a\u5982\u679c\u53d8\u91cf\u2018variable\u2019\u4ece\u6ca1\u6709\u5b9a\u4e49\uff1b</li> <li>\u2018default'\uff1a\u53d8\u91cf\u2018variable\u2019\u662f\u7f3a\u7701\u5b9a\u4e49\uff1b</li> <li>\u2018environment'\uff1a\u53d8\u91cf\u2018variable\u2019\u4f5c\u4e3a\u73af\u5883\u53d8\u91cf\u5b9a\u4e49\uff0c\u9009\u9879\u2018-e\u2019\u6ca1\u6709\u6253\u5f00\uff1b</li> <li>\u2018environment override'\uff1a\u53d8\u91cf\u2018variable\u2019\u4f5c\u4e3a\u73af\u5883\u53d8\u91cf\u5b9a\u4e49\uff0c\u9009\u9879\u2018-e\u2019\u5df2\u6253\u5f00\uff1b</li> <li>\u2018file' \uff1a\u53d8\u91cf\u2018variable\u2019\u5728 Makefile \u4e2d\u5b9a\u4e49\uff1b</li> <li>\u2018command line'\uff1a\u53d8\u91cf\u2018variable\u2019\u5728\u547d\u4ee4\u884c\u4e2d\u5b9a\u4e49\uff1b</li> <li>\u2018override'\uff1a\u53d8\u91cf\u2018variable\u2019\u5728 Makefile \u4e2d\u7528 override \u6307\u4ee4\u5b9a\u4e49\uff1b</li> <li>\u2018automatic' \uff1a\u53d8\u91cf\u2018variable\u2019\u662f\u81ea\u52a8\u53d8\u91cf</li> </ul> <p>$(shell command arguments)</p> <p>\u51fd\u6570 shell \u662f make \u4e0e\u5916\u90e8\u73af\u5883\u7684\u901a\u8baf\u5de5\u5177\u3002\u51fd\u6570 shell \u7684\u6267\u884c\u7ed3\u679c\u548c\u5728\u63a7\u5236\u53f0\u4e0a\u6267 \u884c\u2018 command arguments \u2019\u7684 \u7ed3\u679c\u76f8\u4f3c\u3002 \u4e0d\u8fc7\u5982\u679c \u2018 command arguments\u2019\u7684\u7ed3\u679c\u542b\u6709\u6362\u884c\u7b26\uff08\u548c\u56de\u8f66\u7b26\uff09\uff0c\u5219\u5728\u51fd\u6570 shell \u7684\u8fd4\u56de\u7ed3\u679c\u4e2d\u5c06\u628a\u5b83\u4eec\u5904\u7406\u4e3a\u5355\u4e2a\u7a7a\u683c\uff0c\u82e5\u8fd4\u56de\u7ed3\u679c\u6700\u540e\u662f\u6362\u884c\u7b26\uff08\u548c\u56de\u8f66\u7b26\uff09\u5219\u88ab\u53bb\u6389\u3002 \u6bd4\u5982\u5f53\u524d\u76ee\u5f55\u4e0b\u6709\u6587\u4ef6 1.c\u30012.c\u30011.h\u30012.h\uff0c\u5219\uff1a</p> <pre><code>c_src := $(shell ls *.c)\n</code></pre> <p>\u7ed3\u679c\u4e3a\u20181.c 2.c\u2019\u3002</p>"},{"location":"Stage1-LinuxCprogrammers/MakeFile/06-examples/","title":"6.Makefile\u5b9e\u4f8b","text":"<p>\u5728\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u90fd\u662f\u628a\u5934\u6587\u4ef6\uff0c\u6e90\u6587\u4ef6\u653e\u5728\u540c\u4e00\u4e2a\u6587\u4ef6\u91cc\u9762\uff0c\u8fd9\u6837\u4e0d\u597d\u7528\u4e8e\u7ef4\u62a4\uff0c\u6240\u4ee5\u6211\u4eec\u5c06\u5176\u5206\u7c7b\uff0c\u628a\u5b83\u53d8\u5f97\u66f4\u52a0\u89c4\u8303\u4e00\u4e0b\uff0c\u628a\u6240\u6709\u7684\u5934\u6587\u4ef6\u653e\u5728\u6587\u4ef6\u5939\uff1ainc\uff0c\u628a\u6240\u6709\u7684\u6e90\u6587\u4ef6\u653e\u5728\u6587\u4ef6\u5939\uff1asrc\u3002 \u4ee3\u7801\u76ee\u5f55\u5982\u4e0b\uff1a</p> <pre><code>$ tree\n.\n\u251c\u2500\u2500 inc\n\u2502 \u251c\u2500\u2500 add.h\n\u2502 \u2514\u2500\u2500 sub.h\n\u251c\u2500\u2500 Makefile\n\u2514\u2500\u2500 src\n    \u251c\u2500\u2500 add.c\n    \u251c\u2500\u2500 main.c\n    \u2514\u2500\u2500 sub.c\n</code></pre> <p>\u5176\u4e2d Makefile \u7684\u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code>SOURCE = $(wildcard ./src/*.c)\nOBJECT = $(patsubst %.c, %.o, $(SOURCE))\nINCLUEDS = -I ./inc\n\nTARGET = 100ask\nCC = gcc\nCFLAGS = -Wall -g\n$(TARGET): $(OBJECT)\n@mkdir -p output/\n    $(CC) $^ $(CFLAGES) -o output/$(TARGET)\n%.o: %.c\n$(CC) $(INCLUEDS) $(CFLAGES) -c $&lt; -o $@\n.PHONY:clean\nclean:\n@rm -rf $(OBJECT) output/\n</code></pre> <p>\u5206\u6790\uff1a</p> <ul> <li>\u884c 1\uff1a\u83b7\u53d6\u5f53\u524d\u76ee\u5f55\u4e0b src \u6240\u6709.c \u6587\u4ef6\uff0c\u5e76\u8d4b\u503c\u7ed9\u53d8\u91cf SOURCE\u3002</li> <li>\u884c 2\uff1a\u5c06./src \u76ee\u5f55\u4e0b\u7684.c \u7ed3\u5c3e\u7684\u6587\u4ef6\uff0c\u66ff\u6362\u6210.o \u6587\u4ef6\uff0c\u5e76\u8d4b\u503c\u7ed9\u53d8\u91cfOBJECT\u3002</li> <li>\u884c 4\uff1a\u901a\u8fc7-I \u9009\u9879\u6307\u660e\u5934\u6587\u4ef6\u7684\u76ee\u5f55\uff0c\u5e76\u8d4b\u503c\u7ed9\u53d8\u91cf INCLUDES\u3002</li> <li>\u884c 6\uff1a\u6700\u7ec8\u76ee\u6807\u6587\u4ef6\u7684\u540d\u5b57 100ask\uff0c\u8d4b\u503c\u7ed9 TARGET\u3002</li> <li>\u884c 7\uff1a\u66ff\u6362 CC \u7684\u9ed8\u8ba4\u4e4b cc\uff0c\u6539\u4e3a gcc\u3002</li> <li>\u884c 8\uff1a\u5c06\u663e\u793a\u6240\u6709\u7684\u8b66\u544a\u4fe1\u606f\u9009\u9879\u548c gdb \u8c03\u8bd5\u9009\u9879\u8d4b\u503c\u7ed9\u53d8\u91cf CFLAGS\u3002</li> <li>\u884c 11\uff1a\u521b\u5efa\u76ee\u5f55 output\uff0c\u5e76\u4e14\u4e0d\u518d\u7ec8\u7aef\u73b0\u5b9e\u8be5\u6761\u547d\u4ee4\u3002</li> <li>\u884c 12\uff1a\u7f16\u8bd1\u751f\u6210\u53ef\u6267\u884c\u7a0b\u5e8f 100ask\uff0c\u5e76\u5c06\u53ef\u6267\u884c\u7a0b\u5e8f\u751f\u6210\u5230 output \u76ee\u5f55</li> <li>\u884c 15\uff1a\u5c06\u6e90\u6587\u4ef6\u751f\u6210\u5bf9\u5e94\u7684\u76ee\u6807\u6587\u4ef6\u3002</li> <li>\u884c 17\uff1a\u4f2a\u76ee\u6807\uff0c\u907f\u514d\u5f53\u524d\u76ee\u5f55\u6709\u540c\u540d\u7684 clean \u6587\u4ef6\u3002</li> <li>\u884c 19\uff1a\u7528\u4e0e\u6267\u884c\u547d\u4ee4 make clean \u65f6\u6267\u884c\u7684\u547d\u4ee4\uff0c\u5220\u9664\u7f16\u8bd1\u8fc7\u7a0b\u751f\u6210\u7684\u6587\u4ef6\u3002   \u6700\u540e\u7f16\u8bd1\u7684\u7ed3\u679c\uff0c\u5982\u4e0b:</li> </ul> <pre><code>$ make\ngcc -I ./inc -c src/main.c -o src/main.o\ngcc -I ./inc -c src/add.c -o src/add.o\ngcc -I ./inc -c src/sub.c -o src/sub.o\ngcc src/main.o src/add.o src/sub.o -o output/100ask\n$tree\n.\n\u251c\u2500\u2500 inc\n\u2502 \u251c\u2500\u2500 add.h\n\u2502 \u2514\u2500\u2500 sub.h\n\u251c\u2500\u2500 Makefile\n\u251c\u2500\u2500 output\n\u2502 \u2514\u2500\u2500 100ask\n\u2514\u2500\u2500 src\n    \u251c\u2500\u2500 add.c\n    \u251c\u2500\u2500 add.o\n    \u251c\u2500\u2500 main.c\n    \u251c\u2500\u2500 main.o\n    \u251c\u2500\u2500 sub.c\n    \u2514\u2500\u2500 sub.o\n</code></pre> <p>\u4e0a\u9762\u7684 Makefile \u6587\u4ef6\u7b97\u662f\u6bd4\u8f83\u5b8c\u5584\u4e86\uff0c\u4e0d\u8fc7\u9879\u76ee\u5f00\u53d1\u4e2d\uff0c\u4ee3\u7801\u9700\u8981\u4e0d\u65ad\u7684\u8fed\u4ee3\uff0c\u90a3\u4e48\u5fc5\u987b\u8981\u6709\u4e1c\u897f\u6765\u8bb0\u5f55\u5b83\u7684\u53d8\u5316\uff0c\u6240\u4ee5\u8fd8\u9700\u8981\u5bf9\u6700\u7ec8\u7684\u53ef\u6267\u884c\u6587\u4ef6\u6dfb\u52a0\u7248\u672c\u53f7\uff0c\u5982\u4e0b\uff1a</p> <pre><code>VERSION = 1.0.0\nSOURCE = $(wildcard ./src/*.c)\nOBJECT = $(patsubst %.c, %.o, $(SOURCE))\nINCLUEDS = -I ./inc\n\nTARGET = 100ask\nCC = gcc\nCFLAGS = -Wall -g\n\n$(TARGET): $(OBJECT)\n@mkdir -p output/\n    $(CC) $^ $(CFLAGES) -o output/$(TARGET)_$(VERSION)\n%.o: %.c\n$(CC) $(INCLUEDS) $(CFLAGES) -c $&lt; -o $@\n.PHONY:clean\nclean:\n@rm -rf $(OBJECT) output/\n</code></pre> <ul> <li>\u884c 1\uff1a\u5c06\u7248\u672c\u53f7\u8d4b\u503c\u7ed9\u53d8\u91cf VERSION\u3002</li> <li>\u884c 13\uff1a\u751f\u6210\u53ef\u6267\u884c\u6587\u4ef6\u7684\u540e\u7f00\u6dfb\u52a0\u7248\u672c\u53f7\u3002</li> </ul> <p>\u7f16\u8bd1\u7ed3\u679c\uff1a</p> <pre><code>$ tree\n.\n\u251c\u2500\u2500 inc\n\u2502   \u251c\u2500\u2500 add.h\n\u2502   \u2514\u2500\u2500 sub.h\n\u251c\u2500\u2500 Makefile\n\u251c\u2500\u2500 output\n\u2502   \u2514\u2500\u2500 100ask_1.0.0\n\u2514\u2500\u2500 src\n    \u251c\u2500\u2500 add.c\n        \u251c\u2500\u2500 add.o\n    \u251c\u2500\u2500 main.c\n    \u251c\u2500\u2500 main.o\n    \u251c\u2500\u2500 sub.c\n    \u2514\u2500\u2500 sub.o\n</code></pre>"},{"location":"Stage1-LinuxCprogrammers/ProcessThread/01-Introduction/","title":"C\u57fa\u7840","text":"<ul> <li>\u95ee\u9898\u53cd\u9988\u4ea4\u6d41\u533a https://github.com/100askTeam/Stage1_D1s-Applications/discussions/</li> </ul>"},{"location":"Stage1-LinuxCprogrammers/ProcessThread/01-Introduction/#_1","title":"\u7b80\u8ff0","text":""},{"location":"Stage1-LinuxCprogrammers/ProcessThread/01-Introduction/#_2","title":"\u7b80\u8ff0\u7b80\u8ff0","text":""},{"location":"Stage1-LinuxCprogrammers/ProcessThread/01-Introduction/#_3","title":"\u7b80\u8ff0\u7b80\u8ff0","text":""},{"location":"Stage1-LinuxCprogrammers/ProcessThread/01-Introduction/#_4","title":"\u7b80\u8ff0\u7b80\u8ff0","text":""},{"location":"Stage1-LinuxCprogrammers/ProcessThread/01-Introduction/#_5","title":"\u7b80\u8ff0\u7b80\u8ff0","text":""},{"location":"Stage1-LinuxCprogrammers/ProcessThread/01-Introduction/#_6","title":"\u7b80\u8ff0\u7b80\u8ff0","text":""},{"location":"Stage1-LinuxCprogrammers/ProcessThread/01-Introduction/#_7","title":"\u7b80\u8ff0\u7b80\u8ff0","text":""},{"location":"Stage1-LinuxCprogrammers/ProcessThread/01-Introduction/#_8","title":"\u7b80\u8ff0\u7b80\u8ff0","text":""},{"location":"Stage1-LinuxCprogrammers/ProcessThread/01-Introduction/#_9","title":"\u7b80\u8ff0\u7b80\u8ff0","text":""},{"location":"Stage1-LinuxCprogrammers/ProcessThread/01-Introduction/#_10","title":"\u7b80\u8ff0\u7b80\u8ff0","text":""},{"location":"Stage1-LinuxCprogrammers/ProcessThread/01-Introduction/#_11","title":"\u7b80\u8ff0\u7b80\u8ff0","text":""},{"location":"Stage2-Components/01-Introduction/","title":"MP157Pro-\u5f00\u53d1\u793a\u4f8b","text":"<ul> <li>\u95ee\u9898\u53cd\u9988\u4ea4\u6d41\u533a https://github.com/100askTeam/Stage3_D1s-Components/discussions/</li> </ul>"},{"location":"Stage2-Components/01-Introduction/#_1","title":"\u7b80\u8ff0","text":""},{"location":"Stage2-Components/AudioAndVideoApplications/","title":"\u97f3\u9891\u4e0e\u663e\u793a\u76f8\u5173\u7ec4\u4ef6","text":"<ul> <li> <p> IMX6ULL-Pro\u652f\u6301\u7684\u7ec4\u4ef6\u6216\u5e94\u7528\u793a\u4f8b</p> <ul> <li> LVGL8</li> <li> Qt5</li> <li> ALSA</li> <li> SDL2</li> </ul> </li> <li> <p> STM32MP157-Pro\u652f\u6301\u7684\u7ec4\u4ef6\u6216\u5e94\u7528\u793a\u4f8b</p> <ul> <li> LVGL8</li> <li> Qt5</li> <li> SDL2</li> </ul> </li> </ul>"},{"location":"Stage2-Components/NetworkingApplications/","title":"\u7f51\u7edc\u76f8\u5173\u7cfb\u5217\u7ec4\u4ef6","text":"<ul> <li> <p> IMX6ULL-Pro\u652f\u6301\u7684lib\u5e93\u6216\u5e94\u7528\u793a\u4f8b</p> <ul> <li> MQTT</li> <li> WPA</li> <li> BLUEZ</li> <li> libnl</li> </ul> </li> <li> <p> STM32MP157-Pro\u652f\u6301\u7684lib\u5e93\u6216\u5e94\u7528\u793a\u4f8b</p> <ul> <li> MQTT</li> <li> WPA</li> <li> BLUEZ</li> <li> libnl   </li> </ul> </li> </ul>"},{"location":"Stage2-Components/AudioAndVideoApplications/01-Introduction/","title":"01 Introduction","text":"<ul> <li>\u95ee\u9898\u53cd\u9988\u4ea4\u6d41\u533a https://github.com/100askTeam/Stage3_D1s-Components/discussions/</li> </ul>"},{"location":"Stage2-Components/AudioAndVideoApplications/01-Introduction/#_1","title":"\u7b80\u8ff0","text":""},{"location":"Stage2-Components/CompressorsAndDecompressors/01-Introduction/","title":"01 Introduction","text":"<ul> <li>\u95ee\u9898\u53cd\u9988\u4ea4\u6d41\u533a https://github.com/100askTeam/Stage3_D1s-Components/discussions/</li> </ul>"},{"location":"Stage2-Components/CompressorsAndDecompressors/01-Introduction/#_1","title":"\u7b80\u8ff0","text":""},{"location":"Stage2-Components/DebuggingProfilingAndBenchmark/01-Introduction/","title":"01 Introduction","text":"<ul> <li>\u95ee\u9898\u53cd\u9988\u4ea4\u6d41\u533a https://github.com/100askTeam/Stage3_D1s-Components/discussions/</li> </ul>"},{"location":"Stage2-Components/DebuggingProfilingAndBenchmark/01-Introduction/#_1","title":"\u7b80\u8ff0","text":""},{"location":"Stage2-Components/FilesystemAndFlashUtilities/01-Introduction/","title":"01 Introduction","text":"<ul> <li>\u95ee\u9898\u53cd\u9988\u4ea4\u6d41\u533a https://github.com/100askTeam/Stage3_D1s-Components/discussions/</li> </ul>"},{"location":"Stage2-Components/FilesystemAndFlashUtilities/01-Introduction/#_1","title":"\u7b80\u8ff0","text":""},{"location":"Stage2-Components/Games/01-Introduction/","title":"01 Introduction","text":"<ul> <li>\u95ee\u9898\u53cd\u9988\u4ea4\u6d41\u533a https://github.com/100askTeam/Stage3_D1s-Components/discussions/</li> </ul>"},{"location":"Stage2-Components/Games/01-Introduction/#_1","title":"\u7b80\u8ff0","text":""},{"location":"Stage2-Components/GraphicLibrariesAndApplications/LVGL8/01-Introduction/","title":"01 Introduction","text":"<ul> <li>\u95ee\u9898\u53cd\u9988\u4ea4\u6d41\u533a https://github.com/100askTeam/Stage3_D1s-Components/discussions/</li> </ul>"},{"location":"Stage2-Components/GraphicLibrariesAndApplications/LVGL8/01-Introduction/#_1","title":"\u7b80\u8ff0","text":""},{"location":"Stage2-Components/HardwareHandling/01-Introduction/","title":"01 Introduction","text":"<ul> <li>\u95ee\u9898\u53cd\u9988\u4ea4\u6d41\u533a https://github.com/100askTeam/Stage3_D1s-Components/discussions/</li> </ul>"},{"location":"Stage2-Components/HardwareHandling/01-Introduction/#_1","title":"\u7b80\u8ff0","text":""},{"location":"Stage2-Components/InterpreterLanguagesAndScripting/01-Introduction/","title":"01 Introduction","text":"<ul> <li>\u95ee\u9898\u53cd\u9988\u4ea4\u6d41\u533a https://github.com/100askTeam/Stage3_D1s-Components/discussions/</li> </ul>"},{"location":"Stage2-Components/InterpreterLanguagesAndScripting/01-Introduction/#_1","title":"\u7b80\u8ff0","text":""},{"location":"Stage2-Components/Libraries/01-Introduction/","title":"01 Introduction","text":"<ul> <li>\u95ee\u9898\u53cd\u9988\u4ea4\u6d41\u533a https://github.com/100askTeam/Stage3_D1s-Components/discussions/</li> </ul>"},{"location":"Stage2-Components/Libraries/01-Introduction/#_1","title":"\u7b80\u8ff0","text":""},{"location":"Stage2-Components/NetworkingApplications/MQTT/6ULLPro-Example/","title":"IMX6ULLPro\u5f00\u53d1\u677fMQTT\u793a\u4f8b","text":""},{"location":"Stage2-Components/NetworkingApplications/MQTT/6ULLPro-Example/#_1","title":"\u51c6\u5907\u5de5\u4f5c","text":"\u5217\u8868 \u540d\u79f0 <code>Host\u7aef</code>      Fetch resource <code>Target\u7aef</code>  Update resource"},{"location":"Stage2-Components/NetworkingApplications/MQTT/6ULLPro-Example/#_2","title":"\u83b7\u53d6\u5de5\u7a0b\u793a\u4f8b","text":"<ul> <li>\u70b9\u51fb\u83b7\u53d6\u538b\u7f29\u5305</li> <li>\u5355\u72ecclone\u4ed3\u5e93</li> </ul>"},{"location":"Stage2-Components/NetworkingApplications/MQTT/6ULLPro-Example/#_3","title":"\u7f16\u8bd1\u5f00\u53d1\u4e0a\u4f20","text":""},{"location":"Stage2-Components/NetworkingApplications/MQTT/6ULLPro-Example/#ubuntu-host","title":"\u62f7\u8d1d\u81f3ubuntu Host\u4e3b\u673a","text":""},{"location":"Stage2-Components/NetworkingApplications/MQTT/6ULLPro-Example/#_4","title":"\u7f16\u8bd1\u6e90\u7801","text":""},{"location":"Stage2-Components/NetworkingApplications/MQTT/6ULLPro-Example/#bintarget","title":"\u4e0a\u4f20bin\u81f3Target\u677f","text":""},{"location":"Stage2-Components/NetworkingApplications/MQTT/6ULLPro-Example/#_5","title":"\u5f00\u53d1\u677f\u8fd0\u884c","text":""},{"location":"Stage2-Components/NetworkingApplications/MQTT/6ULLPro-Example/#_6","title":"\u4e8c\u6b21\u5f00\u53d1","text":""},{"location":"Stage2-Components/NetworkingApplications/MQTT/MP157Pro-Example/","title":"STM32MP157Pro\u5f00\u53d1\u677fMQTT\u793a\u4f8b","text":""},{"location":"Stage2-Components/NetworkingApplications/MQTT/MP157Pro-Example/#_1","title":"\u51c6\u5907\u5de5\u4f5c","text":"\u5217\u8868 \u540d\u79f0 <code>Host\u7aef</code>      Fetch resource <code>Target\u7aef</code>  Update resource"},{"location":"Stage2-Components/NetworkingApplications/MQTT/MP157Pro-Example/#_2","title":"\u83b7\u53d6\u5de5\u7a0b\u793a\u4f8b","text":"<ul> <li>\u70b9\u51fb\u83b7\u53d6\u538b\u7f29\u5305</li> <li>\u5355\u72ecclone\u4ed3\u5e93</li> </ul>"},{"location":"Stage2-Components/NetworkingApplications/MQTT/MP157Pro-Example/#_3","title":"\u7f16\u8bd1\u5f00\u53d1\u4e0a\u4f20","text":""},{"location":"Stage2-Components/NetworkingApplications/MQTT/MP157Pro-Example/#ubuntu-host","title":"\u62f7\u8d1d\u81f3ubuntu Host\u4e3b\u673a","text":""},{"location":"Stage2-Components/NetworkingApplications/MQTT/MP157Pro-Example/#_4","title":"\u7f16\u8bd1\u6e90\u7801","text":""},{"location":"Stage2-Components/NetworkingApplications/MQTT/MP157Pro-Example/#bintarget","title":"\u4e0a\u4f20bin\u81f3Target\u677f","text":""},{"location":"Stage2-Components/NetworkingApplications/MQTT/MP157Pro-Example/#_5","title":"\u5f00\u53d1\u677f\u8fd0\u884c","text":""},{"location":"Stage2-Components/NetworkingApplications/MQTT/MP157Pro-Example/#_6","title":"\u4e8c\u6b21\u5f00\u53d1","text":""},{"location":"Stage2-Components/SystemTools/01-Introduction/","title":"01 Introduction","text":"<ul> <li>\u95ee\u9898\u53cd\u9988\u4ea4\u6d41\u533a https://github.com/100askTeam/Stage3_D1s-Components/discussions/</li> </ul>"},{"location":"Stage2-Components/SystemTools/01-Introduction/#_1","title":"\u7b80\u8ff0","text":""},{"location":"Stage3-DeviceDriver/01-Introduction/","title":"\u7b80\u8ff0","text":"<ul> <li>\u95ee\u9898\u53cd\u9988\u4ea4\u6d41\u533a https://github.com/100askTeam/Stage2_D1s-DeviceDriver/discussions/2</li> </ul>"},{"location":"Stage3-DeviceDriver/01-Introduction/#_1","title":"\u7b80\u8ff0","text":""},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/01-leddriver/","title":"led\u5b9e\u9a8c\u8bf4\u660e","text":"<ul> <li>\u5de5\u7a0b\u6240\u5728\u4ed3\u5e93\uff1ahttps://github.com/100askTeam/Stage3-DeviceDriver</li> <li>\u9ed8\u8ba4\u60c5\u51b5\u6b64\u4ed3\u5e93\u5df2\u7ecf\u63d0\u524d\u7ed9\u60a8\u653e\u5728 \u914d\u5957\u865a\u62df\u673a /home/book\u76ee\u5f55\u4e0b\u3002\u53ea\u9700\u8981\u8fdb\u5165 <code>/home/book/Stage3-DeviceDriver/IMX6ULL/01_led</code>\u8def\u5f84 \u5c31\u53ef\u4ee5\u5f00\u59cb\u60a8\u7684\u5f00\u53d1\u3002</li> </ul>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/01-leddriver/#1","title":"1.\u786c\u4ef6\u4ecb\u7ecd","text":"<p>\u672c\u8282\u5b9e\u9a8c\u4f7f\u7528\u5230 100ask_IMX6ULL-PRO \u5f00\u53d1\u677f\u4e0a\u7684 LED\u706f\u3002</p>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/01-leddriver/#2","title":"2.\u770b\u539f\u7406\u56fe\u786e\u5b9a\u5f15\u811a","text":"<p>\u6253\u5f00\u5f53\u524d\u76ee\u5f55\u7684<code>100ask_imx6ull_v1.1.pdf</code>\uff0c100ASK_IMX6ULL\u4f7f\u7528\u7684LED\u539f\u7406\u56fe\u5982\u4e0b\uff0c\u53ef\u77e5\u5f15\u811a\u662fGPIO5_3\uff1a</p> <p></p>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/01-leddriver/#3","title":"3.\u4f7f\u7528\u8bbe\u5907\u6811\u5de5\u5177","text":"<p>\u5728\u8bbe\u5907\u6811\u5de5\u5177\u4e2d\uff0c\u5982\u4e0b\u56fe\u64cd\u4f5c\uff1a</p> <p></p> <p>\u628a\u4e0b\u9762\u8fd9\u6bb5\u4ee3\u7801\u590d\u5236\u5230\u8bbe\u5907\u6811\u91cc</p> <pre><code>        BOARD_InitPinsSnvs: BOARD_InitPinsSnvsGrp {        \n        /*!&lt; Function assigned for the core: Cortex-A7[ca7] */\n            fsl,pins = &lt;\n                MX6ULL_PAD_SNVS_TAMPER3__GPIO5_IO03        0x000110A0\n            &gt;;\n        };\n</code></pre>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/01-leddriver/#4","title":"4.\u4fee\u6539\u8bbe\u5907\u6811","text":"<p>\u6765\u7684\u8fd9\u4e2a\u76ee\u5f55\u8f93\u5165\u5982\u4e0b\u6307\u4ee4\uff1a</p> <p><code>~/100ask_imx6ull-sdk/Linux-4.9.88/arch/arm/boot/dts</code></p> <p><code>vi 100ask_imx6ull-14x14.dts</code></p> <p>\u627e\u5230<code>&amp;iomuxc_snvc</code>\u8282\u70b9\u5e76\u653e\u5728<code>&amp;iomuxc_snvc</code>\u8282\u70b9\u4e0b\u9762\uff0c\u5e76\u81ea\u5df1\u4fee\u6539\u540d\u79f0\uff1a</p> <p></p> <p>\u7136\u540e\u56de\u5230 <code>/</code> **\u6839\u8282\u70b9**\u5904\u6dfb\u52a0\u5982\u4e0b\u4fe1\u606f\uff1a</p> <pre><code>    myled {\n        compatible = \"100ask,leddrv\";\n        pinctrl-names = \"default\";\n        pinctrl-0 = &lt;&amp;myled_for_gpio_subsys&gt;;\n        led-gpios = &lt;&amp;gpio5 3 GPIO_ACTIVE_LOW&gt;;\n    };\n</code></pre> <p></p>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/01-leddriver/#5","title":"5.\u7f16\u8bd1\u8bbe\u5907\u6811\u6587\u4ef6","text":"<p>\u5728\u76ee\u5f55<code>~/100ask_imx6ull-sdk/Linux-4.9.88</code>\u4e0b,\u4f7f\u7528\u547d\u4ee4<code>make dtbs</code></p> <p></p>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/01-leddriver/#6","title":"6.\u66ff\u6362\u5f00\u53d1\u677f\u4e0b\u7684\u8bbe\u5907\u6811","text":"<p>\u7136\u540e\u628a\u751f\u6210\u7684<code>arch/arm/boot/dts/100ask_imx6ull-14x14.dtb</code>\u6587\u4ef6\u590d\u5236\u5230NFS</p> <p>\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff1a</p> <pre><code>book@100ask:~/100ask_imx6ull-sdk/Linux-4.9.88$ cp arch/arm/boot/dts/100ask_imx6ull-14x14.dtb ~/nfs_rootfs/\n</code></pre> <p>\u5728\u5f00\u53d1\u677f\u4e0a\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u5373\u53ef\uff1a</p> <p>// \u751f\u6210 arch/arm/boot/dts/100ask_imx6ull-14x14.dtb\uff0c\u8bf7\u628a\u5b83\u653e\u5230\u677f\u5b50\u7684/boot \u76ee\u5f55</p> <pre><code>[root@100ask:/mnt]# cp 100ask_imx6ull-14x14.dtb /boot\n[root@100ask:/mnt]# reboot\n</code></pre>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/01-leddriver/#7","title":"7.\u786e\u5b9a\u8bbe\u5907\u6811\u8282\u70b9\u6587\u4ef6\u662f\u5426\u751f\u6210","text":"<pre><code>ls /proc/device-tree\n</code></pre>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/01-leddriver/#8makefile","title":"8.Makefile\u6587\u4ef6\u8bf4\u660e","text":"<p>\u6e90\u7801\u6587\u4ef6\u5939\u8def\u5f84\uff1a<code>IMX6ULL/01_led</code></p> <pre><code># 1. \u4f7f\u7528\u4e0d\u540c\u7684\u5f00\u53d1\u677f\u5185\u6838\u65f6, \u4e00\u5b9a\u8981\u4fee\u6539KERN_DIR\n# 2. KERN_DIR\u4e2d\u7684\u5185\u6838\u8981\u4e8b\u5148\u914d\u7f6e\u3001\u7f16\u8bd1, \u4e3a\u4e86\u80fd\u7f16\u8bd1\u5185\u6838, \u8981\u5148\u8bbe\u7f6e\u4e0b\u5217\u73af\u5883\u53d8\u91cf:\n# 2.1 ARCH,          \u6bd4\u5982: export ARCH=arm64\n# 2.2 CROSS_COMPILE, \u6bd4\u5982: export CROSS_COMPILE=aarch64-linux-gnu-\n# 2.3 PATH,          \u6bd4\u5982: export PATH=$PATH:/home/book/100ask_roc-rk3399-pc/ToolChain-6.3.1/gcc-linaro-6.3.1-2017.05-x86_64_aarch64-linux-gnu/bin \n# \u6ce8\u610f: \u4e0d\u540c\u7684\u5f00\u53d1\u677f\u4e0d\u540c\u7684\u7f16\u8bd1\u5668\u4e0a\u8ff03\u4e2a\u73af\u5883\u53d8\u91cf\u4e0d\u4e00\u5b9a\u76f8\u540c,\n#       \u8bf7\u53c2\u8003\u5404\u5f00\u53d1\u677f\u7684\u9ad8\u7ea7\u7528\u6237\u4f7f\u7528\u624b\u518c\n\nKERN_DIR = /home/book/100ask_imx6ull-sdk/Linux-4.9.88\n\nall:\n        make -C $(KERN_DIR) M=`pwd` modules \n        $(CROSS_COMPILE)gcc -o ledtest ledtest.c \n\nclean:\n        make -C $(KERN_DIR) M=`pwd` modules clean\n        rm -rf modules.order\n        rm -f ledtest\n\n# \u53c2\u8003\u5185\u6838\u6e90\u7801drivers/char/ipmi/Makefile\n# \u8981\u60f3\u628aa.c, b.c\u7f16\u8bd1\u6210ab.ko, \u53ef\u4ee5\u8fd9\u6837\u6307\u5b9a:\n# ab-y := a.o b.o\n# obj-m += ab.o\n\nobj-m += leddrv.o\n</code></pre>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/01-leddriver/#9","title":"9.\u7f16\u8bd1\u547d\u4ee4\u8bf4\u660e","text":"<p>\u5728\u5b9e\u9a8c\u76ee\u5f55\u4e0b\u8f93\u5165\u5982\u4e0b\u547d\u4ee4\u6765\u7f16\u8bd1\u9a71\u52a8\u6a21\u5757\uff1a</p> <p></p> <p>\u7f16\u8bd1\u6210\u529f\u540e\uff0c\u5c06\u751f\u6210\u7684<code>leddrv.ko</code>\u548c<code>ledtest</code> \u62f7\u8d1d\u5230NFS\uff0c\u6267\u884c\u547d\u4ee4\u5982\u4e0b\uff1a</p> <pre><code>cp ledtest *.ko ~/nfs_rootfs/\n</code></pre> <p>\u5f00\u53d1\u677f\u6302\u8f7d\u7f51\u7edc\u6587\u4ef6\u7cfb\u7edf\uff1a</p> <pre><code>[root@100ask:~]# mount -t nfs -o nolock,vers=3 192.168.5.11:/home/book/nfs_rootfs /mnt\n</code></pre>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/01-leddriver/#10","title":"10.\u52a0\u8f7d\u9a71\u52a8\u7a0b\u5e8f","text":"<p>\u5728\u5f00\u53d1\u677f\u4e0a\uff0c\u4f7f\u7528insmod\u547d\u4ee4\u52a0\u8f7d<code>leddrv.ko</code></p> <pre><code>insmod leddrv.ko\n</code></pre> <p>\u6d4b\u8bd5\u9a71\u52a8\u7a0b\u5e8f\uff1a</p> <pre><code>./led_test /dev/100ask_led0 on\n./led_test /dev/100ask_led0 off\n</code></pre> <p>\u5b9e\u9a8c\u73b0\u8c61\uff0c\u53d1\u73b0\u5f00\u53d1\u677f\u4e0a\u7684\u7eff\u8272led\u70b9\u4eae\uff1a</p> <p></p>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/01-leddriver/#11","title":"11.\u9700\u8981\u6ce8\u610f\u7684\u95ee\u9898","text":""},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/01-leddriver/#111","title":"11.1 \u89e3\u51b3\u8bbe\u5907\u6811\u5f15\u811a\u88ab\u5360\u7528","text":"<p>\u5f53\u8bbe\u5907\u6811\u5f15\u811a\u88ab\u5360\u7528\u65f6\uff0c\u53c8\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5b9e\u9a8c\u5931\u8d25</p> <p>\u8bbe\u5907\u6811\u4e2d\u5f15\u811a\u7ed9\u5360\u7528\u89e3\u51b3\u7684\u65b9\u6cd5\uff1a</p> <p>\u2460\u641c\u7d22<code>MX6ULL_PAD_SNVS_TAMPER3__GPIO5_IO03</code>\uff0c\u82e5\u53d1\u73b0\u6b64\u5f15\u811a\u5728\u5176\u4ed6\u5730\u65b9\u4e5f\u88ab\u5360\u7528</p> <p></p> <p>\u2461\u518d\u641c\u7d22<code>pinctrl_leds</code>\uff0c\u5f97\u5230\u5982\u4e0b\u4fe1\u606f\uff1a</p> <p></p> <p>\u2462\u89e3\u51b3\u529e\u6cd5\uff1a</p> <p>\u5982\u4e0b\u56fe\u5904\u52a0\u4e0a**status = \"disabled\";** \u8fd9\u53e5\u8bdd</p> <p></p>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/02-keydriver/","title":"key\u6309\u952e\u5b9e\u9a8c\u8bf4\u660e","text":"<ul> <li>\u5de5\u7a0b\u6240\u5728\u4ed3\u5e93\uff1ahttps://github.com/100askTeam/Stage3-DeviceDriver</li> <li>\u9ed8\u8ba4\u60c5\u51b5\u6b64\u4ed3\u5e93\u5df2\u7ecf\u63d0\u524d\u7ed9\u60a8\u653e\u5728 \u914d\u5957\u865a\u62df\u673a /home/book\u76ee\u5f55\u4e0b\u3002\u53ea\u9700\u8981\u8fdb\u5165 <code>/home/book/Stage3-DeviceDriver/IMX6ULL/02_key</code>\u8def\u5f84 \u5c31\u53ef\u4ee5\u5f00\u59cb\u60a8\u7684\u5f00\u53d1\u3002</li> </ul>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/02-keydriver/#1","title":"1. \u786c\u4ef6\u4ecb\u7ecd","text":"<p>\u672c\u8282\u5b9e\u9a8c\u4f7f\u7528\u5230 100ask_IMX6ULL-PRO \u5f00\u53d1\u677f\u4e0a\u7684 KEY1\u3001KEY2\u3002</p>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/02-keydriver/#2","title":"2.\u770b\u539f\u7406\u56fe\u786e\u5b9a\u5f15\u811a","text":"<p>\u6253\u5f00<code>100ask_imx6ull_v1.1.pdf</code>\uff0c100ASK_IMX6ULL\u4f7f\u7528\u7684kEY1\u3001KEY2\u539f\u7406\u56fe\u5982\u4e0b\uff0c\u53ef\u77e5\u5f15\u811a\u662f<code>GPIO5_1</code>\u4e0e<code>GPIO4_IO14</code>\uff1a</p> <p></p>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/02-keydriver/#3","title":"3.\u4fee\u6539\u8bbe\u5907\u6811\u6587\u4ef6","text":"<p>\u6765\u5230\u8fd9\u4e2a\u76ee\u5f55\u8f93\u5165\u5982\u4e0b\u6307\u4ee4\uff1a</p> <pre><code>cd ~/100ask_imx6ull-sdk/Linux-4.9.88/arch/arm/boot/dts\nvi 100ask_imx6ull-14x14.dts\n</code></pre> <p>\u5728<code>iomuxc_snvs</code>\u5b50\u8282\u70b9\u4e0b\u6dfb\u52a0\u5982\u4e0b\u4fe1\u606f\uff1a</p> <p></p> <p>\u5728<code>iomuxc</code>\u5b50\u8282\u70b9\u4e0b\u6dfb\u52a0\u5982\u4e0b\u4fe1\u606f\uff1a</p> <p></p> <p>\u5728<code>/</code>\u6839\u8282\u70b9\u4e0b\u6dfb\u52a0\u5982\u4e0b\u4fe1\u606f\uff1a</p> <pre><code>    gpio_keys_100ask {\n        compatible = \"100ask,gpio_key\";\n                gpios = &lt;&amp;gpio5 1 GPIO_ACTIVE_LOW\n                 &amp;gpio4 14 GPIO_ACTIVE_LOW&gt;;\n\n        pinctrl-names = \"default\";\n        pinctrl-0 = &lt;&amp;key1_100ask &amp;key2_100ask&gt;;\n    };  \n</code></pre> <p></p>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/02-keydriver/#4","title":"4.\u7f16\u8bd1\u8bbe\u5907\u6811","text":"<pre><code>book@100ask:~/100ask_imx6ull-sdk/Linux-4.9.88$ make dtbs\nbook@100ask:~/100ask_imx6ull-sdk/Linux-4.9.88$ cp arch/arm/boot/dts/100ask_imx6ull-14x14.dtb ~/nfs_rootfs/\n</code></pre> <p>\u628a\u8bbe\u5907\u6811\u62f7\u8d1d\u5230\u5f00\u53d1\u677f\u4e0a\u8fd0\u884c\uff1a</p> <pre><code>[root@100ask:/mnt]# cp 100ask_imx6ull-14x14.dtb /boot\n[root@100ask:/mnt]# reboot\n</code></pre>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/02-keydriver/#5","title":"5.\u67e5\u770b\u751f\u6210\u7684\u8bbe\u5907\u6811\u8282\u70b9\u4fe1\u606f","text":"<p>reboot \u4f7f\u7528\u65b0\u7684\u8bbe\u5907\u6811\u91cd\u65b0\u542f\u52a8\u4e4b\u540e\u6b63\u5e38\u60c5\u51b5\u4e0b\u4f1a\u5728\u5f00\u53d1\u677f\u7684\u201c/proc/device-tree\u201d\u76ee\u5f55\u4e0b\u751f\u6210\u201c gpio_keys_100ask\u201d\u8bbe\u5907\u6811\u8282\u70b9\u3002</p> <p></p>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/02-keydriver/#6makefile","title":"6.Makefile\u8bf4\u660e","text":"<pre><code># 1. \u4f7f\u7528\u4e0d\u540c\u7684\u5f00\u53d1\u677f\u5185\u6838\u65f6, \u4e00\u5b9a\u8981\u4fee\u6539KERN_DIR\n# 2. KERN_DIR\u4e2d\u7684\u5185\u6838\u8981\u4e8b\u5148\u914d\u7f6e\u3001\u7f16\u8bd1, \u4e3a\u4e86\u80fd\u7f16\u8bd1\u5185\u6838, \u8981\u5148\u8bbe\u7f6e\u4e0b\u5217\u73af\u5883\u53d8\u91cf:\n# 2.1 ARCH,          \u6bd4\u5982: export ARCH=arm64\n# 2.2 CROSS_COMPILE, \u6bd4\u5982: export CROSS_COMPILE=aarch64-linux-gnu-\n# 2.3 PATH,          \u6bd4\u5982: export PATH=$PATH:/home/book/100ask_roc-rk3399-pc/ToolChain-6.3.1/gcc-linaro-6.3.1-2017.05-x86_64_aarch64-linux-gnu/bin \n# \u6ce8\u610f: \u4e0d\u540c\u7684\u5f00\u53d1\u677f\u4e0d\u540c\u7684\u7f16\u8bd1\u5668\u4e0a\u8ff03\u4e2a\u73af\u5883\u53d8\u91cf\u4e0d\u4e00\u5b9a\u76f8\u540c,\n#       \u8bf7\u53c2\u8003\u5404\u5f00\u53d1\u677f\u7684\u9ad8\u7ea7\u7528\u6237\u4f7f\u7528\u624b\u518c\nKERN_DIR = # \u677f\u5b50\u6240\u7528\u5185\u6838\u6e90\u7801\u7684\u76ee\u5f55\nall:\nmake -C $(KERN_DIR) M=`pwd` modules $(CROSS_COMPILE)gcc -o button_test button_test.c\n\nclean:\nmake -C $(KERN_DIR) M=`pwd` modules clean\n    rm -rf modules.order\n\n# \u53c2\u8003\u5185\u6838\u6e90\u7801drivers/char/ipmi/Makefile\n# \u8981\u60f3\u628aa.c, b.c\u7f16\u8bd1\u6210ab.ko, \u53ef\u4ee5\u8fd9\u6837\u6307\u5b9a:\n# ab-y := a.o b.o\n# obj-m += ab.o\nobj-m += gpio_key_drv.o\n</code></pre> <p>\u5728Ubuntu\u4e0b\uff0c\u6267\u884c\u7f16\u8bd1\u547d\u4ee4</p> <p></p> <p>\u628a\u751f\u6210\u7684<code>gpio_key_drv.ko</code>\u548c<code>button_test</code>\u62f7\u8d1d\u5230NFS\u7f51\u7edc\u6587\u4ef6\u7cfb\u7edf</p>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/02-keydriver/#7","title":"7.\u52a0\u8f7d\u9a71\u52a8\u6a21\u5757\u5e76\u8fdb\u884c\u6d4b\u8bd5","text":"<p>\u52a0\u8f7d\u547d\u4ee4\uff1a</p> <pre><code>[root@100ask:~]# insmod gpio_key_drv.ko\n[root@100ask:/mnt]# ./button_test /dev/100ask_gpio_key\n</code></pre> <p>\u5b9e\u9a8c\u7ed3\u679c\uff1a</p> <p></p>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/03-sr501driver/","title":"sr501\u4eba\u4f53\u7ea2\u5916\u4f20\u611f\u5668\u5b9e\u9a8c\u8bf4\u660e","text":"<ul> <li>\u5de5\u7a0b\u6240\u5728\u4ed3\u5e93\uff1ahttps://github.com/100askTeam/Stage3-DeviceDriver</li> <li>\u9ed8\u8ba4\u60c5\u51b5\u6b64\u4ed3\u5e93\u5df2\u7ecf\u63d0\u524d\u7ed9\u60a8\u653e\u5728 \u914d\u5957\u865a\u62df\u673a /home/book\u76ee\u5f55\u4e0b\u3002\u53ea\u9700\u8981\u8fdb\u5165 <code>/home/book/Stage3-DeviceDriver/IMX6ULL/03_sr501</code>\u8def\u5f84 \u5c31\u53ef\u4ee5\u5f00\u59cb\u60a8\u7684\u5f00\u53d1\u3002</li> </ul>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/03-sr501driver/#1","title":"1.\u786c\u4ef6\u4ecb\u7ecd","text":"<p>\u6a21\u5757\u539f\u7406\u56fe\u53ca\u8d44\u6599\uff1a\u7f51\u76d8\u5f00\u53d1\u677f\u914d\u5957\u8d44\u6599<code>05_Hardware (\u539f\u7406\u56fe)/Extend_modules/\u4eba\u4f53\u7ea2\u5916\u611f\u5e94.zip</code>\u3002</p>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/03-sr501driver/#2","title":"2.\u786c\u4ef6\u4e0e\u5f00\u53d1\u677f\u8fde\u63a5\u7684\u65b9\u6cd5","text":"<p>IMX6ULL\u5148\u65ad\u7535\uff0c\u6309\u4e0b\u56fe\u6240\u793a\uff0c\u5c06\u6a21\u5757\u63d2\u5728\u6269\u5c55\u677f\u7684GPIO0\uff0c\u5c06\u6269\u5c55\u677f\u63d2\u5728\u5e95\u677f\u4e0a\u3002</p> <p>\u6ce8\u610f\uff1a\u4e3a\u4e86\u9632\u6b62\u7528\u6237\u63a5\u9519\u65b9\u5411\uff0c\u6a21\u5757\u548c\u6269\u5c55\u677f\u90fd\u6709\u4e00\u6761\u957f\u767d\u7ebf\uff0c\u8fde\u63a5\u65f6\u9700\u8981\u6a21\u5757\u4e0a\u7684\u767d\u7ebf\u548c\u6269\u5c55\u677f\u7684\u767d\u7ebf\u5728\u540c\u4e00\u4fa7\u3002</p> <p>\u6ce8\u610f\uff1a\u6ce8\u610fSR501\u6a21\u5757\u4e2d\u7ea2\u7ebf\u3001\u9ed1\u7ebf\u3001\u7eff\u7ebf\u7684\u4f4d\u7f6e\uff0c\u5982\u4e0b\u56fe\u63a5\u7ebf\u3002</p> <p></p>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/03-sr501driver/#3","title":"3.\u4fee\u6539\u8bbe\u5907\u6811","text":"<p>\u6765\u5230\u8fd9\u4e2a\u76ee\u5f55\u8f93\u5165\u5982\u4e0b\u6307\u4ee4\uff1a</p> <pre><code>cd ~/100ask_imx6ull-sdk/Linux-4.9.88/arch/arm/boot/dts\nvi 100ask_imx6ull-14x14.dts\n</code></pre> <p>\u2460\u5728<code>iomuxc</code>\u5b50\u8282\u70b9\u4e0b\u6dfb\u52a0\u5982\u4e0b\u4fe1\u606f\uff1a</p> <p></p> <p>\u2461\u5728<code>/</code>\u6839\u8282\u70b9\u4e0b\u6dfb\u52a0\u5982\u4e0b\u4fe1\u606f\uff1a</p> <p></p>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/03-sr501driver/#4","title":"4.\u7f16\u8bd1\u8bbe\u5907\u6811","text":"<pre><code>book@100ask:~/100ask_imx6ull-sdk/Linux-4.9.88$ make dtbs\nbook@100ask:~/100ask_imx6ull-sdk/Linux-4.9.88$ cp arch/arm/boot/dts/100ask_imx6ull-14x14.dtb ~/nfs_rootfs/\n</code></pre> <p>\u628a\u8bbe\u5907\u6811\u62f7\u8d1d\u5230\u5f00\u53d1\u677f\u4e0a\u8fd0\u884c\uff1a</p> <pre><code>[root@100ask:/mnt]# cp 100ask_imx6ull-14x14.dtb /boot\n[root@100ask:/mnt]# reboot\n</code></pre>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/03-sr501driver/#5","title":"5.\u67e5\u770b\u751f\u6210\u7684\u8bbe\u5907\u6811\u8282\u70b9\u4fe1\u606f","text":"<p>reboot \u4f7f\u7528\u65b0\u7684\u8bbe\u5907\u6811\u91cd\u65b0\u542f\u52a8\u4e4b\u540e\u6b63\u5e38\u60c5\u51b5\u4e0b\u4f1a\u5728\u5f00\u53d1\u677f\u7684\u201c/proc/device-tree\u201d\u76ee\u5f55\u4e0b\u751f\u6210\u201csr501\u201d\u8bbe\u5907\u6811\u8282\u70b9\u3002</p> <p></p>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/03-sr501driver/#6makefile","title":"6.Makefile\u8bf4\u660e","text":"<pre><code># 1. \u4f7f\u7528\u4e0d\u540c\u7684\u5f00\u53d1\u677f\u5185\u6838\u65f6, \u4e00\u5b9a\u8981\u4fee\u6539KERN_DIR\n# 2. KERN_DIR\u4e2d\u7684\u5185\u6838\u8981\u4e8b\u5148\u914d\u7f6e\u3001\u7f16\u8bd1, \u4e3a\u4e86\u80fd\u7f16\u8bd1\u5185\u6838, \u8981\u5148\u8bbe\u7f6e\u4e0b\u5217\u73af\u5883\u53d8\u91cf:\n# 2.1 ARCH,          \u6bd4\u5982: export ARCH=arm64\n# 2.2 CROSS_COMPILE, \u6bd4\u5982: export CROSS_COMPILE=aarch64-linux-gnu-\n# 2.3 PATH,          \u6bd4\u5982: export PATH=$PATH:/home/book/100ask_roc-rk3399-pc/ToolChain-6.3.1/gcc-linaro-6.3.1-2017.05-x86_64_aarch64-linux-gnu/bin \n# \u6ce8\u610f: \u4e0d\u540c\u7684\u5f00\u53d1\u677f\u4e0d\u540c\u7684\u7f16\u8bd1\u5668\u4e0a\u8ff03\u4e2a\u73af\u5883\u53d8\u91cf\u4e0d\u4e00\u5b9a\u76f8\u540c,\n#       \u8bf7\u53c2\u8003\u5404\u5f00\u53d1\u677f\u7684\u9ad8\u7ea7\u7528\u6237\u4f7f\u7528\u624b\u518c\nKERN_DIR =  /home/book/100ask_imx6ull-sdk/Linux-4.9.88\n\nall:\nmake -C $(KERN_DIR) M=`pwd` modules $(CROSS_COMPILE)gcc -o sr501_test sr501_test.c\nclean:\nmake -C $(KERN_DIR) M=`pwd` modules clean\n    rm -rf modules.order  sr501_test\n\n# \u53c2\u8003\u5185\u6838\u6e90\u7801drivers/char/ipmi/Makefile\n# \u8981\u60f3\u628aa.c, b.c\u7f16\u8bd1\u6210ab.ko, \u53ef\u4ee5\u8fd9\u6837\u6307\u5b9a:\n# ab-y := a.o b.o\n# obj-m += ab.o\nobj-m += sr501_drv.o\n</code></pre> <p>\u5728Ubuntu\u4e0b\uff0c\u6267\u884c\u7f16\u8bd1\u547d\u4ee4</p> <p></p> <p>\u628a\u751f\u6210\u7684<code>sr501_drv.ko</code>\u548c<code>button_test</code>\u62f7\u8d1d\u5230NFS\u7f51\u7edc\u6587\u4ef6\u7cfb\u7edf</p>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/03-sr501driver/#7","title":"7.\u52a0\u8f7d\u9a71\u52a8\u6a21\u5757\u5e76\u8fdb\u884c\u6d4b\u8bd5","text":"<p>\u52a0\u8f7d\u547d\u4ee4\uff1a</p> <pre><code>[root@100ask:/mnt]# insmod sr501_drv.ko\n</code></pre> <p>\u5b9e\u9a8c\u73b0\u8c61\uff1a</p> <p>\u5f53\u6709\u4eba\u9760\u8fd1\u7684\u65f6\u5019\uff0c\u5185\u6838\u4f1a\u6709\u6253\u5370\u4fe1\u606f\u51fa\u73b0</p> <p></p>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/04-SR04driver/","title":"SR04\u8d85\u58f0\u6ce2\u6d4b\u8ddd\u6a21\u5757\u9a71\u52a8\u5b9e\u9a8c","text":"<ul> <li>\u5de5\u7a0b\u6240\u5728\u4ed3\u5e93\uff1ahttps://github.com/100askTeam/Stage3-DeviceDriver</li> <li>\u9ed8\u8ba4\u60c5\u51b5\u6b64\u4ed3\u5e93\u5df2\u7ecf\u63d0\u524d\u7ed9\u60a8\u653e\u5728 \u914d\u5957\u865a\u62df\u673a /home/book\u76ee\u5f55\u4e0b\u3002\u53ea\u9700\u8981\u8fdb\u5165 <code>/home/book/Stage3-DeviceDriver/IMX6ULL/04_SR04</code>\u8def\u5f84 \u5c31\u53ef\u4ee5\u5f00\u59cb\u60a8\u7684\u5f00\u53d1\u3002</li> </ul>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/04-SR04driver/#1","title":"1.\u786c\u4ef6\u4ecb\u7ecd","text":"<p>\u6a21\u5757\u539f\u7406\u56fe\u53ca\u8d44\u6599\uff1a\u7f51\u76d8\u5f00\u53d1\u677f\u914d\u5957\u8d44\u6599\u201c05_Hardware (\u539f\u7406\u56fe)/Extend_modules/\u8d85\u58f0\u6ce2.zip\u201d\u3002</p>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/04-SR04driver/#2","title":"2.\u786c\u4ef6\u4e0e\u5f00\u53d1\u677f\u8fde\u63a5\u7684\u65b9\u6cd5","text":"<p>IMX6ULL\u5148\u65ad\u7535\uff0c\u6309\u4e0b\u56fe\u6240\u793a\uff0c\u5c06\u6a21\u5757\u63d2\u5728\u6269\u5c55\u677f\u7684GPIO0\uff0c\u5c06\u6269\u5c55\u677f\u63d2\u5728\u5e95\u677f\u4e0a\u3002</p> <p>\u6ce8\u610f\uff1a\u4e3a\u4e86\u9632\u6b62\u7528\u6237\u63a5\u9519\u65b9\u5411\uff0c\u6a21\u5757\u548c\u6269\u5c55\u677f\u90fd\u6709\u4e00\u6761\u957f\u767d\u7ebf\uff0c\u8fde\u63a5\u65f6\u9700\u8981\u6a21\u5757\u4e0a\u7684\u767d\u7ebf\u548c\u6269\u5c55\u677f\u7684\u767d\u7ebf\u5728\u540c\u4e00\u4fa7\u3002</p> <p>\u6ce8\u610f\uff1a\u6ce8\u610fSR04\u6a21\u5757\u4e2d\u7684\u7ea2\u7ebf\u3001\u9ed1\u7ebf\u3001\u7eff\u7ebf\u3001\u9ec4\u7ebf\u7684\u4f4d\u7f6e\uff0c\u5982\u4e0b\u56fe\u63a5\u7ebf\u3002</p> <p></p>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/04-SR04driver/#3","title":"3.\u4fee\u6539\u8bbe\u5907\u6811","text":"<p>\u6765\u5230\u8fd9\u4e2a\u76ee\u5f55\u8f93\u5165\u5982\u4e0b\u6307\u4ee4\uff1a</p> <pre><code>cd ~/100ask_imx6ull-sdk/Linux-4.9.88/arch/arm/boot/dts\nvi 100ask_imx6ull-14x14.dts\n</code></pre> <p>\u2460\u5728<code>/</code>\u6839\u8282\u70b9\u4e0b\u6dfb\u52a0\u5982\u4e0b\u4fe1\u606f\uff1a</p> <p></p>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/04-SR04driver/#4","title":"4.\u7f16\u8bd1\u8bbe\u5907\u6811","text":"<pre><code>book@100ask:~/100ask_imx6ull-sdk/Linux-4.9.88$ make dtbs\nbook@100ask:~/100ask_imx6ull-sdk/Linux-4.9.88$ cp arch/arm/boot/dts/100ask_imx6ull-14x14.dtb ~/nfs_rootfs/\n</code></pre> <p>\u628a\u8bbe\u5907\u6811\u62f7\u8d1d\u5230\u5f00\u53d1\u677f\u4e0a\u8fd0\u884c\uff1a</p> <pre><code>[root@100ask:/mnt]# cp 100ask_imx6ull-14x14.dtb /boot\n[root@100ask:/mnt]# reboot\n</code></pre>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/04-SR04driver/#5","title":"5.\u67e5\u770b\u751f\u6210\u7684\u8bbe\u5907\u6811\u8282\u70b9\u4fe1\u606f","text":"<p>reboot \u4f7f\u7528\u65b0\u7684\u8bbe\u5907\u6811\u91cd\u65b0\u542f\u52a8\u4e4b\u540e\u6b63\u5e38\u60c5\u51b5\u4e0b\u4f1a\u5728\u5f00\u53d1\u677f\u7684\u201c/proc/device-tree\u201d\u76ee\u5f55\u4e0b\u751f\u6210\u201csr501\u201d\u8bbe\u5907\u6811\u8282\u70b9\u3002</p>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/04-SR04driver/#6makefile","title":"6.Makefile\u8bf4\u660e","text":"<pre><code># 1. \u4f7f\u7528\u4e0d\u540c\u7684\u5f00\u53d1\u677f\u5185\u6838\u65f6, \u4e00\u5b9a\u8981\u4fee\u6539KERN_DIR\n# 2. KERN_DIR\u4e2d\u7684\u5185\u6838\u8981\u4e8b\u5148\u914d\u7f6e\u3001\u7f16\u8bd1, \u4e3a\u4e86\u80fd\u7f16\u8bd1\u5185\u6838, \u8981\u5148\u8bbe\u7f6e\u4e0b\u5217\u73af\u5883\u53d8\u91cf:\n# 2.1 ARCH,          \u6bd4\u5982: export ARCH=arm64\n# 2.2 CROSS_COMPILE, \u6bd4\u5982: export CROSS_COMPILE=aarch64-linux-gnu-\n# 2.3 PATH,          \u6bd4\u5982: export PATH=$PATH:/home/book/100ask_roc-rk3399-pc/ToolChain-6.3.1/gcc-linaro-6.3.1-2017.05-x86_64_aarch64-linux-gnu/bin \n# \u6ce8\u610f: \u4e0d\u540c\u7684\u5f00\u53d1\u677f\u4e0d\u540c\u7684\u7f16\u8bd1\u5668\u4e0a\u8ff03\u4e2a\u73af\u5883\u53d8\u91cf\u4e0d\u4e00\u5b9a\u76f8\u540c,\n#       \u8bf7\u53c2\u8003\u5404\u5f00\u53d1\u677f\u7684\u9ad8\u7ea7\u7528\u6237\u4f7f\u7528\u624b\u518c\nKERN_DIR = /home/book/100ask_imx6ull-sdk/Linux-4.9.88\n\nall:\nmake -C $(KERN_DIR) M=`pwd` modules $(CROSS_COMPILE)gcc -o sr04_test sr04_test.c\nclean:\nmake -C $(KERN_DIR) M=`pwd` modules clean\n    rm -rf modules.order  sr04_test\n\n# \u53c2\u8003\u5185\u6838\u6e90\u7801drivers/char/ipmi/Makefile\n# \u8981\u60f3\u628aa.c, b.c\u7f16\u8bd1\u6210ab.ko, \u53ef\u4ee5\u8fd9\u6837\u6307\u5b9a:\n# ab-y := a.o b.o\n# obj-m += ab.o\nobj-m += sr04_drv.o\n</code></pre> <p>\u5728Ubuntu\u4e0b\uff0c\u6267\u884c\u7f16\u8bd1\u547d\u4ee4<code>make</code></p> <p></p> <p>\u628a\u751f\u6210\u7684<code>sr04_drv.ko</code>\u548c<code>sr04_test</code>\u62f7\u8d1d\u5230NFS\u7f51\u7edc\u6587\u4ef6\u7cfb\u7edf</p>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/04-SR04driver/#7","title":"7.\u52a0\u8f7d\u9a71\u52a8\u6a21\u5757\u5e76\u8fdb\u884c\u6d4b\u8bd5","text":"<p>\u52a0\u8f7d\u547d\u4ee4\uff1a</p> <pre><code>insmod sr04_drv.ko\n</code></pre> <p>\u5b9e\u9a8c\u73b0\u8c61\uff1a</p> <p>\u6253\u5370\u51fa\u8ddd\u79bb</p> <p></p>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/05-dht11driver/","title":"DHT11\u6e29\u6e7f\u5ea6\u6a21\u5757\u9a71\u52a8\u5b9e\u9a8c","text":"<ul> <li>\u5de5\u7a0b\u6240\u5728\u4ed3\u5e93\uff1ahttps://github.com/100askTeam/Stage3-DeviceDriver</li> <li>\u9ed8\u8ba4\u60c5\u51b5\u6b64\u4ed3\u5e93\u5df2\u7ecf\u63d0\u524d\u7ed9\u60a8\u653e\u5728 \u914d\u5957\u865a\u62df\u673a /home/book\u76ee\u5f55\u4e0b\u3002\u53ea\u9700\u8981\u8fdb\u5165 <code>/home/book/Stage3-DeviceDriver/IMX6ULL/05_dht11</code>\u8def\u5f84 \u5c31\u53ef\u4ee5\u5f00\u59cb\u60a8\u7684\u5f00\u53d1\u3002</li> </ul>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/05-dht11driver/#1","title":"1.\u786c\u4ef6\u4ecb\u7ecd","text":"<p>DHT11\u6a21\u5757\u8f6f\u4ef6\u8bbe\u8ba1\uff1a</p> <p>DHT11\u7684\u786c\u4ef6\u7535\u8def\u6bd4\u8f83\u7b80\u5355\uff0c\u6838\u5fc3\u8981\u70b9\u5c31\u662f \u4e3b\u673a\u53d1\u7ed9DHT11\u7684\u547d\u4ee4\u683c\u5f0f\u548cDHT11\u8fd4\u56de\u7684\u6570\u636e\u683c\u5f0f\u3002</p>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/05-dht11driver/#2","title":"2.\u786c\u4ef6\u4e0e\u5f00\u53d1\u677f\u8fde\u63a5\u65b9\u6cd5","text":"<p>\u548cIRDA\u6a21\u5757\u7684\u7535\u8def\u57fa\u672c\u4e00\u81f4\uff0c\u4e3b\u673a\u901a\u8fc7\u4e00\u6761\u6570\u636e\u7ebf\u4e0eDH11\u8fde\u63a5\uff0c\u4e3b\u673a\u901a\u8fc7\u8fd9\u6761\u7ebf\u53d1\u547d\u4ee4\u7ed9DHT11\uff0cDHT11\u518d\u901a\u8fc7\u8fd9\u6761\u7ebf\u628a\u6570\u636e\u53d1\u9001\u7ed9\u4e3b\u673a\u3002</p> <p></p> <p>IMX6ULL\u5148\u65ad\u7535\uff0c\u6309\u4e0b\u56fe\u6240\u793a\uff0c\u5c06\u6a21\u5757\u63d2\u5728\u6269\u5c55\u677f\u7684GPIO0\uff0c\u5c06\u6269\u5c55\u677f\u63d2\u5728\u5e95\u677f\u4e0a\u3002</p> <p>\u6ce8\u610f\uff1a\u4e3a\u4e86\u9632\u6b62\u7528\u6237\u63a5\u9519\u65b9\u5411\uff0c\u6a21\u5757\u548c\u6269\u5c55\u677f\u90fd\u6709\u4e00\u6761\u957f\u767d\u7ebf\uff0c\u8fde\u63a5\u65f6\u9700\u8981\u6a21\u5757\u4e0a\u7684\u767d\u7ebf\u548c\u6269\u5c55\u677f\u7684\u767d\u7ebf\u5728\u540c\u4e00\u4fa7\u3002</p> <p></p>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/05-dht11driver/#3","title":"3.\u4fee\u6539\u8bbe\u5907\u6811","text":"<p>\u6765\u5230\u8fd9\u4e2a\u76ee\u5f55\u8f93\u5165\u5982\u4e0b\u6307\u4ee4\uff1a</p> <pre><code>cd ~/100ask_imx6ull-sdk/Linux-4.9.88/arch/arm/boot/dts\nvi 100ask_imx6ull-14x14.dts\n</code></pre> <p>\u2460\u5728<code>/</code>\u6839\u8282\u70b9\u4e0b\u6dfb\u52a0\u5982\u4e0b\u4fe1\u606f\uff1a</p> <p></p>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/05-dht11driver/#4","title":"4.\u7f16\u8bd1\u8bbe\u5907\u6811","text":"<pre><code>book@100ask:~/100ask_imx6ull-sdk/Linux-4.9.88$ make dtbs\nbook@100ask:~/100ask_imx6ull-sdk/Linux-4.9.88$ cp arch/arm/boot/dts/100ask_imx6ull-14x14.dtb ~/nfs_rootfs/\n</code></pre> <p>\u628a\u8bbe\u5907\u6811\u62f7\u8d1d\u5230\u5f00\u53d1\u677f\u4e0a\u8fd0\u884c\uff1a</p> <pre><code>[root@100ask:/mnt]# cp 100ask_imx6ull-14x14.dtb /boot\n[root@100ask:/mnt]# reboot\n</code></pre>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/05-dht11driver/#5","title":"5.\u67e5\u770b\u751f\u6210\u7684\u8bbe\u5907\u6811\u8282\u70b9\u4fe1\u606f","text":"<p>reboot \u4f7f\u7528\u65b0\u7684\u8bbe\u5907\u6811\u91cd\u65b0\u542f\u52a8\u4e4b\u540e\u6b63\u5e38\u60c5\u51b5\u4e0b\u4f1a\u5728\u5f00\u53d1\u677f\u7684\u201c/proc/device-tree\u201d\u76ee\u5f55\u4e0b\u751f\u6210\u201cdht11\u201d\u8bbe\u5907\u6811\u8282\u70b9\u3002</p> <pre><code>ls /proc/device-tree\n</code></pre>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/05-dht11driver/#6makefile","title":"6.Makefile\u8bf4\u660e","text":"<pre><code># 1. \u4f7f\u7528\u4e0d\u540c\u7684\u5f00\u53d1\u677f\u5185\u6838\u65f6, \u4e00\u5b9a\u8981\u4fee\u6539KERN_DIR\n# 2. KERN_DIR\u4e2d\u7684\u5185\u6838\u8981\u4e8b\u5148\u914d\u7f6e\u3001\u7f16\u8bd1, \u4e3a\u4e86\u80fd\u7f16\u8bd1\u5185\u6838, \u8981\u5148\u8bbe\u7f6e\u4e0b\u5217\u73af\u5883\u53d8\u91cf:\n# 2.1 ARCH,          \u6bd4\u5982: export ARCH=arm64\n# 2.2 CROSS_COMPILE, \u6bd4\u5982: export CROSS_COMPILE=aarch64-linux-gnu-\n# 2.3 PATH,          \u6bd4\u5982: export PATH=$PATH:/home/book/100ask_roc-rk3399-pc/ToolChain-6.3.1/gcc-linaro-6.3.1-2017.05-x86_64_aarch64-linux-gnu/bin \n# \u6ce8\u610f: \u4e0d\u540c\u7684\u5f00\u53d1\u677f\u4e0d\u540c\u7684\u7f16\u8bd1\u5668\u4e0a\u8ff03\u4e2a\u73af\u5883\u53d8\u91cf\u4e0d\u4e00\u5b9a\u76f8\u540c,\n#       \u8bf7\u53c2\u8003\u5404\u5f00\u53d1\u677f\u7684\u9ad8\u7ea7\u7528\u6237\u4f7f\u7528\u624b\u518c\n#KERN_DIR =  /home/book/100ask_stm32mp157_pro-sdk/Linux-5.4\nKERN_DIR =  /home/book/100ask_imx6ull-sdk/Linux-4.9.88\n\nall:\nmake -C $(KERN_DIR) M=`pwd` modules $(CROSS_COMPILE)gcc -o dht11_test dht11_test.c\nclean:\nmake -C $(KERN_DIR) M=`pwd` modules clean\n    rm -rf modules.order  dht11_test\n\n# \u53c2\u8003\u5185\u6838\u6e90\u7801drivers/char/ipmi/Makefile\n# \u8981\u60f3\u628aa.c, b.c\u7f16\u8bd1\u6210ab.ko, \u53ef\u4ee5\u8fd9\u6837\u6307\u5b9a:\n# ab-y := a.o b.o\n# obj-m += ab.o\nobj-m += dht11_drv.o\n</code></pre> <p>\u628a\u751f\u6210\u7684<code>dht11_drv.ko</code>\u548c<code>dht11_test</code>\u62f7\u8d1d\u5230NFS\u7f51\u7edc\u6587\u4ef6\u7cfb\u7edf</p> <p>\u6267\u884c\u547d\u4ee4\uff1a</p> <pre><code>book@100ask:~/IMX6ULL/05_dht11$ cp dht11_test *.ko ~/nfs_rootfs/\n</code></pre>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/05-dht11driver/#7","title":"7.\u52a0\u8f7d\u9a71\u52a8\u6a21\u5757\u5e76\u8fdb\u884c\u6d4b\u8bd5","text":"<pre><code>[root@100ask:/mnt]# insmod dht11_drv.ko\n[root@100ask:/mnt]# ./dht11_test /dev/mydht11\n</code></pre> <p>\u5b9e\u9a8c\u7ed3\u679c\u5982\u4e0b\uff1a</p> <p></p>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/06-ds18b20driver/","title":"DS18B20\u6e29\u5ea6\u6a21\u5757\u9a71\u52a8\u5b9e\u9a8c","text":"<ul> <li>\u5de5\u7a0b\u6240\u5728\u4ed3\u5e93\uff1ahttps://github.com/100askTeam/Stage3-DeviceDriver</li> <li>\u9ed8\u8ba4\u60c5\u51b5\u6b64\u4ed3\u5e93\u5df2\u7ecf\u63d0\u524d\u7ed9\u60a8\u653e\u5728 \u914d\u5957\u865a\u62df\u673a /home/book\u76ee\u5f55\u4e0b\u3002\u53ea\u9700\u8981\u8fdb\u5165 <code>/home/book/Stage3-DeviceDriver/IMX6ULL/06_ds18b20</code>\u8def\u5f84 \u5c31\u53ef\u4ee5\u5f00\u59cb\u60a8\u7684\u5f00\u53d1\u3002</li> </ul>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/06-ds18b20driver/#1","title":"1.\u786c\u4ef6\u4ecb\u7ecd","text":"<p>\u6a21\u5757\u539f\u7406\u56fe\u53ca\u8d44\u6599\uff1a\u7f51\u76d8\u5f00\u53d1\u677f\u914d\u5957\u8d44\u6599\u201c05_Hardware (\u539f\u7406\u56fe)/Extend_modules/ds18b20.zip\u201d\u3002</p>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/06-ds18b20driver/#2","title":"2.\u786c\u4ef6\u4e0e\u5f00\u53d1\u677f\u8fde\u63a5\u65b9\u6cd5","text":"<p>DS18B20\u4e5f\u4f7f\u7528\u7684\u662f\u201c1-Wire\u5355\u603b\u7ebf\u201d\uff0c\u53ea\u901a\u8fc7\u4e00\u6761\u6570\u636e\u7ebf\u4f20\u8f93\u6570\u636e\uff0c\u65e2\u8981\u63a7\u5236\u5668\u53d1\u9001\u6570\u636e\u7ed9\u82af\u7247\uff0c\u53c8\u8981\u901a\u8fc7\u82af\u7247\u53d1\u9001\u6570\u636e\u7ed9\u63a7\u5236\u5668\uff0c\u662f\u53cc\u5411\u4f20\u8f93\u6570\u636e\u3002</p> <p>DS18B20\u7684\u786c\u4ef6\u8bbe\u8ba1\u7535\u8def\u4e0e\u524d\u9762\u7684DHT11\u57fa\u672c\u4e00\u81f4\uff0c\u539f\u7406\u56fe\u5982\u4e0b\uff1a</p> <p></p> <p>IMX6ULL\u5148\u65ad\u7535\uff0c\u6309\u4e0b\u56fe\u6240\u793a\uff0c\u5c06\u6a21\u5757\u63d2\u5728\u6269\u5c55\u677f\u7684GPIO0\uff0c\u5c06\u6269\u5c55\u677f\u63d2\u5728\u5e95\u677f\u4e0a\u3002</p> <p>\u6ce8\u610f\uff1a\u4e3a\u4e86\u9632\u6b62\u7528\u6237\u63a5\u9519\u65b9\u5411\uff0c\u6a21\u5757\u548c\u6269\u5c55\u677f\u90fd\u6709\u4e00\u6761\u957f\u767d\u7ebf\uff0c\u8fde\u63a5\u65f6\u9700\u8981\u6a21\u5757\u4e0a\u7684\u767d\u7ebf\u548c\u6269\u5c55\u677f\u7684\u767d\u7ebf\u5728\u540c\u4e00\u4fa7\u3002</p> <p></p>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/06-ds18b20driver/#3","title":"3.\u4fee\u6539\u8bbe\u5907\u6811","text":"<p>\u5728\u8bbe\u5907\u6811\u7684\u6839\u8282\u70b9\u4e0b\u6dfb\u52a0\u5982\u4e0b\u4fe1\u606f\uff1a</p> <pre><code>   ds18b20 {  /* for imx6ull */\n        compatible = \"100ask,ds18b20\";\n        gpios = &lt;&amp;gpio4 19 GPIO_ACTIVE_HIGH&gt;;\n        /* test-gpios = &lt;&amp;gpio4 23 GPIO_ACTIVE_HIGH&gt;; */\n    };\n</code></pre>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/06-ds18b20driver/#4","title":"4.\u7f16\u8bd1\u8bbe\u5907\u6811","text":"<pre><code>book@100ask:~/100ask_imx6ull-sdk/Linux-4.9.88$ make dtbs\nbook@100ask:~/100ask_imx6ull-sdk/Linux-4.9.88$ cp arch/arm/boot/dts/100ask_imx6ull-14x14.dtb ~/nfs_rootfs/\n</code></pre> <p>\u628a\u8bbe\u5907\u6811\u62f7\u8d1d\u5230\u5f00\u53d1\u677f\u4e0a\u8fd0\u884c\uff1a</p> <pre><code>[root@100ask:/mnt]# cp 100ask_imx6ull-14x14.dtb /boot\n[root@100ask:/mnt]# reboot\n</code></pre>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/06-ds18b20driver/#5","title":"5.\u67e5\u770b\u751f\u6210\u7684\u8bbe\u5907\u6811\u8282\u70b9\u4fe1\u606f","text":"<p>reboot \u4f7f\u7528\u65b0\u7684\u8bbe\u5907\u6811\u91cd\u65b0\u542f\u52a8\u4e4b\u540e\u6b63\u5e38\u60c5\u51b5\u4e0b\u4f1a\u5728\u5f00\u53d1\u677f\u7684\u201c/proc/device-tree\u201d\u76ee\u5f55\u4e0b\u751f\u6210\"ds18b20\"\u8bbe\u5907\u6811\u8282\u70b9\u3002</p>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/06-ds18b20driver/#6makefile","title":"6.Makefile\u8bf4\u660e","text":"<pre><code># 1. \u4f7f\u7528\u4e0d\u540c\u7684\u5f00\u53d1\u677f\u5185\u6838\u65f6, \u4e00\u5b9a\u8981\u4fee\u6539KERN_DIR\n# 2. KERN_DIR\u4e2d\u7684\u5185\u6838\u8981\u4e8b\u5148\u914d\u7f6e\u3001\u7f16\u8bd1, \u4e3a\u4e86\u80fd\u7f16\u8bd1\u5185\u6838, \u8981\u5148\u8bbe\u7f6e\u4e0b\u5217\u73af\u5883\u53d8\u91cf:\n# 2.1 ARCH,          \u6bd4\u5982: export ARCH=arm64\n# 2.2 CROSS_COMPILE, \u6bd4\u5982: export CROSS_COMPILE=aarch64-linux-gnu-\n# 2.3 PATH,          \u6bd4\u5982: export PATH=$PATH:/home/book/100ask_roc-rk3399-pc/ToolChain-6.3.1/gcc-linaro-6.3.1-2017.05-x86_64_aarch64-linux-gnu/bin \n# \u6ce8\u610f: \u4e0d\u540c\u7684\u5f00\u53d1\u677f\u4e0d\u540c\u7684\u7f16\u8bd1\u5668\u4e0a\u8ff03\u4e2a\u73af\u5883\u53d8\u91cf\u4e0d\u4e00\u5b9a\u76f8\u540c,\n#       \u8bf7\u53c2\u8003\u5404\u5f00\u53d1\u677f\u7684\u9ad8\u7ea7\u7528\u6237\u4f7f\u7528\u624b\u518c\n#KERN_DIR =  /home/book/100ask_stm32mp157_pro-sdk/Linux-5.4\nKERN_DIR =  /home/book/100ask_imx6ull-sdk/Linux-4.9.88\n\nall:\nmake -C $(KERN_DIR) M=`pwd` modules $(CROSS_COMPILE)gcc -o ds18b20_test ds18b20_test.c\nclean:\nmake -C $(KERN_DIR) M=`pwd` modules clean\n    rm -rf modules.order  ds18b20_test\n\n# \u53c2\u8003\u5185\u6838\u6e90\u7801drivers/char/ipmi/Makefile\n# \u8981\u60f3\u628aa.c, b.c\u7f16\u8bd1\u6210ab.ko, \u53ef\u4ee5\u8fd9\u6837\u6307\u5b9a:\n# ab-y := a.o b.o\n# obj-m += ab.o\nobj-m += ds18b20_drv.o\n</code></pre> <p>\u5728Ubuntu\u4e0b\uff0c\u6267\u884c\u7f16\u8bd1\u547d\u4ee4<code>make</code>\uff0c\u5e76\u62f7\u8d1d\u5230\u5f00\u53d1\u677f\u4e0a\u8fd0\u884c\uff1a</p> <pre><code>cp ds18b20_test *.ko ~/nfs_rootfs/\n</code></pre>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/06-ds18b20driver/#7","title":"7.\u52a0\u8f7d\u9a71\u52a8\u6a21\u5757\u5e76\u8fdb\u884c\u6d4b\u8bd5","text":"<pre><code>[root@100ask:/mnt]# insmod ds18b20_drv.ko\n[root@100ask:/mnt]# ./ds18b20_test /dev/myds18b20\n</code></pre>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/07-hs0038driver/","title":"IRDA\u7ea2\u5916\u9065\u63a7\u6a21\u5757\u9a71\u52a8\u5b9e\u9a8c","text":"<ul> <li>\u5de5\u7a0b\u6240\u5728\u4ed3\u5e93\uff1ahttps://github.com/100askTeam/Stage3-DeviceDriver</li> <li>\u9ed8\u8ba4\u60c5\u51b5\u6b64\u4ed3\u5e93\u5df2\u7ecf\u63d0\u524d\u7ed9\u60a8\u653e\u5728 \u914d\u5957\u865a\u62df\u673a /home/book\u76ee\u5f55\u4e0b\u3002\u53ea\u9700\u8981\u8fdb\u5165 <code>/home/book/Stage3-DeviceDriver/IMX6ULL/07_hs0038</code>\u8def\u5f84 \u5c31\u53ef\u4ee5\u5f00\u59cb\u60a8\u7684\u5f00\u53d1\u3002</li> </ul> <p>\u7ea2\u5916\u9065\u63a7\u7b80\u4ecb</p> <p>\u7ea2\u5916\u9065\u63a7\u88ab\u5e7f\u6cdb\u5e94\u7528\u4e8e\u5bb6\u7528\u7535\u5668\u3001\u5de5\u4e1a\u63a7\u5236\u548c\u667a\u80fd\u4eea\u5668\u7cfb\u7edf\u4e2d\uff0c\u50cf\u6211\u4eec\u719f\u77e5\u7684\u6709\u7535\u89c6\u673a\u76d2\u5b50\u9065\u63a7\u5668\u3001\u7a7a\u8c03\u9065\u63a7\u5668\u3002\u7ea2\u5916\u9065\u63a7\u5668\u7cfb\u7edf\u5206\u4e3a\u53d1\u9001\u7aef\u548c\u63a5\u6536\u7aef\uff0c\u5982\u56fe\u4e0b\u56fe\u6240\u793a\u3002</p> <p></p> <p>\u53d1\u9001\u7aef\u5c31\u662f\u7ea2\u5916\u9065\u63a7\u5668\uff0c\u4e0a\u9762\u6709\u8bb8\u591a\u6309\u952e\uff0c\u5f53\u6211\u4eec\u6309\u4e0b\u9065\u63a7\u5668\u6309\u952e\u65f6\uff0c\u9065\u63a7\u5668\u5185\u90e8\u7535\u8def\u4f1a\u8fdb\u884c\u7f16\u7801\u548c\u8c03\u5236\uff0c\u518d\u901a\u8fc7\u7ea2\u5916\u53d1\u5c04\u5934\uff0c\u5c06\u4fe1\u53f7\u4ee5\u8089\u773c\u4e0d\u53ef\u89c1\u7684\u7ea2\u5916\u7ebf\u53d1\u5c04\u51fa\u53bb\u3002\u7ea2\u5916\u7ebf\u7ebf\u867d\u7136\u8089\u773c\u4e0d\u53ef\u89c1\uff0c\u4f46\u53ef\u4ee5\u901a\u8fc7\u624b\u673a\u6444\u50cf\u5934\u770b\u5230\uff0c\u5e38\u7528\u8be5\u65b9\u6cd5\u68c0\u67e5\u9065\u63a7\u5668\u662f\u5426\u6b63\u5e38\u5de5\u4f5c\u3002</p> <p>\u63a5\u6536\u7aef\u662f\u4e00\u4e2a\u7ea2\u5916\u63a5\u6536\u5934\uff0c\u6536\u5230\u7ea2\u5916\u4fe1\u53f7\u540e\uff0c\u5185\u90e8\u7535\u8def\u4f1a\u8fdb\u884c\u4fe1\u53f7\u653e\u5927\u548c\u89e3\u8c03\uff0c\u518d\u5c06\u6570\u636e\u4f20\u7ed9\u677f\u5b50\u4e0a\u7684GPIO\uff0c\u677f\u5b50\u6536\u5230\u6570\u636e\u540e\u518d\u89e3\u7801\u624d\u80fd\u786e\u5b9a\u662f\u54ea\u4e2a\u6309\u952e\u88ab\u6309\u4e0b\u3002</p>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/07-hs0038driver/#1","title":"1.\u786c\u4ef6\u4ecb\u7ecd","text":"<p>\u6a21\u5757\u539f\u7406\u56fe\u53ca\u8d44\u6599\uff1a\u7f51\u76d8\u5f00\u53d1\u677f\u914d\u5957\u8d44\u6599\u201c05_Hardware (\u539f\u7406\u56fe)/Extend_modules/irda.zip\u201d\u3002</p> <p></p>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/07-hs0038driver/#2","title":"2.\u786c\u4ef6\u4e0e\u5f00\u53d1\u677f\u8fde\u63a5\u65b9\u6cd5","text":"<p>IMX6ULL\u5148\u65ad\u7535\uff0c\u6309\u4e0b\u56fe\u6240\u793a\uff0c\u5c06\u6a21\u5757\u63d2\u5728\u6269\u5c55\u677f\u7684GPIO0\uff0c\u5c06\u6269\u5c55\u677f\u63d2\u5728\u5e95\u677f\u4e0a\u3002</p> <p>\u6ce8\u610f\uff1a\u4e3a\u4e86\u9632\u6b62\u7528\u6237\u63a5\u9519\u65b9\u5411\uff0c\u6a21\u5757\u548c\u6269\u5c55\u677f\u90fd\u6709\u4e00\u6761\u957f\u767d\u7ebf\uff0c\u8fde\u63a5\u65f6\u9700\u8981\u6a21\u5757\u4e0a\u7684\u767d\u7ebf\u548c\u6269\u5c55\u677f\u7684\u767d\u7ebf\u5728\u540c\u4e00\u4fa7\u3002</p> <p>\u7136\u540e\u51c6\u5907\u597d\u914d\u5957\u7684\u7ea2\u5916\u9065\u63a7\u5668\uff0c\u5982\u679c\u662f\u7b2c\u4e00\u6b21\u4f7f\u7528\u7ea2\u5916\u9065\u63a7\u5668\uff0c\u8981\u5148\u53d6\u51fa\u7535\u6c60\u4e0a\u7684\u9694\u79bb\u8584\u819c\u3002</p> <p></p> <p></p>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/07-hs0038driver/#3","title":"3.\u4fee\u6539\u8bbe\u5907\u6811","text":"<p>\u5728\u8bbe\u5907\u6811\u7684\u6839\u8282\u70b9\u4e0b\u6dfb\u52a0\u5982\u4e0b\u4fe1\u606f\uff1a</p> <pre><code>    hs0038 {\n        compatible = \"100ask,hs0038\";\n        gpios = &lt;&amp;gpio4 19 GPIO_ACTIVE_HIGH&gt;;\n    };\n</code></pre>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/07-hs0038driver/#4","title":"4.\u7f16\u8bd1\u8bbe\u5907\u6811","text":"<pre><code>book@100ask:~/100ask_imx6ull-sdk/Linux-4.9.88$ make dtbs\nbook@100ask:~/100ask_imx6ull-sdk/Linux-4.9.88$ cp arch/arm/boot/dts/100ask_imx6ull-14x14.dtb ~/nfs_rootfs/\n</code></pre> <p>\u628a\u8bbe\u5907\u6811\u62f7\u8d1d\u5230\u5f00\u53d1\u677f\u4e0a\u8fd0\u884c\uff1a</p> <pre><code>[root@100ask:/mnt]# cp 100ask_imx6ull-14x14.dtb /boot\n[root@100ask:/mnt]# reboot\n</code></pre>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/07-hs0038driver/#5","title":"5.\u67e5\u770b\u751f\u6210\u7684\u8bbe\u5907\u6811\u8282\u70b9\u4fe1\u606f","text":"<p>reboot \u4f7f\u7528\u65b0\u7684\u8bbe\u5907\u6811\u91cd\u65b0\u542f\u52a8\u4e4b\u540e\u6b63\u5e38\u60c5\u51b5\u4e0b\u4f1a\u5728\u5f00\u53d1\u677f\u7684\u201c/proc/device-tree\u201d\u76ee\u5f55\u4e0b\u751f\u6210\"hs0038\"\u8bbe\u5907\u6811\u8282\u70b9\u3002</p>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/07-hs0038driver/#6makefile","title":"6.Makefile\u8bf4\u660e","text":"<pre><code># 1. \u4f7f\u7528\u4e0d\u540c\u7684\u5f00\u53d1\u677f\u5185\u6838\u65f6, \u4e00\u5b9a\u8981\u4fee\u6539KERN_DIR\n# 2. KERN_DIR\u4e2d\u7684\u5185\u6838\u8981\u4e8b\u5148\u914d\u7f6e\u3001\u7f16\u8bd1, \u4e3a\u4e86\u80fd\u7f16\u8bd1\u5185\u6838, \u8981\u5148\u8bbe\u7f6e\u4e0b\u5217\u73af\u5883\u53d8\u91cf:\n# 2.1 ARCH,          \u6bd4\u5982: export ARCH=arm64\n# 2.2 CROSS_COMPILE, \u6bd4\u5982: export CROSS_COMPILE=aarch64-linux-gnu-\n# 2.3 PATH,          \u6bd4\u5982: export PATH=$PATH:/home/book/100ask_roc-rk3399-pc/ToolChain-6.3.1/gcc-linaro-6.3.1-2017.05-x86_64_aarch64-linux-gnu/bin \n# \u6ce8\u610f: \u4e0d\u540c\u7684\u5f00\u53d1\u677f\u4e0d\u540c\u7684\u7f16\u8bd1\u5668\u4e0a\u8ff03\u4e2a\u73af\u5883\u53d8\u91cf\u4e0d\u4e00\u5b9a\u76f8\u540c,\n#       \u8bf7\u53c2\u8003\u5404\u5f00\u53d1\u677f\u7684\u9ad8\u7ea7\u7528\u6237\u4f7f\u7528\u624b\u518c\n#KERN_DIR =  /home/book/100ask_stm32mp157_pro-sdk/Linux-5.4\nKERN_DIR =  /home/book/100ask_imx6ull-sdk/Linux-4.9.88\n\nall:\nmake -C $(KERN_DIR) M=`pwd` modules $(CROSS_COMPILE)gcc -o hs0038_test hs0038_test.c\nclean:\nmake -C $(KERN_DIR) M=`pwd` modules clean\n    rm -rf modules.order  hs0038_test\n\n# \u53c2\u8003\u5185\u6838\u6e90\u7801drivers/char/ipmi/Makefile\n# \u8981\u60f3\u628aa.c, b.c\u7f16\u8bd1\u6210ab.ko, \u53ef\u4ee5\u8fd9\u6837\u6307\u5b9a:\n# ab-y := a.o b.o\n# obj-m += ab.o\nobj-m += hs0038_drv.o\n</code></pre> <p>\u5728Ubuntu\u4e0b\uff0c\u6267\u884c\u7f16\u8bd1\u547d\u4ee4<code>make</code>\uff0c\u5e76\u62f7\u8d1d\u5230\u5f00\u53d1\u677f\u4e0a\u8fd0\u884c\uff1a</p> <pre><code>cp hs0038_test *.ko ~/nfs_rootfs/\n</code></pre>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/07-hs0038driver/#7","title":"7.\u52a0\u8f7d\u9a71\u52a8\u6a21\u5757\u5e76\u8fdb\u884c\u6d4b\u8bd5","text":"<pre><code>[root@100ask:/mnt]# insmod hs0038_drv.ko\n[root@100ask:/mnt]# ./hs0038_test /dev/myhs0038\n</code></pre>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/08-at24c02driver/","title":"6ULLPro-AT24c02\u6a21\u5757","text":""},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/08-at24c02driver/#eeprom","title":"EEPROM\u6a21\u5757\u9a71\u52a8\u5b9e\u9a8c","text":"<ul> <li>\u5de5\u7a0b\u6240\u5728\u4ed3\u5e93\uff1ahttps://github.com/100askTeam/Stage3-DeviceDriver</li> <li>\u9ed8\u8ba4\u60c5\u51b5\u6b64\u4ed3\u5e93\u5df2\u7ecf\u63d0\u524d\u7ed9\u60a8\u653e\u5728 \u914d\u5957\u865a\u62df\u673a /home/book\u76ee\u5f55\u4e0b\u3002\u53ea\u9700\u8981\u8fdb\u5165 <code>/home/book/Stage3-DeviceDriver/IMX6ULL/08_at24c02</code>\u8def\u5f84 \u5c31\u53ef\u4ee5\u5f00\u59cb\u60a8\u7684\u5f00\u53d1\u3002 </li> </ul>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/08-at24c02driver/#at24c02","title":"AT24C02\u7b80\u4ecb","text":"<p>AT24C02\u662f\u57fa\u4e8eI2C\u603b\u7ebf\u7684\u5b58\u50a8\u5668\u4ef6\uff0c\u7531\u4e8e\u63a5\u53e3\u65b9\u4fbf\uff0c\u4f53\u79ef\u5c0f\uff0c\u6570\u636e\u6389\u7535\u4e0d\u4e22\u5931\u7b49\u7279\u70b9\uff0c\u5728\u4eea\u5668\u4eea\u8868\u53ca\u5de5\u4e1a\u81ea\u52a8\u5316\u63a7\u5236\u4e2d\u5f97\u5230\u5927\u91cf\u7684\u5e94\u7528\u3002</p> <p>\u767e\u95ee\u7f51\u63d0\u4f9b\u7684EEPROM\u6a21\u5757\u4f7f\u7528\u7684\u5c31\u662fAT24C02\uff0c\u4f7f\u75288\u4f4d\u5730\u5740\uff0c\u5b58\u50a8\u5bb9\u91cf\u4e3a2K bit\uff0c\u53732048bit = 256*8bit = 256 Byte, \u5176\u4e2d\u5b83\u88ab\u5206\u4e3a32\u9875\uff0c\u6bcf\u98758Byte\u3002</p>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/08-at24c02driver/#1","title":"1.\u786c\u4ef6\u4ecb\u7ecd","text":"<p>EEPROM\u6a21\u5757\u7684\u539f\u7406\u56fe\u5982\u4e0b\uff1a</p> <p></p>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/08-at24c02driver/#2","title":"2.\u786c\u4ef6\u4e0e\u5f00\u53d1\u677f\u8fde\u63a5\u65b9\u6cd5","text":"<p>IMX6ULL\u5148\u65ad\u7535\uff0c\u6309\u4e0b\u56fe\u6240\u793a\uff0c\u5c06\u6a21\u5757\u63d2\u5728\u6269\u5c55\u677f\u7684I2C_A\uff0c\u5c06\u6269\u5c55\u677f\u63d2\u5728\u5e95\u677f\u4e0a\u3002</p> <p>\u6ce8\u610f\uff1a\u4e3a\u4e86\u9632\u6b62\u7528\u6237\u63a5\u9519\u65b9\u5411\uff0c\u6a21\u5757\u548c\u6269\u5c55\u677f\u90fd\u6709\u4e00\u6761\u957f\u767d\u7ebf\uff0c\u8fde\u63a5\u65f6\u9700\u8981\u6a21\u5757\u4e0a\u7684\u767d\u7ebf\u548c\u6269\u5c55\u677f\u7684\u767d\u7ebf\u5728\u540c\u4e00\u4fa7\u3002</p> <p>\u6ce8\u610f\uff1a\u672c\u5b9e\u9a8c\u4e2d\uff0cAT24C02\u6a21\u5757\u8981\u63d2\u5230I2C_A\u63a5\u53e3\uff0c\u5982\u4e0b\u56fe\u6240\u793a\u3002</p> <p></p>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/08-at24c02driver/#3","title":"3.\u4fee\u6539\u8bbe\u5907\u6811","text":"<pre><code>book@100ask:~/100ask_imx6ull-sdk/Linux-4.9.88/$ vi arch/arm/boot/dts/100ask_imx6ull-14x14.dts\n</code></pre> <p>\u5728<code>&amp;i2c1</code>\u8282\u70b9\u5904\u52a0\u4e0a\u5982\u4e0b\u4fe1\u606f\uff1a</p> <p></p>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/08-at24c02driver/#4","title":"4.\u7f16\u8bd1\u8bbe\u5907\u6811","text":"<p>\u628a\u8bbe\u5907\u6811\u62f7\u8d1d\u5230\u5f00\u53d1\u677f\u4e0a\u8fd0\u884c\uff1a</p> <pre><code>[root@100ask:/mnt]# cp 100ask_imx6ull-14x14.dtb /boot\n[root@100ask:/mnt]# reboot\n</code></pre>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/08-at24c02driver/#5","title":"5.\u67e5\u770b\u751f\u6210\u7684\u8bbe\u5907\u6811\u8282\u70b9\u4fe1\u606f","text":"<p>reboot \u4f7f\u7528\u65b0\u7684\u8bbe\u5907\u6811\u91cd\u65b0\u542f\u52a8\u4e4b\u540e\u6b63\u5e38\u60c5\u51b5\u4e0b\u4f1a\u5728\u5f00\u53d1\u677f\u7684\u201c/proc/device-tree\u201d\u76ee\u5f55\u4e0b\u751f\u6210\"at4c02\"\u8bbe\u5907\u6811\u8282\u70b9\u3002</p>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/08-at24c02driver/#6makefile","title":"6.Makefile\u8bf4\u660e","text":"<pre><code># 1. \u4f7f\u7528\u4e0d\u540c\u7684\u5f00\u53d1\u677f\u5185\u6838\u65f6, \u4e00\u5b9a\u8981\u4fee\u6539KERN_DIR\n# 2. KERN_DIR\u4e2d\u7684\u5185\u6838\u8981\u4e8b\u5148\u914d\u7f6e\u3001\u7f16\u8bd1, \u4e3a\u4e86\u80fd\u7f16\u8bd1\u5185\u6838, \u8981\u5148\u8bbe\u7f6e\u4e0b\u5217\u73af\u5883\u53d8\u91cf:\n# 2.1 ARCH,          \u6bd4\u5982: export ARCH=arm64\n# 2.2 CROSS_COMPILE, \u6bd4\u5982: export CROSS_COMPILE=aarch64-linux-gnu-\n# 2.3 PATH,          \u6bd4\u5982: export PATH=$PATH:/home/book/100ask_roc-rk3399-pc/ToolChain-6.3.1/gcc-linaro-6.3.1-2017.05-x86_64_aarch64-linux-gnu/bin \n# \u6ce8\u610f: \u4e0d\u540c\u7684\u5f00\u53d1\u677f\u4e0d\u540c\u7684\u7f16\u8bd1\u5668\u4e0a\u8ff03\u4e2a\u73af\u5883\u53d8\u91cf\u4e0d\u4e00\u5b9a\u76f8\u540c,\n#       \u8bf7\u53c2\u8003\u5404\u5f00\u53d1\u677f\u7684\u9ad8\u7ea7\u7528\u6237\u4f7f\u7528\u624b\u518c\n#KERN_DIR =  /home/book/100ask_stm32mp157_pro-sdk/Linux-5.4\nKERN_DIR =  /home/book/100ask_imx6ull-sdk/Linux-4.9.88\n\nall:\nmake -C $(KERN_DIR) M=`pwd` modules $(CROSS_COMPILE)gcc -o at24c02_test at24c02_test.c\nclean:\nmake -C $(KERN_DIR) M=`pwd` modules clean\n    rm -rf modules.order  at24c02_test\n\n# \u53c2\u8003\u5185\u6838\u6e90\u7801drivers/char/ipmi/Makefile\n# \u8981\u60f3\u628aa.c, b.c\u7f16\u8bd1\u6210ab.ko, \u53ef\u4ee5\u8fd9\u6837\u6307\u5b9a:\n# ab-y := a.o b.o\n# obj-m += ab.o\nobj-m += at24c02_drv.o\n</code></pre>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/08-at24c02driver/#7","title":"7.\u52a0\u8f7d\u9a71\u52a8\u6a21\u5757\u5e76\u8fdb\u884c\u6d4b\u8bd5","text":""},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/09-oleddriver/","title":"oled\u6a21\u5757\u9a71\u52a8\u5b9e\u9a8c","text":"<ul> <li>\u5de5\u7a0b\u6240\u5728\u4ed3\u5e93\uff1ahttps://github.com/100askTeam/Stage3-DeviceDriver</li> <li>\u9ed8\u8ba4\u60c5\u51b5\u6b64\u4ed3\u5e93\u5df2\u7ecf\u63d0\u524d\u7ed9\u60a8\u653e\u5728 \u914d\u5957\u865a\u62df\u673a /home/book\u76ee\u5f55\u4e0b\u3002\u53ea\u9700\u8981\u8fdb\u5165 <code>/home/book/Stage3-DeviceDriver/IMX6ULL/09_oled</code>\u8def\u5f84 \u5c31\u53ef\u4ee5\u5f00\u59cb\u60a8\u7684\u5f00\u53d1\u3002</li> </ul>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/09-oleddriver/#1","title":"1.\u786c\u4ef6\u4ecb\u7ecd","text":"<p>\u5728\u8fd9\u4e2a\u5b9e\u9a8c\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528\u767e\u95ee\u7f51\u5236\u4f5c\u7684OLED\u6a21\u5757\uff0c\u8be5\u6a21\u5757\u4e3a0.96\u5bf8\u7684\u5c4f\u5e55\uff0c\u652f\u6301128*64\u50cf\u7d20\u663e\u793a\u3002</p> <p>\u8be5\u5c4f\u5e55\u4f7f\u7528\u9a71\u52a8\u82af\u7247SSD1306\u3002SSD1306\u662f\u4e00\u5757\u5185\u7f6eCMOS OLED/PLED\u9a71\u52a8\u63a7\u5236\u5668\u7684IC\u82af\u7247\uff0c\u82af\u7247\u53ef\u4ee5\u9a71\u52a8\u5171\u9634\u578bOLED\u9762\u677f\u3002\u82af\u7247\u5185\u90e8\u5305\u542b\u6676\u632f\u3001\u663e\u793aRAM\u3001\u5bf9\u6bd4\u5ea6\u63a7\u5236\u6a21\u5757\u4ee5\u53ca256\u7ea7\u4eae\u5ea6\u63a7\u5236\u6a21\u5757\uff0c\u5927\u5927\u964d\u4f4e\u4e86\u5916\u56f4\u5143\u5668\u4ef6\u6570\u91cf\u548c\u529f\u8017\u3002</p> <p>\u4e3b\u673a\u53ef\u4ee5\u901a\u8fc76800/8000\u5e76\u884c\u63a5\u53e3\u3001I2C\u63a5\u53e3\u6216\u8005SPI\u63a5\u53e3\u5b9e\u73b0\u5bf9SSD1306\u7684\u63a7\u5236\uff0c\u767e\u95ee\u7f51\u7684OLED\u6a21\u5757\u662f\u4f7f\u7528\u7684SPI\u63a5\u53e3\u8fdb\u884c\u63a7\u5236\u3002\u539f\u7406\u56fe\u5982\u4e0b\uff1a</p> <p></p>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/09-oleddriver/#2","title":"2.\u786c\u4ef6\u4e0e\u5f00\u53d1\u677f\u8fde\u63a5\u65b9\u6cd5","text":"<p>IMX6ULL\u5148\u65ad\u7535\uff0c\u6309\u4e0b\u56fe\u6240\u793a\uff0c\u5c06\u6a21\u5757\u63d2\u5728\u6269\u5c55\u677f\u7684SPI_A\uff0c\u5c06\u6269\u5c55\u677f\u63d2\u5728\u5e95\u677f\u4e0a\u3002</p> <p>\u6ce8\u610f\uff1a\u4e3a\u4e86\u9632\u6b62\u7528\u6237\u63a5\u9519\u65b9\u5411\uff0c\u6a21\u5757\u548c\u6269\u5c55\u677f\u90fd\u6709\u4e00\u6761\u957f\u767d\u7ebf\uff0c\u8fde\u63a5\u65f6\u9700\u8981\u6a21\u5757\u4e0a\u7684\u767d\u7ebf\u548c\u6269\u5c55\u677f\u7684\u767d\u7ebf\u5728\u540c\u4e00\u4fa7\u3002</p> <p></p>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/09-oleddriver/#3","title":"3.\u4fee\u6539\u8bbe\u5907\u6811","text":""},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/09-oleddriver/#4","title":"4.\u7f16\u8bd1\u8bbe\u5907\u6811","text":"<p>\u628a\u8bbe\u5907\u6811\u62f7\u8d1d\u5230\u5f00\u53d1\u677f\u4e0a\u8fd0\u884c\uff1a</p> <pre><code>[root@100ask:/mnt]# cp 100ask_imx6ull-14x14.dtb /boot\n[root@100ask:/mnt]# reboot\n</code></pre> <p>reboot \u4f7f\u7528\u65b0\u7684\u8bbe\u5907\u6811\u91cd\u65b0\u542f\u52a8\u4e4b\u540e\u6b63\u5e38\u60c5\u51b5\u4e0b\u4f1a\u5728\u5f00\u53d1\u677f\u7684\u201c/proc/device-tree\u201d\u76ee\u5f55\u4e0b\u751f\u6210\"oled\"\u8bbe\u5907\u6811\u8282\u70b9\u3002</p>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/09-oleddriver/#5makefile","title":"5.Makefile\u8bf4\u660e","text":"<pre><code># 1. \u4f7f\u7528\u4e0d\u540c\u7684\u5f00\u53d1\u677f\u5185\u6838\u65f6, \u4e00\u5b9a\u8981\u4fee\u6539KERN_DIR\n# 2. KERN_DIR\u4e2d\u7684\u5185\u6838\u8981\u4e8b\u5148\u914d\u7f6e\u3001\u7f16\u8bd1, \u4e3a\u4e86\u80fd\u7f16\u8bd1\u5185\u6838, \u8981\u5148\u8bbe\u7f6e\u4e0b\u5217\u73af\u5883\u53d8\u91cf:\n# 2.1 ARCH,          \u6bd4\u5982: export ARCH=arm64\n# 2.2 CROSS_COMPILE, \u6bd4\u5982: export CROSS_COMPILE=aarch64-linux-gnu-\n# 2.3 PATH,          \u6bd4\u5982: export PATH=$PATH:/home/book/100ask_roc-rk3399-pc/ToolChain-6.3.1/gcc-linaro-6.3.1-2017.05-x86_64_aarch64-linux-gnu/bin \n# \u6ce8\u610f: \u4e0d\u540c\u7684\u5f00\u53d1\u677f\u4e0d\u540c\u7684\u7f16\u8bd1\u5668\u4e0a\u8ff03\u4e2a\u73af\u5883\u53d8\u91cf\u4e0d\u4e00\u5b9a\u76f8\u540c,\n#       \u8bf7\u53c2\u8003\u5404\u5f00\u53d1\u677f\u7684\u9ad8\u7ea7\u7528\u6237\u4f7f\u7528\u624b\u518c\n#KERN_DIR =  /home/book/100ask_stm32mp157_pro-sdk/Linux-5.4\nKERN_DIR =  /home/book/100ask_imx6ull-sdk/Linux-4.9.88\n\nall:\nmake -C $(KERN_DIR) M=`pwd` modules $(CROSS_COMPILE)gcc -o oled_test oled_test.c\nclean:\nmake -C $(KERN_DIR) M=`pwd` modules clean\n    rm -rf modules.order  oled_test\n\n# \u53c2\u8003\u5185\u6838\u6e90\u7801drivers/char/ipmi/Makefile\n# \u8981\u60f3\u628aa.c, b.c\u7f16\u8bd1\u6210ab.ko, \u53ef\u4ee5\u8fd9\u6837\u6307\u5b9a:\n# ab-y := a.o b.o\n# obj-m += ab.o\nobj-m += oled_drv.o\n</code></pre>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/09-oleddriver/#6","title":"6.\u52a0\u8f7d\u9a71\u52a8\u6a21\u5757\u5e76\u8fdb\u884c\u6d4b\u8bd5","text":"<pre><code>[root@100ask:/mnt]# insmod oled_drv.ko\n[root@100ask:/mnt]# ./spi_oled /dev/myoled\n</code></pre>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/09-oleddriver/#7","title":"7.\u5b9e\u9a8c\u7ed3\u679c","text":""},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/10-dacdriver/","title":"DAC\u6a21\u5757\u9a71\u52a8\u5b9e\u9a8c","text":"<ul> <li>\u5de5\u7a0b\u6240\u5728\u4ed3\u5e93\uff1ahttps://github.com/100askTeam/Stage3-DeviceDriver</li> <li>\u9ed8\u8ba4\u60c5\u51b5\u6b64\u4ed3\u5e93\u5df2\u7ecf\u63d0\u524d\u7ed9\u60a8\u653e\u5728 \u914d\u5957\u865a\u62df\u673a /home/book\u76ee\u5f55\u4e0b\u3002\u53ea\u9700\u8981\u8fdb\u5165 <code>/home/book/Stage3-DeviceDriver/IMX6ULL/10_DAC</code>\u8def\u5f84 \u5c31\u53ef\u4ee5\u5f00\u59cb\u60a8\u7684\u5f00\u53d1\u3002</li> </ul>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/10-dacdriver/#1","title":"1.\u786c\u4ef6\u4ecb\u7ecd","text":"<p>\u6a21\u5757\u539f\u7406\u56fe\u53ca\u8d44\u6599\uff1a\u7f51\u76d8\u5f00\u53d1\u677f\u914d\u5957\u8d44\u6599\u201c05_Hardware (\u539f\u7406\u56fe)/Extend_modules/dac.zip\u201d\u3002</p> <p></p>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/10-dacdriver/#2","title":"2.\u786c\u4ef6\u4e0e\u5f00\u53d1\u677f\u8fde\u63a5\u65b9\u6cd5","text":"<p>IMX6ULL\u5148\u65ad\u7535\uff0c\u6309\u4e0b\u56fe\u6240\u793a\uff0c\u5c06\u6a21\u5757\u63d2\u5728\u6269\u5c55\u677f\u7684SPI_A\uff0c\u5c06\u6269\u5c55\u677f\u63d2\u5728\u5e95\u677f\u4e0a\u3002</p> <p>\u6ce8\u610f\uff1a\u4e3a\u4e86\u9632\u6b62\u7528\u6237\u63a5\u9519\u65b9\u5411\uff0c\u6a21\u5757\u548c\u6269\u5c55\u677f\u90fd\u6709\u4e00\u6761\u957f\u767d\u7ebf\uff0c\u8fde\u63a5\u65f6\u9700\u8981\u6a21\u5757\u4e0a\u7684\u767d\u7ebf\u548c\u6269\u5c55\u677f\u7684\u767d\u7ebf\u5728\u540c\u4e00\u4fa7\u3002</p> <p></p>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/10-dacdriver/#3","title":"3.\u4fee\u6539\u8bbe\u5907\u6811","text":""},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/10-dacdriver/#4","title":"4.\u7f16\u8bd1\u8bbe\u5907\u6811","text":"<pre><code>book@100ask:~/100ask_imx6ull-sdk/Linux-4.9.88$ make dtbs\nbook@100ask:~/100ask_imx6ull-sdk/Linux-4.9.88$ cp arch/arm/boot/dts/100ask_imx6ull-14x14.dtb ~/nfs_rootfs/\n</code></pre> <p>\u628a\u8bbe\u5907\u6811\u62f7\u8d1d\u5230\u5f00\u53d1\u677f\u4e0a\u8fd0\u884c\uff1a</p> <pre><code>[root@100ask:/mnt]# cp 100ask_imx6ull-14x14.dtb /boot\n[root@100ask:/mnt]# reboot\n</code></pre>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/10-dacdriver/#5","title":"5.\u67e5\u770b\u751f\u6210\u7684\u8bbe\u5907\u6811\u8282\u70b9\u4fe1\u606f","text":"<p>reboot \u4f7f\u7528\u65b0\u7684\u8bbe\u5907\u6811\u91cd\u65b0\u542f\u52a8\u4e4b\u540e\u6b63\u5e38\u60c5\u51b5\u4e0b\u4f1a\u5728\u5f00\u53d1\u677f\u7684\u201c/proc/device-tree\u201d\u76ee\u5f55\u4e0b\u751f\u6210\"dac\"\u8bbe\u5907\u6811\u8282\u70b9\u3002</p>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/10-dacdriver/#6makefile","title":"6.Makefile\u8bf4\u660e","text":"<pre><code># 1. \u4f7f\u7528\u4e0d\u540c\u7684\u5f00\u53d1\u677f\u5185\u6838\u65f6, \u4e00\u5b9a\u8981\u4fee\u6539KERN_DIR\n# 2. KERN_DIR\u4e2d\u7684\u5185\u6838\u8981\u4e8b\u5148\u914d\u7f6e\u3001\u7f16\u8bd1, \u4e3a\u4e86\u80fd\u7f16\u8bd1\u5185\u6838, \u8981\u5148\u8bbe\u7f6e\u4e0b\u5217\u73af\u5883\u53d8\u91cf:\n# 2.1 ARCH,          \u6bd4\u5982: export ARCH=arm64\n# 2.2 CROSS_COMPILE, \u6bd4\u5982: export CROSS_COMPILE=aarch64-linux-gnu-\n# 2.3 PATH,          \u6bd4\u5982: export PATH=$PATH:/home/book/100ask_roc-rk3399-pc/ToolChain-6.3.1/gcc-linaro-6.3.1-2017.05-x86_64_aarch64-linux-gnu/bin \n# \u6ce8\u610f: \u4e0d\u540c\u7684\u5f00\u53d1\u677f\u4e0d\u540c\u7684\u7f16\u8bd1\u5668\u4e0a\u8ff03\u4e2a\u73af\u5883\u53d8\u91cf\u4e0d\u4e00\u5b9a\u76f8\u540c,\n#       \u8bf7\u53c2\u8003\u5404\u5f00\u53d1\u677f\u7684\u9ad8\u7ea7\u7528\u6237\u4f7f\u7528\u624b\u518c\nKERN_DIR = /home/book/100ask_imx6ull-sdk/Linux-4.9.88\n\nall:\nmake -C $(KERN_DIR) M=`pwd` modules $(CROSS_COMPILE)gcc -o dac_test dac_test.c\n\nclean:\nmake -C $(KERN_DIR) M=`pwd` modules clean\n    rm -rf modules.order dac_test\n\nobj-m   += dac_drv.o\n</code></pre>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/10-dacdriver/#7","title":"7.\u52a0\u8f7d\u9a71\u52a8\u6a21\u5757\u5e76\u8fdb\u884c\u6d4b\u8bd5","text":"<pre><code>[root@100ask:/mnt]# insmod dac_drv.ko\n[root@100ask:/mnt]# ./dac_test /dev/mydac 100\n[root@100ask:/mnt]# ./dac_test /dev/mydac 1000\n</code></pre>"},{"location":"Stage3-DeviceDriver/Nxp/IMX6ULL/Pro/10-dacdriver/#8","title":"8.\u5b9e\u9a8c\u73b0\u8c61","text":"<p>\u53ef\u4ee5\u4fee\u6539\u6570\u503c\uff0c\u5c31\u53ef\u4fee\u6539DAC\u6a21\u5757\u4e0aLED1\u7684\u4eae\u5ea6\u3002</p>"},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/01-leddriver/","title":"STM32MP157\u7684LED\u9a71\u52a8\u7a0b\u5e8f","text":""},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/01-leddriver/#1","title":"1.\u786c\u4ef6\u4ecb\u7ecd","text":"<p>\u672c\u8282\u5b9e\u9a8c\u4f7f\u7528\u5230 100ask_IMX6ULL-PRO \u5f00\u53d1\u677f\u4e0a\u7684 LED\u706f\u3002</p>"},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/01-leddriver/#2","title":"2.\u770b\u539f\u7406\u56fe\u786e\u5b9a\u5f15\u811a","text":"<p>\u6253\u5f00\u5f53\u524d\u76ee\u5f55\u7684<code>100ASK_STM32MP157_PRO_V11_\u5e95\u677f\u539f\u7406\u56fe.pdf</code>\uff0c`100ASK_STM32MP157_PRO\u4f7f\u7528\u7684LED\u539f\u7406\u56fe\u5982\u4e0b\uff0c\u53ef\u77e5\u5f15\u811a\u6709GPIOA_10\u548cGPIOG_8\uff0c\u672c\u5b9e\u9a8c\u91c7\u7528GPIOA_10\u3002</p> <p></p>"},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/01-leddriver/#3","title":"3.\u4fee\u6539\u8bbe\u5907\u6811","text":"<p>stm32mp157\u7684\u8bbe\u5907\u6811\u76ee\u5f55\u4e3a\uff1a</p> <p><code>100ask_stm32mp157_pro-sdk/Linux-5.4/arch/arm/boot/dts/stm32mp157c-100ask-512d-lcd-v1.dts</code></p> <p>\u8fdb\u5165\u5185\u6838\u76ee\u5f55</p> <pre><code>cd ~/100ask_stm32mp157_pro-sdk/Linux-5.4\n</code></pre> <p>\u4fee\u6539\u8bbe\u5907\u6811dts</p> <pre><code>vi arch/arm/boot/dts/stm32mp157c-100ask-512d-lcd-v1.dts\n</code></pre> <p>\u589e\u52a0\u5982\u4e0b\u5185\u5bb9\uff0c</p> <pre><code>        myled {\n                compatible = \"100ask,leddrv\";\n                pinctrl-names = \"default\";\n                led-gpios = &lt;&amp;gpioa 10 GPIO_ACTIVE_LOW&gt;;\n        };\n</code></pre> <p>\u5c06\u6587\u4ef6\u5939\u4e2d\u7684100ask_led.dts\u8bbe\u5907\u6811\u6587\u4ef6\u5185\u5bb9\u653e\u5165stm32mp157c-100ask-512d-lcd-v1.dts\u6587\u4ef6\u4e2d\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u5c06\u5185\u5bb9\u6dfb\u52a0\u5230\u7ea2\u8272\u6846\u5185\u3002</p> <p>s</p> <p>\u6ce8\u610f\u914d\u7f6e\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u94fe\uff1a</p> <pre><code>export ARCH=arm\nexport CROSS_COMPILE=arm-buildroot-linux-gnueabihf-\nexport PATH=$PATH:/home/book/100ask_stm32mp157_pro-sdk/ToolChain/arm-buildroot-linux-gnueabihf_sdk-buildroot/bin\n</code></pre> <p>\u7f16\u8bd1\u8bbe\u5907\u6811</p> <pre><code>make dtbs\n</code></pre> <p>\u5c06\u751f\u6210\u7684stm32mp157c-100ask-512d-lcd-v1.dtb\u62f7\u8d1d\u5230nfs_rootfs\u76ee\u5f55\u4e2d</p> <pre><code>cp arch/arm/boot/dts/stm32mp157c-100ask-512d-lcd-v1.dtb ~/nfs_rootfs/\n</code></pre> <p></p>"},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/01-leddriver/#4led","title":"4.\u7f16\u8bd1LED\u7a0b\u5e8f","text":"<p>\u4fee\u6539Makefile\u6587\u4ef6\uff0c\u5c06\u4e0b\u56fe\u4e2dMakefile\u6587\u4ef6\u4e2d\u7684KERN_DIR\u4fee\u6539\u4e3a\u5f00\u53d1\u677f\u5185\u6838\u76ee\u5f55\uff0c\u5982\u4f7f\u7528\u7684\u662f\u767e\u95ee\u7f51\u63d0\u4f9b\u7684Ubuntu\u955c\u50cf\u76ee\u5f55\u8bbe\u7f6e\u4e3a\uff1a</p> <pre><code>/home/book/100ask_stm32mp157_pro-sdk/Linux-5.4\n</code></pre> <p></p> <p>\u8f93\u5165make\uff0c\u7f16\u8bd1\u7a0b\u5e8f\u3002</p> <p></p> <p>\u5c06\u751f\u6210\u7684\u9a71\u52a8\u7a0b\u5e8fleddrv.ko\u548c\u5e94\u7528\u7a0b\u5e8fledtest\u62f7\u8d1d\u5230\u7f51\u7edc\u6587\u4ef6\u7cfb\u7edf\u4e2d\uff0c\u8f93\u5165</p> <pre><code>cp leddrv.ko ledtest ~/nfs_rootfs/\n</code></pre>"},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/01-leddriver/#5","title":"5.\u5f00\u53d1\u677f\u4e0a\u673a\u5b9e\u9a8c","text":"<p>\u5728\u4fdd\u8bc1\u5f00\u53d1\u677f\u548cUbuntu\u53ef\u4ee5ping\u901a\u7684\u60c5\u51b5\u4e0b\uff0c\u5c06\u5f00\u53d1\u677f\u6302\u8f7d\u7f51\u7edc\u6587\u4ef6\u7cfb\u7edf\uff0c\u8f93\u5165\uff1a</p> <pre><code> mount -t nfs -o nolock,vers=3 192.168.5.11:/home/book/nfs_rootfs /mnt\n</code></pre> <p>\u6ce8\u610f\u4e0a\u9762\u7684192.168.5.11\u9700\u8981\u4fee\u6539\u4e3a\u81ea\u5df1\u7684Ubuntu\u7684ip\uff0c\u5177\u4f53\u64cd\u4f5c\u53ef\u53c2\u8003\u5d4c\u5165\u5f0fLinux\u5e94\u7528\u5f00\u53d1\u5b8c\u5168\u624b\u518c\u7b2c2\u7bc7\u7684\u7b2c\u4e03\u7ae0\u3002</p> <p>\u67e5\u8be2\u5f00\u53d1\u677f\u4e0a\u4fdd\u5b58\u5185\u6838\u548c\u8bbe\u5907\u6811\u7684\u5206\u533a</p> <pre><code>cat /proc/mounts\n</code></pre> <p></p> <p>\u6267\u884c\u6302\u8f7d\u547d\u4ee4\uff0c\u8f93\u5165</p> <pre><code>mount /dev/mmcblk2p2 /boot/\n</code></pre> <p>\u62f7\u8d1dmnt\u76ee\u5f55\u4e0b\u7684\u8bbe\u5907\u6811\u5230boot\u76ee\u5f55\uff0c\u8f93\u5165</p> <pre><code>cp /mnt/stm32mp157c-100ask-512d-lcd-v1.dtb /boot/\n</code></pre> <p>\u5c06mnt\u76ee\u5f55\u4e0b\u7684\u9a71\u52a8\u7a0b\u5e8f\u548c\u53ef\u6267\u884c\u7a0b\u5e8f\u62f7\u8d1d\u51fa\u6765</p> <pre><code>cp /mnt/leddrv.ko ~\ncp /mnt/ledtest ~\n</code></pre> <p>\u91cd\u542f\u5f00\u53d1\u677f</p> <pre><code>reboot\n</code></pre> <p>\u91cd\u542f\u5b8c\u6210\u540e\uff0c\u5f00\u59cb\u5b89\u88c5\u9a71\u52a8\uff0c\u8f93\u5165</p> <pre><code>insmod leddrv.ko\n</code></pre> <p>\u6d4b\u8bd5\u9a71\u52a8\u7a0b\u5e8f\uff0c\u8f93\u5165</p> <pre><code>./ledtest /dev/100ask_led0 on\n</code></pre> <p>\u5b9e\u9a8c\u73b0\u8c61\uff0c\u53ef\u4ee5\u770b\u5230\u7eff\u8272\u706f\u4eae\u8d77\uff1a</p> <p></p>"},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/02-keydriver/","title":"key\u6309\u952e\u5b9e\u9a8c\u8bf4\u660e","text":""},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/02-keydriver/#1","title":"1. \u786c\u4ef6\u4ecb\u7ecd","text":"<p>\u672c\u8282\u5b9e\u9a8c\u4f7f\u7528\u5230 100ask_STM32MP157-PRO \u5f00\u53d1\u677f\u4e0a\u7684 KEY1\u3001KEY2\u3002</p>"},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/02-keydriver/#2","title":"2.\u770b\u539f\u7406\u56fe\u786e\u5b9a\u5f15\u811a","text":"<p>\u6253\u5f00<code>100ASK_STM32MP157_PRO_V11_\u5e95\u677f\u539f\u7406\u56fe.pdf</code>\uff0c100ASK_STM32MP157_PRO\u4f7f\u7528\u7684kEY1\u3001KEY2\u539f\u7406\u56fe\u5982\u4e0b\uff0c\u53ef\u77e5\u5f15\u811a\u662f<code>GPIOG_3</code>\u4e0e<code>GPIOG_2</code>\uff1a</p> <p></p>"},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/02-keydriver/#3","title":"3.\u4fee\u6539\u8bbe\u5907\u6811","text":"<p>100ASK_STM32MP157_PRO\u7684\u8bbe\u5907\u6811\u76ee\u5f55\u4e3a\uff1a   </p> <p><code>100ask_stm32mp157_pro-sdk/Linux-5.4/arch/arm/boot/dts/stm32mp157c-100ask-512d-lcd-v1.dts</code></p> <p>\u8fdb\u5165\u5185\u6838\u76ee\u5f55</p> <pre><code>cd ~/100ask_stm32mp157_pro-sdk/Linux-5.4\n</code></pre> <p>\u4fee\u6539\u8bbe\u5907\u6811dts</p> <pre><code>vi arch/arm/boot/dts/stm32mp157c-100ask-512d-lcd-v1.dts\n</code></pre> <p>\u589e\u52a0\u5982\u4e0b\u5185\u5bb9\uff0c</p> <pre><code>        gpio_keys_100ask {\n                compatible = \"100ask,gpio_key\";\n                gpios = &lt;&amp;gpiog 3 GPIO_ACTIVE_LOW\n                &amp;gpiog 2 GPIO_ACTIVE_LOW&gt;;\n        };\n</code></pre> <p>\u5c06\u6587\u4ef6\u5939\u4e2d\u7684100ask_led.dts\u8bbe\u5907\u6811\u6587\u4ef6\u5185\u5bb9\u653e\u5165stm32mp157c-100ask-512d-lcd-v1.dts\u6587\u4ef6\u4e2d\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u5c06\u5185\u5bb9\u6dfb\u52a0\u5230\u7ea2\u8272\u6846\u5185\u3002</p> <p></p> <p>\u628a\u539f\u6765\u7684GPIO\u6309\u952e\u8282\u70b9\u7981\u6b62\u6389 \uff1a \u4fee \u6539 arch/arm/boot/dts/stm32mp15xx-100ask.dtsi\u3002\u8f93\u5165</p> <pre><code>vi arch/arm/boot/dts/stm32mp15xx-100ask.dtsi\n</code></pre> <p>\u8fdb\u5165\u5982\u4e0b\u56fe\u76ee\u5f55\uff1a</p> <p></p> <p>\u8f93\u5165/joystick\uff0c\u518d\u6309\u56de\u8f66\u3002\u5373\u53ef\u5230\u5982\u4e0b\u754c\u9762\u3002</p> <p></p> <p>\u8f93\u5165i\u8fdb\u884c\u7f16\u8f91\uff0c\u5982\u4e0b\u56fe\u7ea2\u6846\u6240\u793a\uff0c\u589e\u52a0\u5982\u4e0b\u5185\u5bb9</p> <pre><code>status = \"disabled\";\n</code></pre> <p></p> <p>\u7f16\u8bd1\u8bbe\u5907\u6811</p> <pre><code>make dtbs\n</code></pre> <p>\u5c06\u751f\u6210\u7684stm32mp157c-100ask-512d-lcd-v1.dtb\u62f7\u8d1d\u5230nfs_rootfs\u76ee\u5f55\u4e2d</p> <pre><code>cp arch/arm/boot/dts/stm32mp157c-100ask-512d-lcd-v1.dtb ~/nfs_rootfs/\n</code></pre> <p></p>"},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/02-keydriver/#4","title":"4.\u7f16\u8bd1\u7a0b\u5e8f","text":"<p>\u4fee\u6539Makefile\u6587\u4ef6\uff0c\u5c06\u4e0b\u56fe\u4e2dMakefile\u6587\u4ef6\u4e2d\u7684KERN_DIR\u4fee\u6539\u4e3a\u5f00\u53d1\u677f\u5185\u6838\u76ee\u5f55\uff0c\u5982\u4f7f\u7528\u7684\u662f\u767e\u95ee\u7f51\u63d0\u4f9b\u7684Ubuntu\u955c\u50cf\u76ee\u5f55\u8bbe\u7f6e\u4e3a\uff1a</p> <pre><code>/home/book/100ask_stm32mp157_pro-sdk/Linux-5.4\n</code></pre> <p></p> <p>\u8f93\u5165make\uff0c\u7f16\u8bd1\u7a0b\u5e8f\u3002</p> <p></p> <p>\u5c06\u751f\u6210\u7684\u9a71\u52a8\u7a0b\u5e8fleddrv.ko\u548c\u5e94\u7528\u7a0b\u5e8fledtest\u62f7\u8d1d\u5230\u7f51\u7edc\u6587\u4ef6\u7cfb\u7edf\u4e2d\uff0c\u8f93\u5165</p> <pre><code> cp gpio_key_drv.ko button_test ~/nfs_rootfs/\n</code></pre>"},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/02-keydriver/#5","title":"5.\u5f00\u53d1\u677f\u4e0a\u673a\u5b9e\u9a8c","text":"<p>\u5728\u4fdd\u8bc1\u5f00\u53d1\u677f\u548cUbuntu\u53ef\u4ee5ping\u901a\u7684\u60c5\u51b5\u4e0b\uff0c\u5c06\u5f00\u53d1\u677f\u6302\u8f7d\u7f51\u7edc\u6587\u4ef6\u7cfb\u7edf\uff0c\u8f93\u5165\uff1a</p> <pre><code> mount -t nfs -o nolock,vers=3 192.168.5.11:/home/book/nfs_rootfs /mnt\n</code></pre> <p>\u6ce8\u610f\u4e0a\u9762\u7684192.168.5.11\u9700\u8981\u4fee\u6539\u4e3a\u81ea\u5df1\u7684Ubuntu\u7684ip\uff0c\u5177\u4f53\u64cd\u4f5c\u53ef\u53c2\u8003\u5d4c\u5165\u5f0fLinux\u5e94\u7528\u5f00\u53d1\u5b8c\u5168\u624b\u518c\u7b2c2\u7bc7\u7684\u7b2c\u4e03\u7ae0\u3002</p> <p>\u62f7\u8d1dmnt\u76ee\u5f55\u4e0b\u7684\u8bbe\u5907\u6811\u5230boot\u76ee\u5f55\uff0c\u8f93\u5165</p> <pre><code>cp /mnt/stm32mp157c-100ask-512d-lcd-v1.dtb /boot/\n</code></pre> <p>\u5c06mnt\u76ee\u5f55\u4e0b\u7684\u9a71\u52a8\u7a0b\u5e8f\u548c\u53ef\u6267\u884c\u7a0b\u5e8f\u62f7\u8d1d\u51fa\u6765</p> <pre><code> cp /mnt/gpio_key_drv.ko ~\n cp /mnt/button_test ~\n</code></pre> <p>\u91cd\u542f\u5f00\u53d1\u677f</p> <pre><code>reboot\n</code></pre> <p>\u91cd\u542f\u5b8c\u6210\u540e\uff0c\u5f00\u59cb\u5b89\u88c5\u9a71\u52a8\uff0c\u8f93\u5165</p> <pre><code>insmod gpio_key_drv.ko\n</code></pre> <p>\u6d4b\u8bd5\u9a71\u52a8\u7a0b\u5e8f\uff0c\u8f93\u5165</p> <pre><code>./button_test /dev/100ask_gpio_key\n</code></pre> <p>\u5b9e\u9a8c\u73b0\u8c61\uff0c\u6309\u4e0b\u6309\u952e\u8f93\u5165\u7ed3\u679c\u5982\u4e0b\uff1a</p> <p></p>"},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/03-sr501driver/","title":"sr501\u4eba\u4f53\u7ea2\u5916\u4f20\u611f\u5668\u5b9e\u9a8c\u8bf4\u660e","text":""},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/03-sr501driver/#1","title":"1.\u786c\u4ef6\u4ecb\u7ecd","text":"<p>\u6a21\u5757\u539f\u7406\u56fe\u53ca\u8d44\u6599\uff1a<code>\u4eba\u4f53\u7ea2\u5916\u611f\u5e94.zip</code>\u3002</p>"},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/03-sr501driver/#2","title":"2.\u786c\u4ef6\u4e0e\u5f00\u53d1\u677f\u8fde\u63a5\u7684\u65b9\u6cd5","text":"<p>100ASK_STM32MP157_PRO\u5148\u65ad\u7535\uff0c\u6309\u4e0b\u56fe\u6240\u793a\uff0c\u5c06\u6a21\u5757\u63d2\u5728\u6269\u5c55\u677f\u7684GPIO0\uff0c\u5c06\u6269\u5c55\u677f\u63d2\u5728\u5e95\u677f\u4e0a\u3002</p> <p>\u6ce8\u610f\uff1a\u4e3a\u4e86\u9632\u6b62\u7528\u6237\u63a5\u9519\u65b9\u5411\uff0c\u6a21\u5757\u548c\u6269\u5c55\u677f\u90fd\u6709\u4e00\u6761\u957f\u767d\u7ebf\uff0c\u8fde\u63a5\u65f6\u9700\u8981\u6a21\u5757\u4e0a\u7684\u767d\u7ebf\u548c\u6269\u5c55\u677f\u7684\u767d\u7ebf\u5728\u540c\u4e00\u4fa7\u3002</p> <p>\u6ce8\u610f\uff1a\u6ce8\u610fSR501\u6a21\u5757\u4e2d\u7ea2\u7ebf\u3001\u9ed1\u7ebf\u3001\u7eff\u7ebf\u7684\u4f4d\u7f6e\uff0c\u5982\u4e0b\u56fe\u63a5\u7ebf\u3002</p> <p></p>"},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/03-sr501driver/#3","title":"3.\u4fee\u6539\u8bbe\u5907\u6811","text":"<p>100ASK_STM32MP157_PRO\u7684\u8bbe\u5907\u6811\u76ee\u5f55\u4e3a\uff1a   </p> <p><code>100ask_stm32mp157_pro-sdk/Linux-5.4/arch/arm/boot/dts/stm32mp157c-100ask-512d-lcd-v1.dts</code></p> <p>\u8fdb\u5165\u5185\u6838\u76ee\u5f55</p> <pre><code>cd ~/100ask_stm32mp157_pro-sdk/Linux-5.4\n</code></pre> <p>\u4fee\u6539\u8bbe\u5907\u6811dts</p> <pre><code>vi arch/arm/boot/dts/stm32mp157c-100ask-512d-lcd-v1.dts\n</code></pre> <p>\u589e\u52a0\u5982\u4e0b\u5185\u5bb9\uff0c</p> <pre><code>        sr501 {\n                compatible = \"100ask,sr501\";\n                gpios = &lt;&amp;gpioa 5 GPIO_ACTIVE_HIGH&gt;;\n         };\n</code></pre> <p></p> <p>\u7f16\u8bd1\u8bbe\u5907\u6811</p> <pre><code>make dtbs\n</code></pre> <p>\u5c06\u751f\u6210\u7684stm32mp157c-100ask-512d-lcd-v1.dtb\u62f7\u8d1d\u5230nfs_rootfs\u76ee\u5f55\u4e2d</p> <pre><code>cp arch/arm/boot/dts/stm32mp157c-100ask-512d-lcd-v1.dtb ~/nfs_rootfs/\n</code></pre>"},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/03-sr501driver/#4","title":"4.\u7f16\u8bd1\u7a0b\u5e8f","text":"<p>\u4fee\u6539Makefile\u6587\u4ef6\uff0c\u5c06\u4e0b\u56fe\u4e2dMakefile\u6587\u4ef6\u4e2d\u7684KERN_DIR\u4fee\u6539\u4e3a\u5f00\u53d1\u677f\u5185\u6838\u76ee\u5f55\uff0c\u5982\u4f7f\u7528\u7684\u662f\u767e\u95ee\u7f51\u63d0\u4f9b\u7684Ubuntu\u955c\u50cf\u76ee\u5f55\u8bbe\u7f6e\u4e3a\uff1a</p> <pre><code>/home/book/100ask_stm32mp157_pro-sdk/Linux-5.4\n</code></pre> <p></p> <p>\u8f93\u5165make\uff0c\u7f16\u8bd1\u7a0b\u5e8f\u3002</p> <p></p> <p>\u5c06\u751f\u6210\u7684\u9a71\u52a8\u7a0b\u5e8fsr501_drv.ko\u548c\u5e94\u7528\u7a0b\u5e8fsr501_test\u62f7\u8d1d\u5230\u7f51\u7edc\u6587\u4ef6\u7cfb\u7edf\u4e2d\uff0c\u8f93\u5165</p> <pre><code>cp sr501_drv.ko sr501_test ~/nfs_rootfs/\n</code></pre>"},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/03-sr501driver/#5","title":"5.\u5f00\u53d1\u677f\u4e0a\u673a\u5b9e\u9a8c","text":"<p>\u5728\u4fdd\u8bc1\u5f00\u53d1\u677f\u548cUbuntu\u53ef\u4ee5ping\u901a\u7684\u60c5\u51b5\u4e0b\uff0c\u5c06\u5f00\u53d1\u677f\u6302\u8f7d\u7f51\u7edc\u6587\u4ef6\u7cfb\u7edf\uff0c\u8f93\u5165\uff1a</p> <pre><code> mount -t nfs -o nolock,vers=3 192.168.5.11:/home/book/nfs_rootfs /mnt\n</code></pre> <p>\u6ce8\u610f\u4e0a\u9762\u7684192.168.5.11\u9700\u8981\u4fee\u6539\u4e3a\u81ea\u5df1\u7684Ubuntu\u7684ip\uff0c\u5177\u4f53\u64cd\u4f5c\u53ef\u53c2\u8003\u5d4c\u5165\u5f0fLinux\u5e94\u7528\u5f00\u53d1\u5b8c\u5168\u624b\u518c\u7b2c2\u7bc7\u7684\u7b2c\u4e03\u7ae0\u3002</p> <p>\u62f7\u8d1dmnt\u76ee\u5f55\u4e0b\u7684\u8bbe\u5907\u6811\u5230boot\u76ee\u5f55\uff0c\u8f93\u5165</p> <pre><code>cp /mnt/stm32mp157c-100ask-512d-lcd-v1.dtb /boot/\n</code></pre> <p>\u5c06mnt\u76ee\u5f55\u4e0b\u7684\u9a71\u52a8\u7a0b\u5e8f\u548c\u53ef\u6267\u884c\u7a0b\u5e8f\u62f7\u8d1d\u51fa\u6765</p> <pre><code>cp /mnt/sr501_drv.ko ~\ncp /mnt/sr501_test ~\n</code></pre> <p>\u91cd\u542f\u5f00\u53d1\u677f</p> <pre><code>reboot\n</code></pre> <p>\u91cd\u542f\u5b8c\u6210\u540e\uff0c\u5f00\u59cb\u5b89\u88c5\u9a71\u52a8\uff0c\u8f93\u5165</p> <pre><code>insmod sr501_drv.ko\n</code></pre> <p>\u5b9e\u9a8c\u73b0\u8c61\uff1a</p> <p></p>"},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/04-SR04driver/","title":"sr04\u8d85\u58f0\u6ce2\u4f20\u611f\u5668\u5b9e\u9a8c\u8bf4\u660e","text":""},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/04-SR04driver/#1","title":"1.\u786c\u4ef6\u4ecb\u7ecd","text":"<p>\u6a21\u5757\u539f\u7406\u56fe\u53ca\u8d44\u6599\uff1a<code>\u8d85\u58f0\u6ce2.zip</code>\u3002</p>"},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/04-SR04driver/#2","title":"2.\u786c\u4ef6\u4e0e\u5f00\u53d1\u677f\u8fde\u63a5\u7684\u65b9\u6cd5","text":"<p>STM32MP157\u5148\u65ad\u7535\uff0c\u6309\u4e0b\u56fe\u6240\u793a\uff0c\u5c06\u6a21\u5757\u63d2\u5728\u6269\u5c55\u677f\u7684GPIO0\uff0c\u5c06\u6269\u5c55\u677f\u63d2\u5728\u5e95\u677f\u4e0a\u3002</p> <p>\u6ce8\u610f\uff1a\u4e3a\u4e86\u9632\u6b62\u7528\u6237\u63a5\u9519\u65b9\u5411\uff0c\u6a21\u5757\u548c\u6269\u5c55\u677f\u90fd\u6709\u4e00\u6761\u957f\u767d\u7ebf\uff0c\u8fde\u63a5\u65f6\u9700\u8981\u6a21\u5757\u4e0a\u7684\u767d\u7ebf\u548c\u6269\u5c55\u677f\u7684\u767d\u7ebf\u5728\u540c\u4e00\u4fa7\u3002</p> <p>\u6ce8\u610f\uff1aSR04\u6a21\u5757\u4e2d\u7684\u5982\u4e0b\u56fe\u63a5\u7ebf\u3002</p> <p></p>"},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/04-SR04driver/#3","title":"3.\u4fee\u6539\u8bbe\u5907\u6811","text":"<p>100ASK_STM32MP157_PRO\u7684\u8bbe\u5907\u6811\u76ee\u5f55\u4e3a\uff1a   </p> <p><code>100ask_stm32mp157_pro-sdk/Linux-5.4/arch/arm/boot/dts/stm32mp157c-100ask-512d-lcd-v1.dts</code></p> <p>\u8fdb\u5165\u5185\u6838\u76ee\u5f55</p> <pre><code>cd ~/100ask_stm32mp157_pro-sdk/Linux-5.4\n</code></pre> <p>\u4fee\u6539\u8bbe\u5907\u6811dts</p> <pre><code>vi arch/arm/boot/dts/stm32mp157c-100ask-512d-lcd-v1.dts\n</code></pre> <p>\u589e\u52a0\u5982\u4e0b\u5185\u5bb9\uff0c</p> <pre><code>   sr04 {  /* for stm32mp157 */\n        compatible = \"100ask,sr04\";\n        trig-gpios = &lt;&amp;gpioa 5 GPIO_ACTIVE_HIGH&gt;;\n        echo-gpios = &lt;&amp;gpioa 13 GPIO_ACTIVE_HIGH&gt;;\n    };\n</code></pre> <p></p> <p>\u4fee\u6539sii902x\u8bbe\u5907\u6811\uff0c\u6309esc\u56de\u5230\u8f93\u5165\u6a21\u5f0f\uff0c\u8f93\u5165/sii902x\uff0c\u56de\u8f66\u67e5\u5230\u5230sii902x\u8bbe\u5907\u6811\uff0c\u8f93\u5165i\u8fdb\u884c\u4fee\u6539\uff0c\u5c06sii902x@39\u7684\u72b6\u6001\u6539\u4e3adisabled</p> <p></p> <p>\u4fdd\u5b58\u9000\u51fa\u540e\u7f16\u8bd1\u8bbe\u5907\u6811</p> <pre><code>make dtbs\n</code></pre> <p>\u5c06\u751f\u6210\u7684stm32mp157c-100ask-512d-lcd-v1.dtb\u62f7\u8d1d\u5230nfs_rootfs\u76ee\u5f55\u4e2d</p> <pre><code>cp arch/arm/boot/dts/stm32mp157c-100ask-512d-lcd-v1.dtb ~/nfs_rootfs/\n</code></pre>"},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/04-SR04driver/#4","title":"4.\u7f16\u8bd1\u7a0b\u5e8f","text":"<p>\u4fee\u6539Makefile\u6587\u4ef6\uff0c\u5c06\u4e0b\u56fe\u4e2dMakefile\u6587\u4ef6\u4e2d\u7684KERN_DIR\u4fee\u6539\u4e3a\u5f00\u53d1\u677f\u5185\u6838\u76ee\u5f55\uff0c\u5982\u4f7f\u7528\u7684\u662f\u767e\u95ee\u7f51\u63d0\u4f9b\u7684Ubuntu\u955c\u50cf\u76ee\u5f55\u8bbe\u7f6e\u4e3a\uff1a</p> <pre><code>/home/book/100ask_stm32mp157_pro-sdk/Linux-5.4\n</code></pre> <p></p> <p>\u8f93\u5165make\uff0c\u7f16\u8bd1\u7a0b\u5e8f\u3002</p> <p></p> <p>\u5c06\u751f\u6210\u7684\u9a71\u52a8\u7a0b\u5e8fsr501_drv.ko\u548c\u5e94\u7528\u7a0b\u5e8fsr501_test\u62f7\u8d1d\u5230\u7f51\u7edc\u6587\u4ef6\u7cfb\u7edf\u4e2d\uff0c\u8f93\u5165</p> <pre><code>cp sr04_drv.ko sr04_test ~/nfs_rootfs/\n</code></pre>"},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/04-SR04driver/#5","title":"5.\u5f00\u53d1\u677f\u4e0a\u673a\u5b9e\u9a8c","text":"<p>\u5728\u4fdd\u8bc1\u5f00\u53d1\u677f\u548cUbuntu\u53ef\u4ee5ping\u901a\u7684\u60c5\u51b5\u4e0b\uff0c\u5c06\u5f00\u53d1\u677f\u6302\u8f7d\u7f51\u7edc\u6587\u4ef6\u7cfb\u7edf\uff0c\u8f93\u5165\uff1a</p> <pre><code> mount -t nfs -o nolock,vers=3 192.168.5.11:/home/book/nfs_rootfs /mnt\n</code></pre> <p>\u6ce8\u610f\u4e0a\u9762\u7684192.168.5.11\u9700\u8981\u4fee\u6539\u4e3a\u81ea\u5df1\u7684Ubuntu\u7684ip\uff0c\u5177\u4f53\u64cd\u4f5c\u53ef\u53c2\u8003\u5d4c\u5165\u5f0fLinux\u5e94\u7528\u5f00\u53d1\u5b8c\u5168\u624b\u518c\u7b2c2\u7bc7\u7684\u7b2c\u4e03\u7ae0\u3002</p> <p>\u62f7\u8d1dmnt\u76ee\u5f55\u4e0b\u7684\u8bbe\u5907\u6811\u5230boot\u76ee\u5f55\uff0c\u8f93\u5165</p> <pre><code>cp /mnt/stm32mp157c-100ask-512d-lcd-v1.dtb /boot/\n</code></pre> <p>\u5c06mnt\u76ee\u5f55\u4e0b\u7684\u9a71\u52a8\u7a0b\u5e8f\u548c\u53ef\u6267\u884c\u7a0b\u5e8f\u62f7\u8d1d\u51fa\u6765</p> <pre><code>cp /mnt/sr04_drv.ko ~\ncp /mnt/sr04_test ~\n</code></pre> <p>\u91cd\u542f\u5f00\u53d1\u677f</p> <pre><code>reboot\n</code></pre> <p>\u91cd\u542f\u5b8c\u6210\u540e\uff0c\u5f00\u59cb\u5b89\u88c5\u9a71\u52a8\uff0c\u8f93\u5165</p> <pre><code>insmod sr501_drv.ko\n</code></pre> <p>\u6d4b\u8bd5\u7a0b\u5e8f\uff1a</p> <pre><code>./sr04_test /dev/sr04\n</code></pre> <p>\u5b9e\u9a8c\u73b0\u8c61\uff1a</p> <p></p>"},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/05-dht11driver/","title":"DHT11\u6e29\u6e7f\u5ea6\u4f20\u611f\u5668\u5b9e\u9a8c\u8bf4\u660e","text":""},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/05-dht11driver/#1","title":"1.\u786c\u4ef6\u4ecb\u7ecd","text":"<p>\u6a21\u5757\u539f\u7406\u56fe\u53ca\u8d44\u6599\uff1a<code>dht11.zip</code>\u3002</p>"},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/05-dht11driver/#2","title":"2.\u786c\u4ef6\u4e0e\u5f00\u53d1\u677f\u8fde\u63a5\u7684\u65b9\u6cd5","text":"<p>STM32MP157\u5148\u65ad\u7535\uff0c\u6309\u4e0b\u56fe\u6240\u793a\uff0c\u5c06\u6a21\u5757\u63d2\u5728\u6269\u5c55\u677f\u7684GPIO0\uff0c\u5c06\u6269\u5c55\u677f\u63d2\u5728\u5e95\u677f\u4e0a\u3002</p> <p>\u6ce8\u610f\uff1a\u4e3a\u4e86\u9632\u6b62\u7528\u6237\u63a5\u9519\u65b9\u5411\uff0c\u6a21\u5757\u548c\u6269\u5c55\u677f\u90fd\u6709\u4e00\u6761\u957f\u767d\u7ebf\uff0c\u8fde\u63a5\u65f6\u9700\u8981\u6a21\u5757\u4e0a\u7684\u767d\u7ebf\u548c\u6269\u5c55\u677f\u7684\u767d\u7ebf\u5728\u540c\u4e00\u4fa7\u3002</p> <p>\u6ce8\u610f\uff1aDHT11\u6a21\u5757\u4e2d\u7684\u5982\u4e0b\u56fe\u63a5\u7ebf\u3002</p> <p></p>"},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/05-dht11driver/#3","title":"3.\u4fee\u6539\u8bbe\u5907\u6811","text":"<p>100ASK_STM32MP157_PRO\u7684\u8bbe\u5907\u6811\u76ee\u5f55\u4e3a\uff1a   </p> <p><code>100ask_stm32mp157_pro-sdk/Linux-5.4/arch/arm/boot/dts/stm32mp157c-100ask-512d-lcd-v1.dts</code></p> <p>\u8fdb\u5165\u5185\u6838\u76ee\u5f55</p> <pre><code>cd ~/100ask_stm32mp157_pro-sdk/Linux-5.4\n</code></pre> <p>\u4fee\u6539\u8bbe\u5907\u6811dts</p> <pre><code>vi arch/arm/boot/dts/stm32mp157c-100ask-512d-lcd-v1.dts\n</code></pre> <p>\u589e\u52a0\u5982\u4e0b\u5185\u5bb9\uff0c</p> <pre><code>    dht11 {  /* for stm32mp157 */\n        compatible = \"100ask,dht11\";\n        gpios = &lt;&amp;gpioc 3 GPIO_ACTIVE_HIGH&gt;;\n    };\n</code></pre> <p></p> <p>\u4fee\u6539button\u8bbe\u5907\u6811\uff0c\u9632\u6b62\u6309\u952e\u62a2\u4e2d\u65ad\u3002</p> <pre><code>vi arch/arm/boot/dts/stm32mp15xx-100ask.dtsi\n</code></pre> <p>\u5728\u8f93\u5165\u6a21\u5f0f\u4e0b\uff0c\u8f93\u5165/joystick\uff0c\u56de\u8f66\uff0c\u5373\u53ef\u641c\u7d22\u5230\u4e0b\u56fe\u6240\u793a\u8bbe\u5907\u6811\uff0c\u5728\u8bbe\u5907\u6811\u4e2d\u589e\u52a0\u72b6\u6001\u3002</p> <pre><code>status = \"disabled\";\n</code></pre> <p></p> <p>\u4fdd\u5b58\u9000\u51fa\u540e\u7f16\u8bd1\u8bbe\u5907\u6811</p> <pre><code>make dtbs\n</code></pre> <p>\u5c06\u751f\u6210\u7684stm32mp157c-100ask-512d-lcd-v1.dtb\u62f7\u8d1d\u5230nfs_rootfs\u76ee\u5f55\u4e2d</p> <pre><code>cp arch/arm/boot/dts/stm32mp157c-100ask-512d-lcd-v1.dtb ~/nfs_rootfs/\n</code></pre>"},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/05-dht11driver/#4","title":"4.\u7f16\u8bd1\u7a0b\u5e8f","text":"<p>\u7a0b\u5e8f\u4f4d\u4e8esource\u6587\u4ef6\u5939\u4e2d\u3002</p> <p>\u4fee\u6539Makefile\u6587\u4ef6\uff0c\u5c06\u4e0b\u56fe\u4e2dMakefile\u6587\u4ef6\u4e2d\u7684KERN_DIR\u4fee\u6539\u4e3a\u5f00\u53d1\u677f\u5185\u6838\u76ee\u5f55\uff0c\u5982\u4f7f\u7528\u7684\u662f\u767e\u95ee\u7f51\u63d0\u4f9b\u7684Ubuntu\u955c\u50cf\u76ee\u5f55\u8bbe\u7f6e\u4e3a\uff1a</p> <pre><code>/home/book/100ask_stm32mp157_pro-sdk/Linux-5.4\n</code></pre> <p></p> <p>\u8f93\u5165make\uff0c\u7f16\u8bd1\u7a0b\u5e8f\u3002</p> <p></p> <p>\u5c06\u751f\u6210\u7684\u9a71\u52a8\u7a0b\u5e8fdht11_drv.ko\u548c\u5e94\u7528\u7a0b\u5e8fdht11_test\u62f7\u8d1d\u5230\u7f51\u7edc\u6587\u4ef6\u7cfb\u7edf\u4e2d\uff0c\u8f93\u5165</p> <pre><code>cp dht11_drv.ko dht11_test ~/nfs_rootfs/\n</code></pre>"},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/05-dht11driver/#5","title":"5.\u5f00\u53d1\u677f\u4e0a\u673a\u5b9e\u9a8c","text":"<p>\u5728\u4fdd\u8bc1\u5f00\u53d1\u677f\u548cUbuntu\u53ef\u4ee5ping\u901a\u7684\u60c5\u51b5\u4e0b\uff0c\u5c06\u5f00\u53d1\u677f\u6302\u8f7d\u7f51\u7edc\u6587\u4ef6\u7cfb\u7edf\uff0c\u8f93\u5165\uff1a</p> <pre><code> mount -t nfs -o nolock,vers=3 192.168.5.11:/home/book/nfs_rootfs /mnt\n</code></pre> <p>\u6ce8\u610f\u4e0a\u9762\u7684192.168.5.11\u9700\u8981\u4fee\u6539\u4e3a\u81ea\u5df1\u7684Ubuntu\u7684ip\uff0c\u5177\u4f53\u64cd\u4f5c\u53ef\u53c2\u8003\u5d4c\u5165\u5f0fLinux\u5e94\u7528\u5f00\u53d1\u5b8c\u5168\u624b\u518c\u7b2c2\u7bc7\u7684\u7b2c\u4e03\u7ae0\u3002</p> <p>\u62f7\u8d1dmnt\u76ee\u5f55\u4e0b\u7684\u8bbe\u5907\u6811\u5230boot\u76ee\u5f55\uff0c\u8f93\u5165</p> <pre><code>cp /mnt/stm32mp157c-100ask-512d-lcd-v1.dtb /boot/\n</code></pre> <p>\u5c06mnt\u76ee\u5f55\u4e0b\u7684\u9a71\u52a8\u7a0b\u5e8f\u548c\u53ef\u6267\u884c\u7a0b\u5e8f\u62f7\u8d1d\u51fa\u6765</p> <pre><code>cp /mnt/dht11_drv.ko ~\ncp /mnt/dht11_test ~\n</code></pre> <p>\u91cd\u542f\u5f00\u53d1\u677f</p> <pre><code>reboot\n</code></pre> <p>\u91cd\u542f\u5b8c\u6210\u540e\uff0c\u5f00\u59cb\u5b89\u88c5\u9a71\u52a8\uff0c\u8f93\u5165</p> <pre><code>insmod dht11_drv.ko\n</code></pre> <p>\u6d4b\u8bd5\u7a0b\u5e8f\uff1a</p> <pre><code>./dht11_test /dev/mydht11\n</code></pre> <p>\u5b9e\u9a8c\u73b0\u8c61\uff1a</p> <p></p>"},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/06-ds18b20driver/","title":"DS18B20\u6e29\u5ea6\u4f20\u611f\u5668\u5b9e\u9a8c\u8bf4\u660e","text":""},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/06-ds18b20driver/#1","title":"1.\u786c\u4ef6\u4ecb\u7ecd","text":"<p>\u6a21\u5757\u539f\u7406\u56fe\u53ca\u8d44\u6599\uff1a<code>ds18b20.zip</code>\u3002</p>"},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/06-ds18b20driver/#2","title":"2.\u786c\u4ef6\u4e0e\u5f00\u53d1\u677f\u8fde\u63a5\u7684\u65b9\u6cd5","text":"<p>STM32MP157\u5148\u65ad\u7535\uff0c\u6309\u4e0b\u56fe\u6240\u793a\uff0c\u5c06\u6a21\u5757\u63d2\u5728\u6269\u5c55\u677f\u7684GPIO0\uff0c\u5c06\u6269\u5c55\u677f\u63d2\u5728\u5e95\u677f\u4e0a\u3002</p> <p>\u6ce8\u610f\uff1a\u4e3a\u4e86\u9632\u6b62\u7528\u6237\u63a5\u9519\u65b9\u5411\uff0c\u6a21\u5757\u548c\u6269\u5c55\u677f\u90fd\u6709\u4e00\u6761\u957f\u767d\u7ebf\uff0c\u8fde\u63a5\u65f6\u9700\u8981\u6a21\u5757\u4e0a\u7684\u767d\u7ebf\u548c\u6269\u5c55\u677f\u7684\u767d\u7ebf\u5728\u540c\u4e00\u4fa7\u3002</p> <p>\u6ce8\u610f\uff1ads18b20\u6a21\u5757\u4e2d\u7684\u5982\u4e0b\u56fe\u63a5\u7ebf\u3002</p> <p></p>"},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/06-ds18b20driver/#3","title":"3.\u4fee\u6539\u8bbe\u5907\u6811","text":"<p>100ASK_STM32MP157_PRO\u7684\u8bbe\u5907\u6811\u76ee\u5f55\u4e3a\uff1a   </p> <p><code>100ask_stm32mp157_pro-sdk/Linux-5.4/arch/arm/boot/dts/stm32mp157c-100ask-512d-lcd-v1.dts</code></p> <p>\u8fdb\u5165\u5185\u6838\u76ee\u5f55</p> <pre><code>cd ~/100ask_stm32mp157_pro-sdk/Linux-5.4\n</code></pre> <p>\u4fee\u6539\u8bbe\u5907\u6811dts</p> <pre><code>vi arch/arm/boot/dts/stm32mp157c-100ask-512d-lcd-v1.dts\n</code></pre> <p>\u589e\u52a0\u5982\u4e0b\u5185\u5bb9\uff0c</p> <pre><code>   ds18b20 {  /* for stm32mp157 */\n        compatible = \"100ask,ds18b20\";\n        gpios = &lt;&amp;gpioc 3 GPIO_ACTIVE_HIGH&gt;;\n    };\n</code></pre> <p></p> <p>\u4fdd\u5b58\u9000\u51fa\u540e\u7f16\u8bd1\u8bbe\u5907\u6811</p> <pre><code>make dtbs\n</code></pre> <p>\u5c06\u751f\u6210\u7684stm32mp157c-100ask-512d-lcd-v1.dtb\u62f7\u8d1d\u5230nfs_rootfs\u76ee\u5f55\u4e2d</p> <pre><code>cp arch/arm/boot/dts/stm32mp157c-100ask-512d-lcd-v1.dtb ~/nfs_rootfs/\n</code></pre>"},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/06-ds18b20driver/#4","title":"4.\u7f16\u8bd1\u7a0b\u5e8f","text":"<p>\u7a0b\u5e8f\u4f4d\u4e8esource\u6587\u4ef6\u5939\u4e2d\u3002</p> <p>\u4fee\u6539Makefile\u6587\u4ef6\uff0c\u5c06\u4e0b\u56fe\u4e2dMakefile\u6587\u4ef6\u4e2d\u7684KERN_DIR\u4fee\u6539\u4e3a\u5f00\u53d1\u677f\u5185\u6838\u76ee\u5f55\uff0c\u5982\u4f7f\u7528\u7684\u662f\u767e\u95ee\u7f51\u63d0\u4f9b\u7684Ubuntu\u955c\u50cf\u76ee\u5f55\u8bbe\u7f6e\u4e3a\uff1a</p> <pre><code>/home/book/100ask_stm32mp157_pro-sdk/Linux-5.4\n</code></pre> <p></p> <p>\u8f93\u5165make\uff0c\u7f16\u8bd1\u7a0b\u5e8f\u3002</p> <p></p> <p>\u5c06\u751f\u6210\u7684\u9a71\u52a8\u7a0b\u5e8fds18b20_drv.ko\u548c\u5e94\u7528\u7a0b\u5e8fds18b20_test\u62f7\u8d1d\u5230\u7f51\u7edc\u6587\u4ef6\u7cfb\u7edf\u4e2d\uff0c\u8f93\u5165</p> <pre><code>cp ds18b20_drv.ko ds18b20_test ~/nfs_rootfs/\n</code></pre>"},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/06-ds18b20driver/#5","title":"5.\u5f00\u53d1\u677f\u4e0a\u673a\u5b9e\u9a8c","text":"<p>\u5728\u4fdd\u8bc1\u5f00\u53d1\u677f\u548cUbuntu\u53ef\u4ee5ping\u901a\u7684\u60c5\u51b5\u4e0b\uff0c\u5c06\u5f00\u53d1\u677f\u6302\u8f7d\u7f51\u7edc\u6587\u4ef6\u7cfb\u7edf\uff0c\u8f93\u5165\uff1a</p> <pre><code> mount -t nfs -o nolock,vers=3 192.168.5.11:/home/book/nfs_rootfs /mnt\n</code></pre> <p>\u6ce8\u610f\u4e0a\u9762\u7684192.168.5.11\u9700\u8981\u4fee\u6539\u4e3a\u81ea\u5df1\u7684Ubuntu\u7684ip\uff0c\u5177\u4f53\u64cd\u4f5c\u53ef\u53c2\u8003\u5d4c\u5165\u5f0fLinux\u5e94\u7528\u5f00\u53d1\u5b8c\u5168\u624b\u518c\u7b2c2\u7bc7\u7684\u7b2c\u4e03\u7ae0\u3002</p> <p>\u62f7\u8d1dmnt\u76ee\u5f55\u4e0b\u7684\u8bbe\u5907\u6811\u5230boot\u76ee\u5f55\uff0c\u8f93\u5165</p> <pre><code>cp /mnt/stm32mp157c-100ask-512d-lcd-v1.dtb /boot/\n</code></pre> <p>\u5c06mnt\u76ee\u5f55\u4e0b\u7684\u9a71\u52a8\u7a0b\u5e8f\u548c\u53ef\u6267\u884c\u7a0b\u5e8f\u62f7\u8d1d\u51fa\u6765</p> <pre><code>cp /mnt/ds18b20_drv.ko ~\ncp /mnt/ds18b20_test ~\n</code></pre> <p>\u91cd\u542f\u5f00\u53d1\u677f</p> <pre><code>reboot\n</code></pre> <p>\u91cd\u542f\u5b8c\u6210\u540e\uff0c\u5f00\u59cb\u5b89\u88c5\u9a71\u52a8\uff0c\u8f93\u5165</p> <pre><code>insmod ds18b20_drv.ko\n</code></pre> <p>\u6d4b\u8bd5\u7a0b\u5e8f\uff1a</p> <pre><code>./ds18b20_test /dev/myds18b20\n</code></pre> <p>\u5b9e\u9a8c\u73b0\u8c61\uff1a</p> <p></p>"},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/07-hs0038driver/","title":"HS0038\u7ea2\u5916\u6a21\u5757\u5b9e\u9a8c\u8bf4\u660e","text":""},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/07-hs0038driver/#1","title":"1.\u786c\u4ef6\u4ecb\u7ecd","text":"<p>\u6a21\u5757\u539f\u7406\u56fe\u53ca\u8d44\u6599\uff1a<code>irda.zip</code>\u3002</p>"},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/07-hs0038driver/#2","title":"2.\u786c\u4ef6\u4e0e\u5f00\u53d1\u677f\u8fde\u63a5\u7684\u65b9\u6cd5","text":"<p>STM32MP157\u5148\u65ad\u7535\uff0c\u6309\u4e0b\u56fe\u6240\u793a\uff0c\u5c06\u6a21\u5757\u63d2\u5728\u6269\u5c55\u677f\u7684GPIO0\uff0c\u5c06\u6269\u5c55\u677f\u63d2\u5728\u5e95\u677f\u4e0a\u3002</p> <p>\u6ce8\u610f\uff1a\u4e3a\u4e86\u9632\u6b62\u7528\u6237\u63a5\u9519\u65b9\u5411\uff0c\u6a21\u5757\u548c\u6269\u5c55\u677f\u90fd\u6709\u4e00\u6761\u957f\u767d\u7ebf\uff0c\u8fde\u63a5\u65f6\u9700\u8981\u6a21\u5757\u4e0a\u7684\u767d\u7ebf\u548c\u6269\u5c55\u677f\u7684\u767d\u7ebf\u5728\u540c\u4e00\u4fa7\u3002</p> <p>\u6ce8\u610f\uff1ahs0038\u6a21\u5757\u4e2d\u7684\u5982\u4e0b\u56fe\u63a5\u7ebf\u3002</p> <p></p>"},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/07-hs0038driver/#3","title":"3.\u4fee\u6539\u8bbe\u5907\u6811","text":"<p>100ASK_STM32MP157_PRO\u7684\u8bbe\u5907\u6811\u76ee\u5f55\u4e3a\uff1a   </p> <p><code>100ask_stm32mp157_pro-sdk/Linux-5.4/arch/arm/boot/dts/stm32mp157c-100ask-512d-lcd-v1.dts</code></p> <p>\u8fdb\u5165\u5185\u6838\u76ee\u5f55</p> <pre><code>cd ~/100ask_stm32mp157_pro-sdk/Linux-5.4\n</code></pre> <p>\u4fee\u6539\u8bbe\u5907\u6811dts</p> <pre><code>vi arch/arm/boot/dts/stm32mp157c-100ask-512d-lcd-v1.dts\n</code></pre> <p>\u589e\u52a0\u5982\u4e0b\u5185\u5bb9\uff0c</p> <pre><code>   hs0038 {  /* for stm32mp157 */\n        compatible = \"100ask,hs0038\";\n        gpios = &lt;&amp;gpioc 3 GPIO_ACTIVE_HIGH&gt;;\n    };\n</code></pre> <p></p> <p>\u4fdd\u5b58\u9000\u51fa\u540e\u7f16\u8bd1\u8bbe\u5907\u6811</p> <pre><code>make dtbs\n</code></pre> <p>\u5c06\u751f\u6210\u7684stm32mp157c-100ask-512d-lcd-v1.dtb\u62f7\u8d1d\u5230nfs_rootfs\u76ee\u5f55\u4e2d</p> <pre><code>cp arch/arm/boot/dts/stm32mp157c-100ask-512d-lcd-v1.dtb ~/nfs_rootfs/\n</code></pre>"},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/07-hs0038driver/#4","title":"4.\u7f16\u8bd1\u7a0b\u5e8f","text":"<p>\u7a0b\u5e8f\u4f4d\u4e8esource\u6587\u4ef6\u5939\u4e2d\u3002</p> <p>\u4fee\u6539Makefile\u6587\u4ef6\uff0c\u5c06\u4e0b\u56fe\u4e2dMakefile\u6587\u4ef6\u4e2d\u7684KERN_DIR\u4fee\u6539\u4e3a\u5f00\u53d1\u677f\u5185\u6838\u76ee\u5f55\uff0c\u5982\u4f7f\u7528\u7684\u662f\u767e\u95ee\u7f51\u63d0\u4f9b\u7684Ubuntu\u955c\u50cf\u76ee\u5f55\u8bbe\u7f6e\u4e3a\uff1a</p> <pre><code>/home/book/100ask_stm32mp157_pro-sdk/Linux-5.4\n</code></pre> <p></p> <p>\u8f93\u5165make\uff0c\u7f16\u8bd1\u7a0b\u5e8f\u3002</p> <p></p> <p>\u5c06\u751f\u6210\u7684\u9a71\u52a8\u7a0b\u5e8fhs0038_drv.ko\u548c\u5e94\u7528\u7a0b\u5e8fhs0038_test_input\u62f7\u8d1d\u5230\u7f51\u7edc\u6587\u4ef6\u7cfb\u7edf\u4e2d\uff0c\u8f93\u5165</p> <pre><code>cp hs0038_drv.ko hs0038_test_input ~/nfs_rootfs/\n</code></pre>"},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/07-hs0038driver/#5","title":"5.\u5f00\u53d1\u677f\u4e0a\u673a\u5b9e\u9a8c","text":"<p>\u5728\u4fdd\u8bc1\u5f00\u53d1\u677f\u548cUbuntu\u53ef\u4ee5ping\u901a\u7684\u60c5\u51b5\u4e0b\uff0c\u5c06\u5f00\u53d1\u677f\u6302\u8f7d\u7f51\u7edc\u6587\u4ef6\u7cfb\u7edf\uff0c\u8f93\u5165\uff1a</p> <pre><code> mount -t nfs -o nolock,vers=3 192.168.5.11:/home/book/nfs_rootfs /mnt\n</code></pre> <p>\u6ce8\u610f\u4e0a\u9762\u7684192.168.5.11\u9700\u8981\u4fee\u6539\u4e3a\u81ea\u5df1\u7684Ubuntu\u7684ip\uff0c\u5177\u4f53\u64cd\u4f5c\u53ef\u53c2\u8003\u5d4c\u5165\u5f0fLinux\u5e94\u7528\u5f00\u53d1\u5b8c\u5168\u624b\u518c\u7b2c2\u7bc7\u7684\u7b2c\u4e03\u7ae0\u3002</p> <p>\u62f7\u8d1dmnt\u76ee\u5f55\u4e0b\u7684\u8bbe\u5907\u6811\u5230boot\u76ee\u5f55\uff0c\u8f93\u5165</p> <pre><code>cp /mnt/stm32mp157c-100ask-512d-lcd-v1.dtb /boot/\n</code></pre> <p>\u5c06mnt\u76ee\u5f55\u4e0b\u7684\u9a71\u52a8\u7a0b\u5e8f\u548c\u53ef\u6267\u884c\u7a0b\u5e8f\u62f7\u8d1d\u51fa\u6765</p> <pre><code>cp /mnt/hs0038_drv.ko ~\ncp /mnt/hs0038_test_input ~\n</code></pre> <p>\u91cd\u542f\u5f00\u53d1\u677f</p> <pre><code>reboot\n</code></pre> <p>\u91cd\u542f\u5b8c\u6210\u540e\uff0c\u5f00\u59cb\u5b89\u88c5\u9a71\u52a8\uff0c\u8f93\u5165</p> <pre><code>insmod hs0038_drv.ko\n</code></pre> <p>\u6d4b\u8bd5\u7a0b\u5e8f\uff1a</p> <pre><code>./hs0038_test_input /dev/input/event0\n</code></pre> <p>\u4f7f\u7528\u7ea2\u5916\u9065\u63a7\u5668\uff0c\u6309\u4e0b\u6309\u952e\u7684\u5b9e\u9a8c\u73b0\u8c61\uff1a</p> <p></p>"},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/08-at24c02driver/","title":"AT24C02\u7ea2\u5916\u6a21\u5757\u5b9e\u9a8c\u8bf4\u660e","text":""},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/08-at24c02driver/#1","title":"1.\u786c\u4ef6\u4ecb\u7ecd","text":"<p>\u6a21\u5757\u539f\u7406\u56fe\u53ca\u8d44\u6599\uff1a<code>eeprom.zip</code>\u3002</p>"},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/08-at24c02driver/#2","title":"2.\u786c\u4ef6\u4e0e\u5f00\u53d1\u677f\u8fde\u63a5\u7684\u65b9\u6cd5","text":"<p>STM32MP157\u5148\u65ad\u7535\uff0c\u6309\u4e0b\u56fe\u6240\u793a\uff0c\u5c06\u6a21\u5757\u63d2\u5728\u6269\u5c55\u677f\u7684GPIO0\uff0c\u5c06\u6269\u5c55\u677f\u63d2\u5728\u5e95\u677f\u4e0a\u3002</p> <p>\u6ce8\u610f\uff1a\u4e3a\u4e86\u9632\u6b62\u7528\u6237\u63a5\u9519\u65b9\u5411\uff0c\u6a21\u5757\u548c\u6269\u5c55\u677f\u90fd\u6709\u4e00\u6761\u957f\u767d\u7ebf\uff0c\u8fde\u63a5\u65f6\u9700\u8981\u6a21\u5757\u4e0a\u7684\u767d\u7ebf\u548c\u6269\u5c55\u677f\u7684\u767d\u7ebf\u5728\u540c\u4e00\u4fa7\u3002</p> <p>\u6ce8\u610f\uff1aat24c02\u6a21\u5757\u4e2d\u7684\u5982\u4e0b\u56fe\u63a5\u7ebf\u3002</p> <p></p>"},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/08-at24c02driver/#3","title":"3.\u4fee\u6539\u8bbe\u5907\u6811","text":"<p>100ASK_STM32MP157_PRO\u7684\u8bbe\u5907\u6811\u76ee\u5f55\u4e3a\uff1a   </p> <p><code>100ask_stm32mp157_pro-sdk/Linux-5.4/arch/arm/boot/dts/stm32mp157c-100ask-512d-lcd-v1.dts</code></p> <p>\u8fdb\u5165\u5185\u6838\u76ee\u5f55</p> <pre><code>cd ~/100ask_stm32mp157_pro-sdk/Linux-5.4\n</code></pre> <p>\u4fee\u6539\u8bbe\u5907\u6811dts</p> <pre><code>vi arch/arm/boot/dts/stm32mp157c-100ask-512d-lcd-v1.dts\n</code></pre> <p>\u589e\u52a0\u5982\u4e0b\u5185\u5bb9\uff0c</p> <pre><code>&amp;i2c2 {\n        at24c02 {\n                compatible = \"100ask,at24c02\";\n                reg = &lt;0x50&gt;;\n        };\n};\n</code></pre> <p></p> <p>\u4fdd\u5b58\u9000\u51fa\u540e\u7f16\u8bd1\u8bbe\u5907\u6811</p> <pre><code>make dtbs\n</code></pre> <p>\u6ce8\u610f\uff1a\u5982\u6709\u8b66\u544a\u53ef\u4ee5\u65e0\u89c6\u3002</p> <p>\u5c06\u751f\u6210\u7684stm32mp157c-100ask-512d-lcd-v1.dtb\u62f7\u8d1d\u5230nfs_rootfs\u76ee\u5f55\u4e2d</p> <pre><code>cp arch/arm/boot/dts/stm32mp157c-100ask-512d-lcd-v1.dtb ~/nfs_rootfs/\n</code></pre>"},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/08-at24c02driver/#4","title":"4.\u7f16\u8bd1\u7a0b\u5e8f","text":"<p>\u7a0b\u5e8f\u4f4d\u4e8esource\u6587\u4ef6\u5939\u4e2d\u3002</p> <p>\u4fee\u6539Makefile\u6587\u4ef6\uff0c\u5c06\u4e0b\u56fe\u4e2dMakefile\u6587\u4ef6\u4e2d\u7684KERN_DIR\u4fee\u6539\u4e3a\u5f00\u53d1\u677f\u5185\u6838\u76ee\u5f55\uff0c\u5982\u4f7f\u7528\u7684\u662f\u767e\u95ee\u7f51\u63d0\u4f9b\u7684Ubuntu\u955c\u50cf\u76ee\u5f55\u8bbe\u7f6e\u4e3a\uff1a</p> <pre><code>/home/book/100ask_stm32mp157_pro-sdk/Linux-5.4\n</code></pre> <p></p> <p>\u8f93\u5165make\uff0c\u7f16\u8bd1\u7a0b\u5e8f\u3002</p> <p></p> <p>\u5c06\u751f\u6210\u7684\u9a71\u52a8\u7a0b\u5e8fat24c02_drv.ko\u548c\u5e94\u7528\u7a0b\u5e8fat24c02_test\u62f7\u8d1d\u5230\u7f51\u7edc\u6587\u4ef6\u7cfb\u7edf\u4e2d\uff0c\u8f93\u5165</p> <pre><code>cp at24c02_drv.ko at24c02_test ~/nfs_rootfs/\n</code></pre>"},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/08-at24c02driver/#5","title":"5.\u5f00\u53d1\u677f\u4e0a\u673a\u5b9e\u9a8c","text":"<p>\u5728\u4fdd\u8bc1\u5f00\u53d1\u677f\u548cUbuntu\u53ef\u4ee5ping\u901a\u7684\u60c5\u51b5\u4e0b\uff0c\u5c06\u5f00\u53d1\u677f\u6302\u8f7d\u7f51\u7edc\u6587\u4ef6\u7cfb\u7edf\uff0c\u8f93\u5165\uff1a</p> <pre><code> mount -t nfs -o nolock,vers=3 192.168.5.11:/home/book/nfs_rootfs /mnt\n</code></pre> <p>\u6ce8\u610f\u4e0a\u9762\u7684192.168.5.11\u9700\u8981\u4fee\u6539\u4e3a\u81ea\u5df1\u7684Ubuntu\u7684ip\uff0c\u5177\u4f53\u64cd\u4f5c\u53ef\u53c2\u8003\u5d4c\u5165\u5f0fLinux\u5e94\u7528\u5f00\u53d1\u5b8c\u5168\u624b\u518c\u7b2c2\u7bc7\u7684\u7b2c\u4e03\u7ae0\u3002</p> <p>\u62f7\u8d1dmnt\u76ee\u5f55\u4e0b\u7684\u8bbe\u5907\u6811\u5230boot\u76ee\u5f55\uff0c\u8f93\u5165</p> <pre><code>cp /mnt/stm32mp157c-100ask-512d-lcd-v1.dtb /boot/\n</code></pre> <p>\u5c06mnt\u76ee\u5f55\u4e0b\u7684\u9a71\u52a8\u7a0b\u5e8f\u548c\u53ef\u6267\u884c\u7a0b\u5e8f\u62f7\u8d1d\u51fa\u6765</p> <pre><code>cp /mnt/at24c02_drv.ko ~\ncp /mnt/at24c02_test ~\n</code></pre> <p>\u91cd\u542f\u5f00\u53d1\u677f</p> <pre><code>reboot\n</code></pre> <p>\u91cd\u542f\u5b8c\u6210\u540e\uff0c\u5f00\u59cb\u5b89\u88c5\u9a71\u52a8\uff0c\u8f93\u5165</p> <pre><code>insmod at24c02_drv.ko\n</code></pre> <p>\u6d4b\u8bd5\u7a0b\u5e8f\uff1a</p> <pre><code>./at24c02_test /dev/myat24c02 r 0\n./at24c02_test /dev/myat24c02 w 0 0x88\n./at24c02_test /dev/myat24c02 r 0\n./at24c02_test /dev/myat24c02 r 1\n./at24c02_test /dev/myat24c02 w 1 0x37\n ./at24c02_test /dev/myat24c02 r 1\n</code></pre> <p>\u5b9e\u9a8c\u73b0\u8c61\uff1a</p> <p></p>"},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/09-oleddriver/","title":"OLED\u5c4f\u5e55\u5b9e\u9a8c\u8bf4\u660e","text":""},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/09-oleddriver/#1","title":"1.\u786c\u4ef6\u4ecb\u7ecd","text":"<p>\u6a21\u5757\u539f\u7406\u56fe\u53ca\u8d44\u6599\uff1a<code>oled.zip</code>\u3002</p>"},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/09-oleddriver/#2","title":"2.\u786c\u4ef6\u4e0e\u5f00\u53d1\u677f\u8fde\u63a5\u7684\u65b9\u6cd5","text":"<p>STM32MP157\u5148\u65ad\u7535\uff0c\u6309\u4e0b\u56fe\u6240\u793a\uff0c\u5c06\u6a21\u5757\u63d2\u5728\u6269\u5c55\u677f\u7684GPIO0\uff0c\u5c06\u6269\u5c55\u677f\u63d2\u5728\u5e95\u677f\u4e0a\u3002</p> <p>\u6ce8\u610f\uff1a\u4e3a\u4e86\u9632\u6b62\u7528\u6237\u63a5\u9519\u65b9\u5411\uff0c\u6a21\u5757\u548c\u6269\u5c55\u677f\u90fd\u6709\u4e00\u6761\u957f\u767d\u7ebf\uff0c\u8fde\u63a5\u65f6\u9700\u8981\u6a21\u5757\u4e0a\u7684\u767d\u7ebf\u548c\u6269\u5c55\u677f\u7684\u767d\u7ebf\u5728\u540c\u4e00\u4fa7\u3002</p> <p>\u6ce8\u610f\uff1aoled\u6a21\u5757\u4e2d\u7684\u5982\u4e0b\u56fe\u63a5\u7ebf\u3002</p> <p></p>"},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/09-oleddriver/#3","title":"3.\u4fee\u6539\u8bbe\u5907\u6811","text":"<p>100ASK_STM32MP157_PRO\u7684\u8bbe\u5907\u6811\u76ee\u5f55\u4e3a\uff1a   </p> <p><code>100ask_stm32mp157_pro-sdk/Linux-5.4/arch/arm/boot/dts/stm32mp157c-100ask-512d-lcd-v1.dts</code></p> <p>\u8fdb\u5165\u5185\u6838\u76ee\u5f55</p> <pre><code>cd ~/100ask_stm32mp157_pro-sdk/Linux-5.4\n</code></pre> <p>\u4fee\u6539\u8bbe\u5907\u6811dts</p> <pre><code>vi arch/arm/boot/dts/stm32mp157c-100ask-512d-lcd-v1.dts\n</code></pre> <p>\u627e\u5230spi5\uff0c\u4fee\u6539\u4e3a\u5982\u4e0b\u5185\u5bb9\uff0c</p> <pre><code>&amp;spi5 {\n        pinctrl-names = \"default\", \"sleep\";\n        pinctrl-0 = &lt;&amp;spi5_pins_a&gt;;\n        pinctrl-1 = &lt;&amp;spi5_sleep_pins_a&gt;;\n        status = \"okay\";\n        cs-gpios = &lt;&amp;gpioh 5 GPIO_ACTIVE_LOW&gt;, &lt;&amp;gpioz 4 GPIO_ACTIVE_LOW&gt;;\n        spidev: icm20608@0{\n                compatible = \"invensense,icm20608\";\n                interrupts = &lt;0 IRQ_TYPE_EDGE_FALLING&gt;;\n                interrupt-parent = &lt;&amp;gpioz&gt;;\n                spi-max-frequency = &lt;8000000&gt;;\n                reg = &lt;0&gt;;\n        };\n        oled: oled@1{\n                compatible = \"100ask,oled\";\n                spi-max-frequency = &lt;10000000&gt;;\n                reg = &lt;1&gt;;\n                dc-gpios = &lt;&amp;gpioa 13 GPIO_ACTIVE_HIGH&gt;;\n                pinctrl-names = \"default\";\n                pinctrl-0 = &lt;&amp;oled_pins&gt;;\n        };\n};\n</code></pre> <p></p> <p>\u8fd8\u9700\u8981\u589e\u52a0\u4f7f\u7528\u7684\u5f15\u811a\uff0c\u4fee\u6539<code>arch/arm/boot/dts/stm32mp157-100ask-pinctrl.dtsi</code>\u6587\u4ef6\uff0c\u8f93\u5165</p> <pre><code>vim arch/arm/boot/dts/stm32mp157-100ask-pinctrl.dtsi\n</code></pre> <p>\u589e\u52a0\u5982\u4e0b\u5185\u5bb9</p> <pre><code>        oled_pins: oled_pins {\n                pins {\n                        pinmux = &lt;STM32_PINMUX('A', 13, GPIO)&gt;;\n                        bias-disable;\n                        drive-push-pull;\n                        slew-rate = &lt;1&gt;;\n                };\n        };\n</code></pre> <p></p> <p>\u4fdd\u5b58\u9000\u51fa\u540e\u7f16\u8bd1\u8bbe\u5907\u6811</p> <pre><code>make dtbs\n</code></pre> <p>\u5c06\u751f\u6210\u7684stm32mp157c-100ask-512d-lcd-v1.dtb\u62f7\u8d1d\u5230nfs_rootfs\u76ee\u5f55\u4e2d</p> <pre><code>cp arch/arm/boot/dts/stm32mp157c-100ask-512d-lcd-v1.dtb ~/nfs_rootfs/\n</code></pre>"},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/09-oleddriver/#4","title":"4.\u7f16\u8bd1\u7a0b\u5e8f","text":"<p>\u7a0b\u5e8f\u4f4d\u4e8esource\u6587\u4ef6\u5939\u4e2d\u3002</p> <p>\u4fee\u6539Makefile\u6587\u4ef6\uff0c\u5c06\u4e0b\u56fe\u4e2dMakefile\u6587\u4ef6\u4e2d\u7684KERN_DIR\u4fee\u6539\u4e3a\u5f00\u53d1\u677f\u5185\u6838\u76ee\u5f55\uff0c\u5982\u4f7f\u7528\u7684\u662f\u767e\u95ee\u7f51\u63d0\u4f9b\u7684Ubuntu\u955c\u50cf\u76ee\u5f55\u8bbe\u7f6e\u4e3a\uff1a</p> <pre><code>/home/book/100ask_stm32mp157_pro-sdk/Linux-5.4\n</code></pre> <p></p> <p>\u8f93\u5165make\uff0c\u7f16\u8bd1\u7a0b\u5e8f\u3002</p> <p></p> <p>\u5c06\u751f\u6210\u7684\u9a71\u52a8\u7a0b\u5e8foled_drv.ko\u548c\u5e94\u7528\u7a0b\u5e8fspi_oled\u62f7\u8d1d\u5230\u7f51\u7edc\u6587\u4ef6\u7cfb\u7edf\u4e2d\uff0c\u8f93\u5165</p> <pre><code>cp oled_drv.ko spi_oled ~/nfs_rootfs/\n</code></pre>"},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/09-oleddriver/#5","title":"5.\u5f00\u53d1\u677f\u4e0a\u673a\u5b9e\u9a8c","text":"<p>\u5728\u4fdd\u8bc1\u5f00\u53d1\u677f\u548cUbuntu\u53ef\u4ee5ping\u901a\u7684\u60c5\u51b5\u4e0b\uff0c\u5c06\u5f00\u53d1\u677f\u6302\u8f7d\u7f51\u7edc\u6587\u4ef6\u7cfb\u7edf\uff0c\u8f93\u5165\uff1a</p> <pre><code> mount -t nfs -o nolock,vers=3 192.168.5.11:/home/book/nfs_rootfs /mnt\n</code></pre> <p>\u6ce8\u610f\u4e0a\u9762\u7684192.168.5.11\u9700\u8981\u4fee\u6539\u4e3a\u81ea\u5df1\u7684Ubuntu\u7684ip\uff0c\u5177\u4f53\u64cd\u4f5c\u53ef\u53c2\u8003\u5d4c\u5165\u5f0fLinux\u5e94\u7528\u5f00\u53d1\u5b8c\u5168\u624b\u518c\u7b2c2\u7bc7\u7684\u7b2c\u4e03\u7ae0\u3002</p> <p>\u62f7\u8d1dmnt\u76ee\u5f55\u4e0b\u7684\u8bbe\u5907\u6811\u5230boot\u76ee\u5f55\uff0c\u8f93\u5165</p> <pre><code>cp /mnt/stm32mp157c-100ask-512d-lcd-v1.dtb /boot/\n</code></pre> <p>\u5c06mnt\u76ee\u5f55\u4e0b\u7684\u9a71\u52a8\u7a0b\u5e8f\u548c\u53ef\u6267\u884c\u7a0b\u5e8f\u62f7\u8d1d\u51fa\u6765</p> <pre><code>cp /mnt/oled_drv.ko ~\ncp /mnt/spi_oled ~\n</code></pre> <p>\u91cd\u542f\u5f00\u53d1\u677f</p> <pre><code>reboot\n</code></pre> <p>\u91cd\u542f\u5b8c\u6210\u540e\uff0c\u5f00\u59cb\u5b89\u88c5\u9a71\u52a8\uff0c\u8f93\u5165</p> <pre><code>insmod oled_drv.ko\n</code></pre> <p>\u6d4b\u8bd5\u7a0b\u5e8f\uff1a</p> <pre><code>./spi_oled  /dev/100ask_oled\n</code></pre> <p>\u5b9e\u9a8c\u73b0\u8c61\uff1a</p> <p></p>"},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/10-dacdriver/","title":"OLED\u5c4f\u5e55\u5b9e\u9a8c\u8bf4\u660e","text":""},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/10-dacdriver/#1","title":"1.\u786c\u4ef6\u4ecb\u7ecd","text":"<p>\u6a21\u5757\u539f\u7406\u56fe\u53ca\u8d44\u6599\uff1a<code>dac.zip</code>\u3002</p>"},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/10-dacdriver/#2","title":"2.\u786c\u4ef6\u4e0e\u5f00\u53d1\u677f\u8fde\u63a5\u7684\u65b9\u6cd5","text":"<p>STM32MP157\u5148\u65ad\u7535\uff0c\u6309\u4e0b\u56fe\u6240\u793a\uff0c\u5c06\u6a21\u5757\u63d2\u5728\u6269\u5c55\u677f\u7684GPIO0\uff0c\u5c06\u6269\u5c55\u677f\u63d2\u5728\u5e95\u677f\u4e0a\u3002</p> <p>\u6ce8\u610f\uff1a\u4e3a\u4e86\u9632\u6b62\u7528\u6237\u63a5\u9519\u65b9\u5411\uff0c\u6a21\u5757\u548c\u6269\u5c55\u677f\u90fd\u6709\u4e00\u6761\u957f\u767d\u7ebf\uff0c\u8fde\u63a5\u65f6\u9700\u8981\u6a21\u5757\u4e0a\u7684\u767d\u7ebf\u548c\u6269\u5c55\u677f\u7684\u767d\u7ebf\u5728\u540c\u4e00\u4fa7\u3002</p> <p>\u6ce8\u610f\uff1aoled\u6a21\u5757\u4e2d\u7684\u5982\u4e0b\u56fe\u63a5\u7ebf\u3002</p> <p></p>"},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/10-dacdriver/#3","title":"3.\u4fee\u6539\u8bbe\u5907\u6811","text":"<p>100ASK_STM32MP157_PRO\u7684\u8bbe\u5907\u6811\u76ee\u5f55\u4e3a\uff1a   </p> <p><code>100ask_stm32mp157_pro-sdk/Linux-5.4/arch/arm/boot/dts/stm32mp157c-100ask-512d-lcd-v1.dts</code></p> <p>\u8fdb\u5165\u5185\u6838\u76ee\u5f55</p> <pre><code>cd ~/100ask_stm32mp157_pro-sdk/Linux-5.4\n</code></pre> <p>\u4fee\u6539\u8bbe\u5907\u6811dts</p> <pre><code>vi arch/arm/boot/dts/stm32mp157c-100ask-512d-lcd-v1.dts\n</code></pre> <p>\u627e\u5230spi5\uff0c\u4fee\u6539\u4e3a\u5982\u4e0b\u5185\u5bb9\uff0c</p> <pre><code>&amp;spi5 {\n        pinctrl-names = \"default\", \"sleep\";\n        pinctrl-0 = &lt;&amp;spi5_pins_a&gt;;\n        pinctrl-1 = &lt;&amp;spi5_sleep_pins_a&gt;;\n        status = \"okay\";\n        cs-gpios = &lt;&amp;gpioh 5 GPIO_ACTIVE_LOW&gt;, &lt;&amp;gpioz 4 GPIO_ACTIVE_LOW&gt;;\n        spidev: icm20608@0{\n                compatible = \"invensense,icm20608\";\n                interrupts = &lt;0 IRQ_TYPE_EDGE_FALLING&gt;;\n                interrupt-parent = &lt;&amp;gpioz&gt;;\n                spi-max-frequency = &lt;8000000&gt;;\n                reg = &lt;0&gt;;\n        };\n        dac_test: dac_test@1{\n                compatible = \"spidev\";\n                spi-max-frequency = &lt;20000000&gt;;\n                reg = &lt;1&gt;;\n        };\n};\n</code></pre> <p></p> <p>\u4fdd\u5b58\u9000\u51fa\u540e\u7f16\u8bd1\u8bbe\u5907\u6811</p> <pre><code>make dtbs\n</code></pre> <p>\u5c06\u751f\u6210\u7684stm32mp157c-100ask-512d-lcd-v1.dtb\u62f7\u8d1d\u5230nfs_rootfs\u76ee\u5f55\u4e2d</p> <pre><code>cp arch/arm/boot/dts/stm32mp157c-100ask-512d-lcd-v1.dtb ~/nfs_rootfs/\n</code></pre>"},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/10-dacdriver/#4","title":"4.\u7f16\u8bd1\u7a0b\u5e8f","text":"<p>\u7a0b\u5e8f\u4f4d\u4e8esource\u6587\u4ef6\u5939\u4e2d\u3002</p> <p>\u4fee\u6539Makefile\u6587\u4ef6\uff0c\u5c06\u4e0b\u56fe\u4e2dMakefile\u6587\u4ef6\u4e2d\u7684KERN_DIR\u4fee\u6539\u4e3a\u5f00\u53d1\u677f\u5185\u6838\u76ee\u5f55\uff0c\u5982\u4f7f\u7528\u7684\u662f\u767e\u95ee\u7f51\u63d0\u4f9b\u7684Ubuntu\u955c\u50cf\u76ee\u5f55\u8bbe\u7f6e\u4e3a\uff1a</p> <pre><code>/home/book/100ask_stm32mp157_pro-sdk/Linux-5.4\n</code></pre> <p></p> <p>\u8f93\u5165make\uff0c\u7f16\u8bd1\u7a0b\u5e8f\u3002</p> <p></p> <p>\u5c06\u751f\u6210\u7684\u5e94\u7528\u7a0b\u5e8fdac_test\u62f7\u8d1d\u5230\u7f51\u7edc\u6587\u4ef6\u7cfb\u7edf\u4e2d\uff0c\u8f93\u5165</p> <pre><code>cp dac_test ~/nfs_rootfs/\n</code></pre>"},{"location":"Stage3-DeviceDriver/St/STM32MP157/Pro/10-dacdriver/#5","title":"5.\u5f00\u53d1\u677f\u4e0a\u673a\u5b9e\u9a8c","text":"<p>\u5728\u4fdd\u8bc1\u5f00\u53d1\u677f\u548cUbuntu\u53ef\u4ee5ping\u901a\u7684\u60c5\u51b5\u4e0b\uff0c\u5c06\u5f00\u53d1\u677f\u6302\u8f7d\u7f51\u7edc\u6587\u4ef6\u7cfb\u7edf\uff0c\u8f93\u5165\uff1a</p> <pre><code> mount -t nfs -o nolock,vers=3 192.168.5.11:/home/book/nfs_rootfs /mnt\n</code></pre> <p>\u6ce8\u610f\u4e0a\u9762\u7684192.168.5.11\u9700\u8981\u4fee\u6539\u4e3a\u81ea\u5df1\u7684Ubuntu\u7684ip\uff0c\u5177\u4f53\u64cd\u4f5c\u53ef\u53c2\u8003\u5d4c\u5165\u5f0fLinux\u5e94\u7528\u5f00\u53d1\u5b8c\u5168\u624b\u518c\u7b2c2\u7bc7\u7684\u7b2c\u4e03\u7ae0\u3002</p> <p>\u62f7\u8d1dmnt\u76ee\u5f55\u4e0b\u7684\u8bbe\u5907\u6811\u5230boot\u76ee\u5f55\uff0c\u8f93\u5165</p> <pre><code>cp /mnt/stm32mp157c-100ask-512d-lcd-v1.dtb /boot/\n</code></pre> <p>\u5c06mnt\u76ee\u5f55\u4e0b\u7684\u9a71\u52a8\u7a0b\u5e8f\u548c\u53ef\u6267\u884c\u7a0b\u5e8f\u62f7\u8d1d\u51fa\u6765</p> <pre><code>cp /mnt/dac_test ~\n</code></pre> <p>\u91cd\u542f\u5f00\u53d1\u677f</p> <pre><code>reboot\n</code></pre> <p>\u6d4b\u8bd5\u7a0b\u5e8f\uff1a</p> <pre><code>./dac_test  /dev/spidev0.0  500\n./dac_test  /dev/spidev0.0  600\n./dac_test  /dev/spidev0.0  1000\n</code></pre> <p>\u5b9e\u9a8c\u73b0\u8c61\uff1a</p> <p></p>"},{"location":"Stage4-System/01-Introduction/","title":"SSD202Pro","text":"<ul> <li>\u95ee\u9898\u53cd\u9988\u4ea4\u6d41\u533a https://github.com/100askTeam/Stage2_D1s-DeviceDriver/discussions/2</li> </ul>"},{"location":"Stage4-System/01-Introduction/#_1","title":"\u7b80\u8ff0","text":""},{"location":"Stage4-System/01-PinctrlIntroduction/","title":"01 PinctrlIntroduction","text":"<ul> <li>\u95ee\u9898\u53cd\u9988\u4ea4\u6d41\u533a https://github.com/100askTeam/Stage2_D1s-DeviceDriver/discussions/2</li> </ul>"},{"location":"Stage4-System/01-PinctrlIntroduction/#_1","title":"\u7b80\u8ff0","text":""}]}